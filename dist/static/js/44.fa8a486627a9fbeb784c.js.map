{"version":3,"sources":["webpack:///./src/api/finance/couponPresent.js","webpack:///src/pages/finance/couponPresent/Page.vue","webpack:///./src/pages/finance/couponPresent/Page.vue?92fc","webpack:///./src/pages/finance/couponPresent/Page.vue"],"names":["params","__WEBPACK_IMPORTED_MODULE_0_common_axiosClient__","post","Page","SubTitle","Date","end","fetchPresentList","fetchCouponTotal","storeId","_this","this","then","res","list","_this2","data","_this3","setDefaultDate","couponPresent_Page","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","_v","staticStyle","margin-top","margin-bottom","type","align","unlink-panels","range-separator","start-placeholder","end-placeholder","picker-options","pickerOptions2","value-format","model","value","callback","$$v","time","expression","directives","name","rawName","width","couponPresentList","label","prop","scopedSlots","_u","key","fn","scope","_s","row","discountMoney","plain","on","click","$event","jumpTo","couponTotal","discountMoneyTotal","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/44.fa8a486627a9fbeb784c.js","sourcesContent":["import { axiosClient } from 'common/axiosClient';\n\n// 获取赠送消耗列表\nexport function getCouponPresentList(params) {\n  return axiosClient.post('admin/store/getCouponUseList', params)\n}\n\n// 获取消耗统计\nexport function getPresentTotal(params) {\n  return axiosClient.post('admin/Store/getCouponTotal', params)\n} \n\n// 获取消耗详情列表\nexport function getPresentListDetail(params) {\n  return axiosClient.post('admin/store/getStoreCouponUseList', params)\n}\n\n// 获取消耗详情统计\nexport function getPresentTotalDetail(params) {\n  return axiosClient.post('admin/store/getStoreCouponTotal', params)\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/finance/couponPresent.js","<template>\n  <div class=\"couponPresentPage\">\n    <sub-title title=\"赠送消耗\"></sub-title>\n    <div class=\"date_time_picker\" style=\"margin-top: 30px;margin-bottom: 10px;\">\n      <el-date-picker v-model=\"time\" type=\"daterange\" align=\"right\" unlink-panels range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" :picker-options=\"pickerOptions2\" value-format=\"yyyy-MM-dd\">\n      </el-date-picker>\n    </div>\n  \n     <el-table :data=\"couponPresentList\" style=\"width: 100%\" v-permission=\"'2455e031-2471-40cd-9f76-f5d2026f6127'\">\n      <el-table-column label=\"排名\" prop=\"sortNum\">\n      </el-table-column>\n      <el-table-column prop=\"storeName\" label=\"门店\">\n      </el-table-column>\n      <el-table-column label=\"优惠券使用张数\" prop=\"couponCount\">\n      </el-table-column>\n      <el-table-column label=\"总抵用金额\" prop=\"discountMoney\">\n        <template slot-scope=\"scope\">\n          {{scope.row.discountMoney / 100 + '元'}}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primay\" plain @click=\"jumpTo(scope.row)\" v-permission=\"'b35d87ba-79d4-434a-9eee-7bce76e982c9'\">查看操作</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <div class=\"totalCoupon\" style=\"margin-top: 20px\">\n      <el-table :data=\"couponTotal\" style=\"width: 100%\">\n      <el-table-column label=\"  \">\n        <template slot-scope=\"scope\">\n          总计\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"storeNum\" label=\"门店总数\">\n      </el-table-column>\n      <el-table-column label=\"优惠券使用张数\" prop=\"couponCount\">\n      </el-table-column>\n      <el-table-column label=\"总抵用金额\" prop=\"discountMoney\">\n        <template slot-scope=\"scope\">\n          {{scope.row.discountMoneyTotal / 100 + '元'}}\n        </template>\n      </el-table-column>\n    </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getCouponPresentList, getPresentTotal } from 'api/finance/couponPresent';\n\nimport SubTitle from 'components/SubTitle';\n\nexport default {\n  components: {\n    SubTitle\n  },\n  data() {\n    return {\n      pickerOptions2: {\n        shortcuts: [\n          {\n            text: '本周',\n            onClick(picker) {\n              const end = new Date();\n              const start = new Date();\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\n              picker.$emit('pick', [start, end]);\n            }\n          },\n          {\n            text: '本月',\n            onClick(picker) {\n              const end = new Date();\n              const start = new Date();\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\n              picker.$emit('pick', [start, end]);\n            }\n          },\n          {\n            text: '本年',\n            onClick(picker) {\n              const end = new Date();\n              const start = new Date();\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 365);\n              picker.$emit('pick', [start, end]);\n            }\n          }\n        ]\n      },\n      time: [],\n      couponPresentList: [],\n      couponTotal: []\n    }\n  },\n  watch: {\n    time() {\n      this.fetchPresentList();\n      this.fetchCouponTotal();\n    }\n  },\n  methods: {\n    setDefaultDate() {\n      const end = this.moment().format('YYYY-MM-DD')\n      const start = this.moment(end).add(-30, 'days').format('YYYY-MM-DD')\n      this.time = [start, end];\n    },\n    jumpTo(row) {\n      this.$router.push({path: `/finance/presentDetail?storeId=${row.storeId}`})\n    },\n    fetchPresentList() {\n      getCouponPresentList({\n        page: 1,\n        size: 10,\n        beginTime: this.time[0],\n        endTime: this.time[1]\n      }).then( (res) => {\n        this.couponPresentList = res.data.data.list;\n      })\n    },\n    fetchCouponTotal() {\n      getPresentTotal({\n        beginTime: this.time[0],\n        endTime: this.time[1]\n      }).then( (res) => {\n        // console.log(res);\n        this.couponTotal = [res.data.data]\n      })\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    next( vm => {\n      vm.$nextTick( () => {\n        vm.fetchPresentList();\n        vm.fetchCouponTotal();\n      })\n    })\n  },\n  mounted() {\n    this.$nextTick( () => {\n      this.setDefaultDate();\n      this.fetchPresentList();\n      this.fetchCouponTotal();\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~assets/style/utils';\n\n.couponPresentPage {\n  width: 100%;\n  box-sizing: border-box;\n  padding: 20px;\n}\n\n.date_time_picker {\n  width: 100%;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/finance/couponPresent/Page.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"couponPresentPage\"},[_c('sub-title',{attrs:{\"title\":\"赠送消耗\"}}),_vm._v(\" \"),_c('div',{staticClass:\"date_time_picker\",staticStyle:{\"margin-top\":\"30px\",\"margin-bottom\":\"10px\"}},[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"align\":\"right\",\"unlink-panels\":\"\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"picker-options\":_vm.pickerOptions2,\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.time),callback:function ($$v) {_vm.time=$$v},expression:\"time\"}})],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('2455e031-2471-40cd-9f76-f5d2026f6127'),expression:\"'2455e031-2471-40cd-9f76-f5d2026f6127'\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.couponPresentList}},[_c('el-table-column',{attrs:{\"label\":\"排名\",\"prop\":\"sortNum\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"storeName\",\"label\":\"门店\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"优惠券使用张数\",\"prop\":\"couponCount\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"总抵用金额\",\"prop\":\"discountMoney\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.discountMoney / 100 + '元')+\"\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('b35d87ba-79d4-434a-9eee-7bce76e982c9'),expression:\"'b35d87ba-79d4-434a-9eee-7bce76e982c9'\"}],attrs:{\"type\":\"primay\",\"plain\":\"\"},on:{\"click\":function($event){_vm.jumpTo(scope.row)}}},[_vm._v(\"查看操作\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"totalCoupon\",staticStyle:{\"margin-top\":\"20px\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.couponTotal}},[_c('el-table-column',{attrs:{\"label\":\"  \"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        总计\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"storeNum\",\"label\":\"门店总数\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"优惠券使用张数\",\"prop\":\"couponCount\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"总抵用金额\",\"prop\":\"discountMoney\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.discountMoneyTotal / 100 + '元')+\"\\n      \")]}}])})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4b067ae5\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/finance/couponPresent/Page.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4b067ae5\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Page.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Page.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Page.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4b067ae5\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Page.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4b067ae5\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/finance/couponPresent/Page.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}