webpackJsonp([7],{"81Qk":function(e,t){},WrWB:function(e,t){},fkFz:function(e,t){},kUcn:function(e,t){},peLs:function(e,t){},rdau:function(e,t){},xFnw:function(e,t){},yWHR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),i=a.n(n),r=a("Dd8w"),o=a.n(r),l=a("83G7"),c=a("NYxO"),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sportOrderTop"},[a("div",{staticClass:"wraper"},[a("div",{staticClass:"select"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.input23,callback:function(t){e.input23=t},expression:"input23"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1)]),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"date",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}})],1)],1),e._v(" "),a("div",{staticClass:"paging"},[a("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[100,200,300,400],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:400},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var u=a("VU/8")({methods:{handleSizeChange:function(e){},handleCurrentChange:function(e){}},data:function(){return{currentPage4:4,input23:"",value:"all",options:[{value:"all",label:"全部"}],tableData:[]}}},s,!1,function(e){a("fkFz")},"data-v-c2b5ebdc",null).exports,p=a("JaHG"),m={props:{tableData:{type:Array,default:function(){return[]}}},computed:{datas:function(){var e=Object(p.b)(this.tableData);return e.forEach(function(e,t){e.payChannel=1==e.payChannel?"余额":"",e.consumeType=1==e.consumeType?"预约运动":2==e.consumeType?"商品销售":"",e.orderMoney=(e.orderMoney/100).toFixed(2)+"元",e.discountMoney=(e.discountMoney/100).toFixed(2)+"元",e.payMoney=(e.payMoney/100).toFixed(2)+"元"}),e}},data:function(){return{}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.datas}},[a("el-table-column",{attrs:{prop:"incomeDate",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderSn",label:"单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"门店"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userInfo.nickname",label:"用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"consumeType",label:"消费类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderMoney",label:"发生金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"discountMoney",label:"优惠金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payMoney",label:"实收金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payChannel",label:"支付方式"}})],1)],1)},staticRenderFns:[]};var b=a("VU/8")(m,d,!1,function(e){a("kUcn")},null,null).exports,h={props:{tableData:{type:Array,default:function(){return[]}}},computed:{},data:function(){return{}}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{width:"100%"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:this.tableData,"show-summary":"",center:""}},[t("el-table-column",{attrs:{prop:"storeName",label:"门店"}}),this._v(" "),t("el-table-column",{attrs:{label:"预约运动"}},[t("el-table-column",{attrs:{label:"笔数(笔)",prop:"sportOrder"}}),this._v(" "),t("el-table-column",{attrs:{label:"收入(元)",prop:"sportIncome"}})],1),this._v(" "),t("el-table-column",{attrs:{prop:"date",label:"商品销售"}},[t("el-table-column",{attrs:{label:"笔数(笔)",prop:"goodsOrder"}}),this._v(" "),t("el-table-column",{attrs:{label:"收入(元)",prop:"goodsIncome"}})],1),this._v(" "),t("el-table-column",{attrs:{label:"小计(元)",prop:"totalMoney"}})],1)],1)},staticRenderFns:[]};var v=a("VU/8")(h,f,!1,function(e){a("81Qk")},"data-v-ac5194b2",null).exports,g={props:{tableData:{type:Array,default:function(){return[]}}},computed:o()({},Object(c.e)({incomeList:function(e){return e.income.incomeList},incomeDetailList:function(e){return e.income.incomeDetailList},incomeTotalList:function(e){return e.income.incomeTotalList}}),{detailDatas:function(){return Object(p.b)(this.incomeDetailList)},datas:function(){var e=Object(p.b)(this.incomeTotalList);return e.forEach(function(e,t){e.orderMoney=(e.orderMoney/100).toFixed(2),e.discountMoney=(e.discountMoney/100).toFixed(2),e.payMoney=(e.payMoney/100).toFixed(2)}),e},id:function(){return this.$route.query.account}}),watch:{time:function(){this.fetchIncomDetailList()},value:function(){this.fetchIncomDetailList()}},components:{consumptionType:u,totalTable:b,accountBalanceTab:v},methods:o()({},Object(c.b)(["getIncomeTotalList","getIncomeDetailList"]),{handleSizeChange:function(e){this.curPageSize=e,this.fetchIncomDetailList()},handleCurrentChange:function(e){this.currentPage=e,this.fetchIncomDetailList()},createParams:function(){var e={};return e.page=this.currentPage,e.size=this.curPageSize,this.time.length>0&&(e.beginTime=this.time[0],e.endTime=this.time[1]),this.orderSn&&(e.orderSn=this.orderSn),"all"!==this.value&&(e.consumeType=this.value),e.storeId=this.id,e},fetchIncomDetailList:function(){var e=this;this.getIncomeDetailList(this.createParams()).then(function(t){e.curTotal=t.total,e.currentPage=t.pageNum<1?1:t.pageNum,e.curPageSize=t.pageSize})}}),data:function(){return{value:"all",options:[{value:"all",label:"全部"},{value:"1",label:"预约运动"},{value:"2",label:"商品销售"}],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},time:[],orderSn:"",currentPage:1,pageSizes:[10,20,30,40],curPageSize:10,curTotal:0}},mounted:function(){var e=this;this.$nextTick(function(){e.getIncomeTotalList({storeId:e.id}),e.fetchIncomDetailList()})}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account"},[a("div",{staticClass:"wraper"},[a("div",{staticClass:"title"},[e._v("\n      收入明细\n    ")]),e._v(" "),a("div",{staticClass:"selects"},[a("div",{staticClass:"time"},[e._v("\n        选择时间：\n        "),a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),e._v(" "),a("div",{staticClass:"searchBar",staticStyle:{width:"300px","margin-left":"20px"}},[a("el-input",{attrs:{placeholder:"输入订单号, 按回车搜索","suffix-icon":"el-icon-search"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.fetchIncomDetailList(t)}},model:{value:e.orderSn,callback:function(t){e.orderSn=t},expression:"orderSn"}})],1),e._v(" "),a("div",{staticStyle:{"margin-left":"10px","margin-right":"20px"}},[e._v("\n        消费类型：\n        "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),e._v(" "),a("total-Table",{attrs:{tableData:e.detailDatas}}),e._v(" "),a("div",{staticClass:"paging"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.curPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.curTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),e._v(" "),a("div",{staticClass:"totalData",staticStyle:{"margin-top":"30px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.datas}},[a("el-table-column",{attrs:{prop:"orderTotal",label:"订单总量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"storeTotal",label:"门店(间)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userTotal",label:"用户总量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"consumeType",label:"消费类型(种)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderMoney",label:"累加发生额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"discountMoney",label:"累加优惠额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payMoney",label:"累加实收额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"consumeChannel",label:"支付方式(种)"}})],1)],1)],1)])},staticRenderFns:[]};var _=a("VU/8")(g,y,!1,function(e){a("rdau")},"data-v-609ce502",null).exports,D={methods:{routeCallback:function(){this.$router.push({path:"/finance/income"})}},components:{SubPage:l.a,accountBalance:_},props:{subPageType:{type:String,default:""}},computed:{},data:function(){return{mapSubPage:{account:{mainTitle:"收入",subTitle:"查看详情"}}}}},C={render:function(){var e=this.$createElement,t=this._self._c||e;return t("sub-page",{attrs:{mainTitle:"收入",subTitle:"查看详情",routeCallback:this.routeCallback}},["account"==this.subPageType?t("account-Balance"):this._e()],1)},staticRenderFns:[]};var x=a("VU/8")(D,C,!1,function(e){a("xFnw")},"data-v-4df10f7c",null).exports,T={watch:{$route:function(e,t){}},methods:{indexMethod:function(e){return e+1},getIncome:function(e,t){this.$router.push({path:"/finance/income?account="+t.storeId})},getSummaries:function(e){var t=e.columns,a=e.data,n=[];return t.forEach(function(e,t){if(0!==t){var i=a.map(function(t){return Number(t[e.property])});i.every(function(e){return isNaN(e)})?n[t]="":(n[t]=i.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),n[t]=n[t].toFixed(2))}else n[t]="总价"}),n}},computed:{datas:function(){var e=Object(p.b)(this.tableData);return e.forEach(function(e,t){e.sportIncome=(e.sportIncome/100).toFixed(2),e.goodsIncome=(e.goodsIncome/100).toFixed(2),e.totalMoney=(e.totalMoney/100).toFixed(2)}),e}},props:{tableData:{type:Array,default:function(){return[]}}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.datas,"show-summary":"","summary-method":e.getSummaries}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"排名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"门店"}}),e._v(" "),a("el-table-column",{attrs:{label:"预约运动"}},[a("el-table-column",{attrs:{prop:"sportOrder",label:"笔数(笔)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sportIncome",label:"收入(元)"}})],1),e._v(" "),a("el-table-column",{attrs:{label:"商品销售"}},[a("el-table-column",{attrs:{prop:"goodsOrder",label:"笔数(笔)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsIncome",label:"收入(元)"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"totalMoney",label:"小计(元)"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{directives:[{name:"permission",rawName:"v-permission",value:"43504dc6-9cd7-45c4-8b69-291dcd5753d8",expression:"'43504dc6-9cd7-45c4-8b69-291dcd5753d8'"}],on:{click:function(a){e.getIncome(t.$index,t.row)}}},[e._v("查看明细")])]}}])})],1)],1)},staticRenderFns:[]};var S={components:{incomePage:x,incomeTable:a("VU/8")(T,k,!1,function(e){a("WrWB")},"data-v-05ddae45",null).exports},data:function(){return{pageSizes:[10,20,30,40],curPageSize:10,currentPage:1,curTotal:0,pickerOptions2:{shortcuts:[{text:"本周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"本月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"本年",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31536e6),e.$emit("pick",[a,t])}}]},value3:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],time:[]}},watch:{time:function(){this.fetchData()}},beforeRouteEnter:function(e,t,a){a(function(e){e.$nextTick(function(){e.fetchData()})})},computed:o()({},Object(c.e)({incomeList:function(e){return e.income.incomeList},pageSize:function(e){return e.income.pageSize},pageNum:function(e){return e.income.pageNum},total:function(e){return e.income.total},isFetchingIncomeData:function(e){return e.income.isFetchingIncomeData}}),{routeQuery:function(){return i()(this.$route.query)[0]},isLoadSubPage:function(){return!i()(this.$route.query)[0]}}),methods:o()({},Object(c.b)(["getIncomeList"]),{setDefaultDate:function(){var e=moment().format("YYYY-MM-DD"),t=moment(e).add(-30,"days").format("YYYY-MM-DD");this.time=[t,e]},createParams:function(){var e={};return this.time.length>0&&(e.beginTime=this.time[0]+" 00:00:00",e.endTime=this.time[1]+" 23:59:59"),e.page=this.currentPage,e.size=this.curPageSize,e},getSummaries:function(e){var t=e.columns,a=e.data,n=[];return t.forEach(function(e,t){if(0!==t){var i=a.map(function(t){return Number(t[e.property])});i.every(function(e){return isNaN(e)})?n[t]="N/A":(n[t]=i.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),n[t]+=" 元")}else n[t]="总价"}),n},handleSizeChange:function(e){this.curPageSize=e,this.fetchData()},handleCurrentChange:function(e){this.currentPage=e,this.fetchData()},mapPagination:function(){this.currentPage=this.pageNum,this.curTotal=this.total,this.curPageSize=this.pageSize},fetchData:function(){var e=this;this.getIncomeList(this.createParams()).then(function(){e.mapPagination()})}}),mounted:function(){var e=this;this.$nextTick(function(){e.setDefaultDate(),e.fetchData()})}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isLoadSubPage?a("div",{staticClass:"protalPage"},[a("div",{staticClass:"wraper"},[a("div",{staticClass:"title"},[e._v("\n      收入\n    ")]),e._v(" "),a("div",{staticClass:"time"},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2,"value-format":"yyyy-MM-dd"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isFetchingIncomeData,expression:"isFetchingIncomeData"},{name:"permission",rawName:"v-permission",value:"5cda2f6c-0bb8-48be-a0b9-4ee70bd4100c",expression:"'5cda2f6c-0bb8-48be-a0b9-4ee70bd4100c'"}],staticClass:"incomeTable"},[a("income-table",{attrs:{tableData:e.incomeList}})],1),e._v(" "),a("div",{directives:[{name:"permission",rawName:"v-permission",value:"5cda2f6c-0bb8-48be-a0b9-4ee70bd4100c",expression:"'5cda2f6c-0bb8-48be-a0b9-4ee70bd4100c'"}],staticClass:"paging"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.curPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.curTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])]):a("income-page",{attrs:{subPageType:e.routeQuery}})},staticRenderFns:[]};var w=a("VU/8")(S,z,!1,function(e){a("peLs")},"data-v-59f1a60f",null);t.default=w.exports}});
//# sourceMappingURL=7.ee1a1a0d47ec22edcb86.js.map