webpackJsonp([67],{OfxA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("GgUn"),s={name:"historyBulletin",data:function(){return{currentPage:1,currentSize:10,pageSizes:[10,20,30,40],curTotal:0,storeName:"",storeId:"",bulletins:[]}},computed:{datas:function(){var t=this,e=this.bulletins.concat();return e.forEach(function(e,a){e.createTime=t.moment(e.createTime).format("YYYY-MM-DD HH:mm:ss"),e.time=t.moment(e.startTime).format("YYYY-MM-DD HH:mm:ss")+"至"+t.moment(e.endTime).format("YYYY-MM-DD HH:mm:ss"),e.status=1==e.status?"进行中":2==e.status?"未到期":3==e.status?"已过期":4==e.status?"已终止":""}),e}},watch:{$route:function(){this.setStoreInfo()}},methods:{setStoreInfo:function(){this.storeName=this.$route.query.storeName,this.storeId=this.$route.query.storeId},jumpToAddBulletin:function(){this.$router.push({path:"/storePart/addBulletin"})},fetchData:function(){var t=this;this.isLoading=!0,Object(n.b)(this.createParams()).then(function(e){t.bulletins=e.data.data.list,t.mapPaganition(e.data.data),t.isLoading=!1}).catch(function(){t.isLoading=!1})},createParams:function(){var t={};return t.name=this.storeName,t.storeId=this.storeId,t.page=this.currentPage,t.size=this.currentSize,t},mapPaganition:function(t){this.currentPage=t.pageNum<1?1:t.pageNum,this.currentSize=t.pageSize,this.curTotal=t.total},handleSizeChange:function(t){this.currentSize=t,this.fetchData()},handleCurrentChange:function(t){this.currentPage=t,this.fetchData()}},mounted:function(){var t=this;this.$nextTick(function(){t.setStoreInfo(),t.fetchData()})}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"historyBulletinPage"},[a("div",{staticClass:"title"},[t._v("历史公告")]),t._v(" "),a("div",{staticClass:"storeInfo"},[a("div",{staticClass:"info_item"},[t._v("门店: "+t._s(t.storeName)+" ")]),t._v(" "),a("div",{staticClass:"info_item"},[t._v("ID: "+t._s(t.storeId))]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.jumpToAddBulletin}},[t._v("发布公告")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.datas}},[a("el-table-column",{attrs:{label:"发布时间",prop:"createTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"公告标题",prop:"topic"}}),t._v(" "),a("el-table-column",{attrs:{label:"公告内容",prop:"topicContent"}}),t._v(" "),a("el-table-column",{attrs:{label:"发布人",prop:"adminName"}}),t._v(" "),a("el-table-column",{attrs:{label:"显示时间",prop:"time",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"status"}})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.currentSize,layout:"total, sizes, prev, pager, next, jumper",total:t.curTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("V8vx")},"data-v-012a4838",null);e.default=r.exports},V8vx:function(t,e){}});
//# sourceMappingURL=67.b6aaeb7a78b7be0f3769.js.map