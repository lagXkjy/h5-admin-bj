webpackJsonp([18],{"18JW":function(t,e){},"7ESe":function(t,e){},Pjd2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("fZjL"),r=a.n(i),s=a("Dd8w"),n=a.n(s),l=a("JaHG"),o={props:{tableData:{type:Array,default:function(){return[]}}},methods:{getStranger:function(t,e){this.$router.push({path:"/monitor/stranger?strangerTotal="+e.id})}},computed:{datas:function(){var t=Object(l.b)(this.tableData);return t.forEach(function(t,e){t.dealStatus=1==t.dealStatus?"待处理":2==t.dealStatus?"已处理":"",t.createTime=moment(t.createTime).format("YYYY-MM-DD HH:mm:ss")}),t}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.datas}},[a("el-table-column",{attrs:{prop:"createTime",label:"上报时间",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"门店"}}),t._v(" "),a("el-table-column",{attrs:{prop:"alarmCode",label:"异常代码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"alarmName",label:"类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"alarmDesc",label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dealStatus",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"a3d94429-0305-4318-8e52-5d10cda6b3fb",expression:"'a3d94429-0305-4318-8e52-5d10cda6b3fb'"}],attrs:{type:"primary",plain:""},on:{click:function(a){t.getStranger(e.$index,e.row)}}},[t._v("查看详情")])]}}])})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(o,c,!1,function(t){a("vgD7")},"data-v-2e805f68",null).exports,d=a("83G7"),v=a("woOf"),m=a.n(v),f=a("NYxO"),p=a("tNIP"),_={computed:n()({},Object(f.e)({strangerDetailList:function(t){return t.stranger.strangerDetailList},userInformation:function(t){return t.auth.userInformation}}),{currentDetail:function(){var t=m()({},this.strangerDetailList);return t.createTime=moment(t.createTime).format("YYYY-MM-DD HH:mm:ss"),t.updateTime=moment(t.updateTime).format("YYYY-MM-DD HH:mm:ss"),t.startTime=moment(t.startTime).format("YYYY-MM-DD HH:mm:ss"),t.endTime=moment(t.endTime).format("YYYY-MM-DD HH:mm:ss"),t}}),methods:n()({},Object(f.b)(["getStrangerDetailList"]),{report:function(t){var e=this;if(!this.content)return this.$notify.error("请输入处理备注");Object(p.a)({dealRemark:this.content,dealStatus:2,dealResult:t,operateId:this.userInformation.id,operateType:2,userId:this.currentDetail.userId,id:this.detail.id}).then(function(t){return 200==t.data.code?(e.fetchData(),e.$notify.success("更新申诉状态成功")):e.$notify.error("更新申诉状态失败")}).catch(function(t){return e.$notify.error("更新申诉状态失败")})},fetchData:function(){var t=this;this.getStrangerDetailList({id:this.id}).then(function(){t.detail=m()({},t.strangerDetailList)})}}),data:function(){return{content:"",id:null,detail:{}}},watch:{$route:function(t){this.id=t.query.strangerTotal},id:function(){this.fetchData()}},mounted:function(){var t=this;this.$nextTick(function(){t.id=t.$route.query.strangerTotal,t.fetchData()})}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wraper"},[a("div",{staticClass:"handleStatus"},[t._v("状态:  "+t._s(1==t.currentDetail.dealStatus?"待处理":2==t.currentDetail.dealStatus?"已处理":""))]),t._v(" "),a("div",{staticClass:"detail"},[a("div",{staticClass:"subTitle"},[t._v("\n      基本信息\n    ")]),t._v(" "),a("div",{staticClass:"top"},[a("div",{staticClass:"info_item"},[a("div",{staticClass:"item_subTitle"},[t._v("所属门店")]),t._v(t._s(t.currentDetail.storeName))]),t._v(" "),a("div",{staticClass:"info_item"},[a("div",{staticClass:"item_subTitle"},[t._v("记录时间")]),t._v(t._s(t.currentDetail.createTime))]),t._v(" "),a("div",{staticClass:"info_item"},[a("div",{staticClass:"item_subTitle"},[t._v("异常代码")]),t._v(t._s(t.currentDetail.alarmCode))]),t._v(" "),a("div",{staticClass:"info_item"},[a("div",{staticClass:"item_subTitle"},[t._v("事件类型")]),t._v(t._s(t.currentDetail.alarmName))]),t._v(" "),a("div",{staticClass:"info_item"},[a("div",{staticClass:"item_subTitle"},[t._v("问题描述")]),t._v(t._s(t.currentDetail.alarmDesc))]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"info_item"},[a("div",{staticClass:"item_subTitle"},[t._v("闯入用户")]),t._v(t._s(t.currentDetail.userInfo?t.currentDetail.userInfo.nickname:""))]),t._v(" "),a("div",{staticClass:"info_item"},[a("div",{staticClass:"item_subTitle"},[t._v("用户ID")]),t._v("   "+t._s(t.currentDetail.userId))]),t._v(" "),a("div",{staticClass:"info_item"},[a("div",{staticClass:"item_subTitle"},[t._v("联系电话")]),t._v(t._s(t.currentDetail.userInfo?t.currentDetail.userInfo.mobile:""))]),t._v(" "),a("div",{staticClass:"info_item"},[a("div",{staticClass:"item_subTitle"},[t._v("订单号码")]),t._v(t._s(t.currentDetail.orderSn))]),t._v(" "),a("div",{staticClass:"info_item"},[a("div",{staticClass:"item_subTitle"},[t._v("预约时间")]),t._v(t._s(t.currentDetail.startTime)+"至"+t._s(t.currentDetail.endTime))])]),t._v(" "),a("div",{staticClass:"bottom"},[a("div",{staticClass:"info_item"},[t._v("\n          人脸对比照片：\n        ")]),t._v(" "),a("div",{staticClass:"comparison"},[a("div",{staticClass:"comparison_item new",attrs:{title:"新人脸记录"}},[a("img",{staticClass:"face_img",attrs:{src:t.currentDetail.newFace,alt:""}}),t._v(" "),a("span",{staticStyle:{"text-align":"center",color:"#999999"}},[t._v("新人脸记录")])]),t._v(" "),a("div",{staticClass:"comparison_item ever",attrs:{title:"初始人脸记录"}},[a("img",{staticClass:"face_img",attrs:{src:t.currentDetail.originalFace,alt:""}}),t._v(" "),a("span",{staticStyle:{"text-align":"center",color:"#999999"}},[t._v("初始人脸记录")])])])])]),t._v(" "),0==t.detail.dealResult?a("div",{staticClass:"dealContent"},[t._v("\n    处理备注:\n    "),a("el-input",{attrs:{placeholder:"",disabled:0!=t.detail.dealResult},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1):t._e(),t._v(" "),0==t.detail.dealResult?a("div",{staticClass:"feedbackButtons",staticStyle:{"background-color":"#ffffff",padding:"20px"}},[a("el-button",{attrs:{type:"primary",disabled:1==t.detail.dealResult},on:{click:function(e){t.report(1)}}},[t._v("有效举报")]),t._v(" "),a("el-button",{on:{click:function(e){t.report(2)}}},[t._v("无效举报")])],1):t._e(),t._v(" "),0!=t.detail.dealResult?a("div",{staticClass:"dealResult",staticStyle:{width:"100%","background-color":"#ffffff","box-sizing":"border-box",padding:"20px"}},[a("div",{staticStyle:{"font-size":"18px","font-weight":"600"}},[t._v(t._s(1==t.detail.dealResult?"有效举报":2==t.detail.dealResult?"无效举报":""))]),t._v(" "),a("div",{staticStyle:{"padding-bottom":"20px"}},[t._v("处理备注:  "+t._s(t.detail.dealRemark))]),t._v(" "),a("div",{staticStyle:{color:"#666666","font-size":"10px","border-top":"1px solid #666666"}},[t._v("操作 用户名:admin 时间:"+t._s(t.currentDetail.updateTime))])]):t._e(),t._v(" "),a("div",{staticClass:"tips",style:"color: #666666"},[a("div",[t._v("*说明")]),t._v(" "),a("div",[t._v("有效反馈，系统给予反馈用户相应的信用加分项。")]),t._v(" "),a("div",[t._v("无效反馈，暂无后续操作。")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info_item"},[e("div",{staticClass:"item_subTitle"},[this._v("监控录像")]),this._v("（此功能暂没开通）\n      ")])}]};var h=a("VU/8")(_,g,!1,function(t){a("7ESe")},"data-v-3010beb0",null).exports,b={methods:{routeCallback:function(){this.$router.push({path:"/monitor/stranger"})}},components:{SubPage:d.a,strangerDetail:h},props:{subPageType:{type:String,default:""}},computed:{},data:function(){return{}}},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("sub-page",{attrs:{mainTitle:"陌生人入场",subTitle:"详情",routeCallback:this.routeCallback}},["strangerTotal"==this.subPageType?e("stranger-detail"):this._e()],1)},staticRenderFns:[]};var C={components:{strangerTab:u,strangerPage:a("VU/8")(b,D,!1,function(t){a("wh1C")},"data-v-dc248480",null).exports},watch:{store:function(){this.fetchData()},value:function(){var t=this;this.getStrangerList(this.computeParams()).then(function(){t.mapPagination()})},time:function(t){this.fetchData()}},computed:n()({},Object(f.e)({strangerList:function(t){return t.stranger.strangerList},strangerDetailList:function(t){return t.stranger.strangerDetailList},errorDropdownStoreList:function(t){return t.error.errorDropdownStoreList},pageSize:function(t){return t.stranger.pageSize},pageNum:function(t){return t.stranger.pageNum},total:function(t){return t.stranger.total},strangereIsFetchingData:function(t){return t.stranger.strangereIsFetchingData}}),{storeList:function(){var t=Object(l.b)(this.errorDropdownStoreList);return t.unshift({storeName:"全部门店",id:"all"}),t},routeQuery:function(){return r()(this.$route.query)[0]},isLoadSubPage:function(){return!r()(this.$route.query)[0]}}),methods:n()({},Object(f.b)(["getStrangerList","getStrangerDetailList","getErrorDropDownStoreList"]),{handleSizeChange:function(t){this.curPageSize=t,this.fetchData()},handleCurrentChange:function(t){this.currentPage=t,this.fetchData()},formatter:function(t,e){return t.address},filterTag:function(t,e){return e.tag===t},filterHandler:function(t,e,a){return e[a.property]===t},mapPagination:function(){this.currentPage=this.pageNum,this.curTotal=this.total,this.curPageSize=this.pageSize},computeParams:function(){var t={};return"all"!==this.value&&(t.dealStatus=this.value),"all"!==this.store&&(t.storeId=this.store),this.time.length>0&&(t.beginTime=this.time[0]+" 00:00:00",t.endTime=this.time[1]+" 23:59:59"),t.page=this.currentPage,t.size=this.curPageSize,t},fetchData:function(){var t=this;this.getStrangerList(this.computeParams()).then(function(){t.mapPagination()})}}),beforeRouteEnter:function(t,e,a){a(function(t){t.$nextTick(function(){t.fetchData(),t.getStrangerList({page:1,size:10})})})},data:function(){return{options:[{value:"all",label:"全部"},{value:"1",label:"待处理"},{value:"2",label:"已处理"}],value:"all",store:"all",currentPage:1,pageSizes:[10,20,30,40],curPageSize:10,curTotal:0,value11:"",pickerOptions2:{shortcuts:[{text:"本周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"本月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"本年",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-31536e6),t.$emit("pick",[a,e])}}]},value1:"",value2:"",input21:"",time:[]}},mounted:function(){var t=this;this.$nextTick(function(){t.getStrangerList({page:1,size:10})}),this.getErrorDropDownStoreList(),this.fetchData()}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isLoadSubPage?a("div",{staticClass:"protalPage"},[a("div",{staticClass:"wraper"},[a("div",{staticClass:"title"},[t._v("\n      陌生人闯入记录\n    ")]),t._v(" "),a("div",{staticClass:"sportOrderTop"},[a("div",[t._v("\n        门店：\n        "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.store,callback:function(e){t.store=e},expression:"store"}},t._l(t.storeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.storeName,value:t.id}})}))],1),t._v(" "),a("div",{staticStyle:{"margin-left":"10px","margin-right":"20px"}},[t._v("\n        状态：\n        "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions2,"value-format":"yyyy-MM-dd"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)]),t._v(" "),a("div",{directives:[{name:"permission",rawName:"v-permission",value:"2b89c3d6-0675-4507-8415-357823b95e4a",expression:"'2b89c3d6-0675-4507-8415-357823b95e4a'"}],staticClass:"sportOrderBotom"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.strangereIsFetchingData,expression:"strangereIsFetchingData"}]},[a("stranger-tab",{attrs:{tableData:t.strangerList}})],1),t._v(" "),a("div",{staticClass:"paging"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.curPageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.curTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])]):a("stranger-Page",{attrs:{subPageType:t.routeQuery}})},staticRenderFns:[]};var T=a("VU/8")(C,S,!1,function(t){a("18JW")},"data-v-999846fe",null);e.default=T.exports},vgD7:function(t,e){},wh1C:function(t,e){}});
//# sourceMappingURL=18.19fc98ff1278292f169d.js.map