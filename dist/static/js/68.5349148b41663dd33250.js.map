{"version":3,"sources":["webpack:///./src/api/training/trainingCycle.js","webpack:///src/pages/training/planConfig/trainingCycle/Page.vue","webpack:///./src/pages/training/planConfig/trainingCycle/Page.vue?53ac","webpack:///./src/pages/training/planConfig/trainingCycle/Page.vue"],"names":["updateTrainingCycle","params","axiosClient","post","Page","common","_this","this","label","sort","SubTitle","isLt20M","cycles","_this2","then","res","fetchConfig","_this3","id","fetchCycles","catch","iconUrl","cycleNum","tipText","resetDialog","done","_this4","dialog_tip","dialog_cycle","dialog_id","_this5","list","_this6","item","length","_this7","trainingCycle_Page","render","_vm","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","title","_v","type","on","click","createCycle","isCreate","visible","dialogVisible","width","center","before-close","handleClose","update:visible","$event","staticStyle","placeholder","model","callback","$$v","slot","maxlength","drag","action","actionApi","show-file-list","on-success","successUpload","on-error","failedUpload","before-upload","beforeAvatarUpload","src","confirmUpdate","cyclenumVisible","selectedDays","_l","part","key","border","_s","index","cycleConfig","data","cycleList","prop","scopedSlots","_u","fn","scope","row","max-width","alt","plain","editCycle","removeCycle","trainDay","editConfig","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/68.5349148b41663dd33250.js","sourcesContent":["import { axiosClient } from 'common/axiosClient';\n\n// 获取运动周期列表\nexport function getTrainingCycle(params) {\n  return axiosClient.post('admin/Plan/planCycleList', params);\n}\n\n// 更新运动周期列表\nexport function updateTrainingCycle(params) {\n  return axiosClient.post('admin/Plan/planCycleSave', params);\n}\n\n// 删除运动周期\nexport function removeTrainingCycle(params) {\n  return axiosClient.post('admin/Plan/planCycleDelete', params)\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/training/trainingCycle.js","<template>\n  <div class=\"trainingCycle\">\n    <div class=\"cycle\">\n      <div class=\"cycle_header\" v-permission=\"'2a2c5f3c-ec4c-42e2-a910-0aa1480692c0'\">\n        <sub-title title=\"训练周数\"></sub-title>\n        <el-button type=\"primary\" @click=\"createCycle\" v-permission=\"'66894b94-106b-4d38-bd23-94f051c0b92f'\">新增</el-button>\n      </div>\n      <!-- 设置训练周数列表 -->\n      <el-dialog :title=\"isCreate ? '新增': '编辑'\" :visible.sync=\"dialogVisible\" width=\"50%\" center :before-close=\"handleClose\">\n        <div class=\"dialog_item\">\n          <div class=\"dialog_subtitle\">训练周期</div>\n          <el-input placeholder=\"训练周期\" v-model=\"dialog_cycle\" style=\"width: 250px\">\n            <template slot=\"append\">周</template>\n          </el-input>\n        </div>\n        <div class=\"dialog_item\">\n          <div class=\"dialog_subtitle\">提示文案</div>\n          <el-input placeholder=\"提示文案(30字以内)\" v-model=\"dialog_tip\" style=\"width: 300px\" type=\"textarea\" maxlength=\"30\"></el-input>\n        </div>\n\n        <div class=\"dialog_item uploadFile\">\n          <div class=\"dialog_subtitle\">ICON</div>\n          <el-upload v-loading=\"isUploading\" class=\"upload-demo\" drag :action=\"actionApi\" :show-file-list=\"false\" :on-success=\"successUpload\" :on-error=\"failedUpload\" :before-upload=\"beforeAvatarUpload\">\n            <img v-if=\"iconUrl\" :src=\"iconUrl\" class=\"avatar\">\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n        </div>\n\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"confirmUpdate\">确 定</el-button>\n        </span>\n      </el-dialog>\n      <!-- 每周训练日数 -->\n      <el-dialog title=\"设置\" :visible.sync=\"cyclenumVisible\" width=\"50%\" center>\n        <div class=\"dialog_item\">\n          <div class=\"dialog_subtitle\">每周训练日</div>\n          <el-checkbox-group v-model=\"selectedDays\">\n            <el-checkbox v-for=\"part in weekDays\" :label=\"part.value\" :key=\"part.value\" border>{{part.label}}</el-checkbox>\n          </el-checkbox-group>\n        </div>\n          <div>最少运动{{selectedDays.length}}天;已选:\n            <span v-for=\"(item, index) in selectedValues\" :key=\"index\">{{item}};</span>\n          </div>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"cyclenumVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"cycleConfig\">确 定</el-button>\n        </span>\n      </el-dialog>\n\n      <el-table :data=\"cycleList\" style=\"width: 100%\" v-permission=\"'c4dfa1b5-d128-4ada-b0e9-45134cd03713'\">\n        <el-table-column label=\"ID\" prop=\"id\">\n        </el-table-column>\n        <el-table-column label=\"周数选择\" prop=\"cycleNum\">\n          <template slot-scope=\"scope\">\n            {{scope.row.cycleNum}}周\n          </template>\n        </el-table-column>\n        <el-table-column label=\"提示文案\" prop=\"tipText\">\n        </el-table-column>\n        <el-table-column label=\"ICON\" prop=\"iconUrl\">\n          <template slot-scope=\"scope\">\n            <img :src=\"scope.row.iconUrl\" alt=\"\" style=\"max-width: 100px\">\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" prop=\"time\" width=\"300\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"primary\" @click=\"editCycle(scope.row)\" plain v-permission=\"'77767639-9c70-46bb-b22a-178a5d449518'\">编辑</el-button>\n            <el-button type=\"danger\" @click=\"removeCycle(scope.row)\" plain v-permission=\"'93f4662c-a409-4182-ac16-9ff495d35792'\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n\n    <div class=\"cycle_days\" v-permission=\"'bb98f2d0-26c2-49e1-909c-a145186b3f86'\">\n      <sub-title title=\"每周训练日数\"></sub-title>\n      <div class=\"least_days\">每周训练日: 最少{{trainDay}}天\n        <a class=\"hyperlink\" @click=\"editConfig\" v-permission=\"'e3021ead-8b2c-4b19-991b-52ae14f77eda'\">设置</a>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SubTitle from 'components/SubTitle';\n\nimport {\n  getTrainingCycle,\n  updateTrainingCycle,\n  removeTrainingCycle\n} from 'api/training/trainingCycle';\n\nimport {\n  getTrainingConfig,\n  updateTrainingConfig\n} from 'api/training/trainingConfig';\n\nimport { uploadFileApi } from 'common/common';\n\nexport default {\n  data() {\n    return {\n      actionApi: uploadFileApi,\n      isUploading: false,\n      leastDays: 3,\n      cycleList: [],\n      isCreate: false,\n      cyclenumVisible: false,\n      dialogVisible: false,\n      dialog_cycle: 0,\n      dialog_tip: '',\n      dialog_id: 0,\n      iconUrl: '',\n      trainDay: '',\n      cycles: [],\n      selectedDays: [],\n      weekDays: [\n        {\n          value: 1,\n          label: '周一'\n        },\n        {\n          value: 2,\n          label: '周二'\n        },\n        {\n          value: 3,\n          label: '周三'\n        },\n        {\n          value: 4,\n          label: '周四'\n        },\n        {\n          value: 5,\n          label: '周五'\n        },\n        {\n          value: 6,\n          label: '周六'\n        },\n        {\n          value: 0,\n          label: '周日'\n        }\n      ]\n    };\n  },\n  watch: {\n    \n  },\n  computed: {\n    selectedValues() {\n      let values = [];\n      this.selectedDays.forEach(selectedItem => {\n        this.weekDays.forEach(week => {\n          if (week.value == selectedItem) {\n            values.push(week.label);\n          }\n        });\n      });\n      \n      return values.sort();\n    }\n  },\n  components: {\n    SubTitle\n  },\n  methods: {\n    beforeAvatarUpload(file) {\n      this.isUploading = true;\n      const isMP4 = file.type === 'image/png' || file.type === 'image/jpeg';\n      const isLt20M = file.size / 1024 / 1024 < 1;\n\n      if (!isMP4) {\n        this.$notify.error('上传ICON只能是 JPG/PNG 格式!');\n        this.isUploading = false;\n      }\n      if (!isLt20M) {\n        this.$notify.error('上传ICON大小不能超过 1MB!');\n        this.isUploading = false;\n      }\n      return isMP4 && isLt20M;\n    },\n    successUpload(response, file, filelist) {\n      this.iconUrl = response.data['oss-request-url'];\n      this.isUploading = false;\n    },\n    failedUpload(err, file, filelist) {\n      this.$notify.error('文件上传失败, 请重新上传');\n      this.isUploading = false;\n    },\n    editConfig() {\n      this.selectedDays = this.cycles;\n      this.cyclenumVisible = true;\n    },\n    cycleConfig() {\n      if (this.selectedDays.length < 3) {\n        return this.$notify.warning('最少选择三天');\n      }\n      this.cyclenumVisible = false;\n      updateTrainingConfig({\n        confType: 'trainDay',\n        confValue: this.selectedDays.join(',')\n      }).then(res => {\n        if (res.data.code == 200) {\n          this.$notify.success('修改配置成功');\n          this.fetchConfig();\n          return;\n        } else {\n          this.$notify.error('修改配置失败');\n        }\n      }).catch( () => {\n        this.$notify.error('修改配置失败');\n      })\n    },\n    removeCycle(row) {\n      if (confirm('确认要删除吗')) {\n        removeTrainingCycle({\n          id: row.id\n        })\n          .then(res => {\n            if (res.data.code == 200) {\n              this.$notify.success('删除成功');\n              this.fetchCycles();\n            } else {\n              this.$notify.error('删除失败');\n            }\n          })\n          .catch(() => {\n            this.$notify.error('删除失败');\n          });\n      }\n    },\n    resetDialog() {\n      this.dialog_cycle = 0;\n      this.dialog_tip = '';\n      this.isCreate = false;\n    },\n    createCycle() {\n      this.isCreate = true;\n      this.dialog_id = null;\n      this.dialog_cycle = '';\n      this.dialog_tip = '';\n      this.iconUrl = '';\n      this.dialogVisible = true;\n    },\n    editCycle(row) {\n      this.isCreate = false;\n      this.iconUrl = row.iconUrl;\n      this.dialog_cycle = row.cycleNum;\n      this.dialog_tip = row.tipText;\n      this.dialog_id = row.id;\n      this.dialogVisible = true;\n    },\n    handleClose(done) {\n      this.resetDialog();\n      done();\n    },\n    confirmUpdate() {\n      this.dialogVisible = false;\n      if (this.isCreate) {\n        updateTrainingCycle({\n          tipText: this.dialog_tip,\n          cycleNum: this.dialog_cycle,\n          iconUrl: this.iconUrl,\n        })\n          .then(res => {\n            if (res.data.code == 200) {\n              this.$notify.success('创建成功');\n              this.fetchCycles();\n              return;\n            } else {\n              this.$notify.error('创建失败');\n            }\n          })\n          .catch(() => {\n            this.$notify.error('创建失败');\n          });\n      } else {\n        updateTrainingCycle({\n          id: this.dialog_id,\n          tipText: this.dialog_tip,\n          cycleNum: this.dialog_cycle,\n          iconUrl: this.iconUrl,\n        })\n          .then(res => {\n            if (res.data.code == 200) {\n              this.$notify.success('编辑成功');\n              this.fetchCycles();\n              return;\n            } else {\n              this.$notify.error('编辑失败');\n            }\n          })\n          .catch(() => {\n            this.$notify.error('编辑失败');\n          });\n      }\n    },\n    fetchCycles() {\n      getTrainingCycle().then(res => {\n        this.cycleList = res.data.data.list;\n      });\n    },\n    fetchConfig() {\n      getTrainingConfig({\n        confType: 'trainDay'\n      }).then(res => {\n        this.cycles = res.data.data.confValue.split(',').map((item) => Number(item))\n        this.trainDay = this.cycles.length;\n      });\n    }\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.fetchConfig();\n      this.fetchCycles();\n    });\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~assets/style/utils';\n\n.cycle {\n  box-sizing: border-box;\n  padding: 20px;\n  border: 1px solid #e5e5e5;\n}\n.cycle_header {\n  @include flexbox;\n  @include justify-content(space-between);\n  @include align-items(center);\n  margin: {\n    bottom: 20px;\n  }\n}\n.cycle_days {\n  box-sizing: border-box;\n  padding: 20px;\n  border: 1px solid #e5e5e5;\n  margin: {\n    top: 20px;\n  }\n  .least_days {\n    background-color: #e5e5e5;\n    margin: {\n      top: 20px;\n    }\n    padding: {\n      top: 25px;\n      bottom: 25px;\n      left: 10px;\n      right: 10px;\n    }\n  }\n}\n.avatar-uploader .el-upload {\n  width: 100%;\n  height: 100%;\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n.dialog_item {\n  @include flexbox;\n  @include align-items(center);\n  margin: {\n    top: 10px;\n    bottom: 10px;\n  }\n}\n.dialog_subtitle {\n  width: 100px;\n}\n</style>\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/pages/training/planConfig/trainingCycle/Page.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"trainingCycle\"},[_c('div',{staticClass:\"cycle\"},[_c('div',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('2a2c5f3c-ec4c-42e2-a910-0aa1480692c0'),expression:\"'2a2c5f3c-ec4c-42e2-a910-0aa1480692c0'\"}],staticClass:\"cycle_header\"},[_c('sub-title',{attrs:{\"title\":\"训练周数\"}}),_vm._v(\" \"),_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('66894b94-106b-4d38-bd23-94f051c0b92f'),expression:\"'66894b94-106b-4d38-bd23-94f051c0b92f'\"}],attrs:{\"type\":\"primary\"},on:{\"click\":_vm.createCycle}},[_vm._v(\"新增\")])],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.isCreate ? '新增': '编辑',\"visible\":_vm.dialogVisible,\"width\":\"50%\",\"center\":\"\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"dialog_item\"},[_c('div',{staticClass:\"dialog_subtitle\"},[_vm._v(\"训练周期\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"250px\"},attrs:{\"placeholder\":\"训练周期\"},model:{value:(_vm.dialog_cycle),callback:function ($$v) {_vm.dialog_cycle=$$v},expression:\"dialog_cycle\"}},[_c('template',{slot:\"append\"},[_vm._v(\"周\")])],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog_item\"},[_c('div',{staticClass:\"dialog_subtitle\"},[_vm._v(\"提示文案\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"300px\"},attrs:{\"placeholder\":\"提示文案(30字以内)\",\"type\":\"textarea\",\"maxlength\":\"30\"},model:{value:(_vm.dialog_tip),callback:function ($$v) {_vm.dialog_tip=$$v},expression:\"dialog_tip\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog_item uploadFile\"},[_c('div',{staticClass:\"dialog_subtitle\"},[_vm._v(\"ICON\")]),_vm._v(\" \"),_c('el-upload',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isUploading),expression:\"isUploading\"}],staticClass:\"upload-demo\",attrs:{\"drag\":\"\",\"action\":_vm.actionApi,\"show-file-list\":false,\"on-success\":_vm.successUpload,\"on-error\":_vm.failedUpload,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.iconUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.iconUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmUpdate}},[_vm._v(\"确 定\")])],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"设置\",\"visible\":_vm.cyclenumVisible,\"width\":\"50%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.cyclenumVisible=$event}}},[_c('div',{staticClass:\"dialog_item\"},[_c('div',{staticClass:\"dialog_subtitle\"},[_vm._v(\"每周训练日\")]),_vm._v(\" \"),_c('el-checkbox-group',{model:{value:(_vm.selectedDays),callback:function ($$v) {_vm.selectedDays=$$v},expression:\"selectedDays\"}},_vm._l((_vm.weekDays),function(part){return _c('el-checkbox',{key:part.value,attrs:{\"label\":part.value,\"border\":\"\"}},[_vm._v(_vm._s(part.label))])}))],1),_vm._v(\" \"),_c('div',[_vm._v(\"最少运动\"+_vm._s(_vm.selectedDays.length)+\"天;已选:\\n          \"),_vm._l((_vm.selectedValues),function(item,index){return _c('span',{key:index},[_vm._v(_vm._s(item)+\";\")])})],2),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.cyclenumVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.cycleConfig}},[_vm._v(\"确 定\")])],1)]),_vm._v(\" \"),_c('el-table',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('c4dfa1b5-d128-4ada-b0e9-45134cd03713'),expression:\"'c4dfa1b5-d128-4ada-b0e9-45134cd03713'\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.cycleList}},[_c('el-table-column',{attrs:{\"label\":\"ID\",\"prop\":\"id\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"周数选择\",\"prop\":\"cycleNum\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n          \"+_vm._s(scope.row.cycleNum)+\"周\\n        \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"提示文案\",\"prop\":\"tipText\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"ICON\",\"prop\":\"iconUrl\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{staticStyle:{\"max-width\":\"100px\"},attrs:{\"src\":scope.row.iconUrl,\"alt\":\"\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"prop\":\"time\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('77767639-9c70-46bb-b22a-178a5d449518'),expression:\"'77767639-9c70-46bb-b22a-178a5d449518'\"}],attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.editCycle(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('93f4662c-a409-4182-ac16-9ff495d35792'),expression:\"'93f4662c-a409-4182-ac16-9ff495d35792'\"}],attrs:{\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":function($event){_vm.removeCycle(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_vm._v(\" \"),_c('div',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('bb98f2d0-26c2-49e1-909c-a145186b3f86'),expression:\"'bb98f2d0-26c2-49e1-909c-a145186b3f86'\"}],staticClass:\"cycle_days\"},[_c('sub-title',{attrs:{\"title\":\"每周训练日数\"}}),_vm._v(\" \"),_c('div',{staticClass:\"least_days\"},[_vm._v(\"每周训练日: 最少\"+_vm._s(_vm.trainDay)+\"天\\n      \"),_c('a',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('e3021ead-8b2c-4b19-991b-52ae14f77eda'),expression:\"'e3021ead-8b2c-4b19-991b-52ae14f77eda'\"}],staticClass:\"hyperlink\",on:{\"click\":_vm.editConfig}},[_vm._v(\"设置\")])])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0009149c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/training/planConfig/trainingCycle/Page.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0009149c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Page.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Page.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Page.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0009149c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Page.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0009149c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/training/planConfig/trainingCycle/Page.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}