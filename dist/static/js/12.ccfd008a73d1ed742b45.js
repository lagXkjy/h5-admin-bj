webpackJsonp([12],{Cc0N:function(e,t){},UR2W:function(e,t){},iHGG:function(e,t){},jFiR:function(e,t){},rfEM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),r=a.n(n),i=a("Dd8w"),c=a.n(i),s=a("NYxO"),l=a("JaHG"),o={props:{tableData:{type:Array,default:function(){return[]}}},methods:{shopRouter:function(e,t){var a="支付宝"===t.channelType?1:"微信"===t.channelType?2:"";this.$router.push({path:"/finance/recharge?rechargeDetail="+a})}},computed:{id:function(){return this.$route.query.shopTab},datas:function(){var e=Object(l.b)(this.tableData);return e.forEach(function(e,t){e.rechargeMoneyTotal=(e.rechargeMoneyTotal/100).toFixed(2),e.channelType=1==e.channelType?"支付宝":2==e.channelType?"微信":""}),e}},mounted:function(){}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table",staticStyle:{width:"100%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.datas,align:"center","show-summary":""}},[a("el-table-column",{attrs:{prop:"channelType",label:"充值方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rechargeUserTotal",label:"充值用户数(个)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rechargeTotal",label:"充值笔数（笔）"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rechargeMoneyTotal",label:"充值总额（元）"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{directives:[{name:"permission",rawName:"v-permission",value:"f45e8cc4-97ef-4cd3-8ef6-50715e236ed6",expression:"'f45e8cc4-97ef-4cd3-8ef6-50715e236ed6'"}],on:{click:function(a){e.shopRouter(t.$index,t.row)}}},[e._v("查看明细")])]}}])})],1)],1)},staticRenderFns:[]};var h=a("VU/8")(o,u,!1,function(e){a("UR2W")},"data-v-21328cee",null).exports,p=a("83G7"),f={props:{tableData:{type:Array,default:function(){return[]}}},computed:{datas:function(){var e=Object(l.b)(this.tableData);return e.forEach(function(e,t){e.createTime=moment(e.createTime).format("YYYY-MM-DD HH:mm:ss"),e.username=e.userInfo.nickname,e.rechargeChannel=1==e.rechargeChannel?"支付宝":2==e.rechargeChannel?"微信":"",e.rechargeMoney=(e.rechargeMoney/100).toFixed(2)}),e}},data:function(){return{}},mounted:function(){this.$nextTick(function(){})}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"detailTab"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:this.datas}},[t("el-table-column",{attrs:{prop:"createTime",label:"日期"}}),this._v(" "),t("el-table-column",{attrs:{prop:"recordSn",label:"单号"}}),this._v(" "),t("el-table-column",{attrs:{prop:"username",label:"用户"}}),this._v(" "),t("el-table-column",{attrs:{prop:"rechargeMoney",label:"充值金额"}}),this._v(" "),t("el-table-column",{attrs:{prop:"rechargeChannel",label:"支付方式"}})],1)],1)])},staticRenderFns:[]};var m={components:{detailTable:a("VU/8")(f,g,!1,function(e){a("jFiR")},"data-v-68d5f366",null).exports},computed:c()({},Object(s.e)({rechargeDetailList:function(e){return e.recharge.rechargeDetailList},rechargeTotal:function(e){return e.recharge.rechargeTotal},isFetchingRechargeDetailData:function(e){return e.recharge.isFetchingRechargeDetailData},pageSize:function(e){return e.recharge.pageSize},pageNum:function(e){return e.recharge.pageNum},total:function(e){return e.recharge.total}})),data:function(){return{rechargeChannel:2,pageSizes:[10,20,30,40],curPageSize:10,currentPage:1,curTotal:1,payWayOptions:[{value:"all",label:"全部"},{value:"1",label:"支付宝"},{value:"2",label:"微信"}],payWay:"all",input21:"",pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31536e6),e.$emit("pick",[a,t])}}]},time:[]}},watch:{time:function(){this.fetchDetailData(),this.fetchData()},payWay:function(){this.fetchDetailData()}},methods:c()({},Object(s.b)(["getRechargeDetailList","getRechargeList"]),{handleSizeChange:function(e){this.curPageSize=e,this.fetchDetailData()},handleCurrentChange:function(e){this.currentPage=e,this.fetchDetailData()},mapPagination:function(){this.currentPage=this.pageNum,this.curTotal=this.total,this.curPageSize=this.pageSize},setDefaultDate:function(){var e=moment().format("YYYY-MM-DD"),t=moment(e).add(-30,"days").format("YYYY-MM-DD");this.time=[t,e]},createParams:function(){var e={};return this.time.length>0&&(e.beginTime=this.time[0]+" 00:00:00",e.endTime=this.time[1]+" 23:59:59"),"all"!==this.payWay&&(e.rechargeChannel=this.payWay),e.rechargeType=2,e.page=this.currentPage,e.size=this.curPageSize,e},createParams1:function(){var e={};return this.time.length>0&&(e.beginTime=this.time[0]+" 00:00:00",e.endTime=this.time[1]+" 23:59:59"),e},fetchData:function(){this.getRechargeList(this.createParams1()).then(function(){})},fetchDetailData:function(){var e=this;this.getRechargeDetailList(this.createParams()).then(function(){e.mapPagination()})}}),mounted:function(){var e=this;this.$nextTick(function(){e.payWay=e.$route.query.rechargeDetail,e.setDefaultDate(),e.fetchDetailData()})}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shopTab"},[a("div",{staticClass:"wraper"},[a("div",{staticClass:"title"},[e._v("\n      充值明细\n    ")]),e._v(" "),a("div",{staticClass:"orderTop"},[a("div",[e._v("\n        支付方式：\n        "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.payWay,callback:function(t){e.payWay=t},expression:"payWay"}},e._l(e.payWayOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",[e._v("\n        日期：\n        "),a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2,"value-format":"yyyy-MM-dd"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isFetchingRechargeDetailData,expression:"isFetchingRechargeDetailData"}],staticClass:"rechargeDetailTable"},[a("detail-table",{attrs:{tableData:e.rechargeDetailList}})],1),e._v(" "),a("div",{staticClass:"paging"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:e.curTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rechargeTotal,align:"center"}},[a("el-table-column",{attrs:{label:"起止时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.time[0]+"至"+e.time[1])+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalType",label:"充值方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalTimes",label:"充值总笔数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalUser",label:"用户总量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalMoney",label:"累加充值额"}})],1)],1)])},staticRenderFns:[]};var v=a("VU/8")(m,d,!1,function(e){a("sVA9")},"data-v-58fd5cb2",null).exports,b={methods:{routeCallback:function(){this.$router.push({path:"/finance/recharge"})}},components:{SubPage:p.a,RechargeDetail:v},props:{subPageInfo:{type:String,default:""}},computed:{subPageType:function(){return this.subPageInfo.split("=")[0]},ID:function(){return this.subPageInfo.split("=")[1]}},data:function(){return{}}},D={render:function(){var e=this.$createElement,t=this._self._c||e;return t("sub-page",{attrs:{mainTitle:"充值汇总",subTitle:"充值明细",routeCallback:this.routeCallback}},["rechargeDetail"==this.subPageType?t("recharge-detail"):this._e()],1)},staticRenderFns:[]};var y={watch:{time:function(){this.fetchData()}},components:{rechargeTable:h,RechargeSubPage:a("VU/8")(b,D,!1,function(e){a("iHGG")},"data-v-fffcd8c8",null).exports},props:{tableData:{type:Array,default:function(){return[]}}},computed:c()({},Object(s.e)({rechargeList:function(e){return e.recharge.rechargeList},rechargeDetailList:function(e){return e.recharge.rechargeDetailList},isFetchingRechargeData:function(e){return e.recharge.isFetchingRechargeData}}),{routeQuery:function(){return r()(this.$route.query)[0]},isLoadSubPage:function(){return!r()(this.$route.query)[0]}}),beforeRouteEnter:function(e,t,a){a(function(e){e.$nextTick(function(){e.fetchData()})})},methods:c()({},Object(s.b)(["getRechargeList","getRechargeDetailList"]),{getSummaries:function(e){var t=e.columns,a=e.data,n=[];return t.forEach(function(e,t){if(0!==t){var r=a.map(function(t){return Number(t[e.property])});r.every(function(e){return isNaN(e)})?n[t]="N/A":(n[t]=r.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),n[t]+=" 元")}else n[t]="总价"}),n},setDefaultDate:function(){var e=moment().format("YYYY-MM-DD"),t=moment(e).add(-30,"days").format("YYYY-MM-DD");this.time=[t,e]},createParams:function(){var e={};return this.time.length>0&&(e.beginTime=this.time[0]+" 00:00:00",e.endTime=this.time[1]+" 23:59:59"),e},fetchData:function(){this.getRechargeList(this.createParams()).then(function(){})}}),data:function(){return{pickerOptions2:{shortcuts:[{text:"本周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"本月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"本年",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31536e6),e.$emit("pick",[a,t])}}]},value3:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],time:[]}},mounted:function(){var e=this;this.$nextTick(function(){e.setDefaultDate(),e.fetchData()})}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isLoadSubPage?a("div",{staticClass:"protalPage"},[a("div",{staticClass:"wraper"},[a("div",{staticClass:"title"},[e._v("\n      充值\n    ")]),e._v(" "),a("div",{staticClass:"time"},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2,"value-format":"yyyy-MM-dd"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isFetchingRechargeData,expression:"isFetchingRechargeData"},{name:"permission",rawName:"v-permission",value:"b30b928e-fdc1-4a2a-8f87-7dcf7497dddb",expression:"'b30b928e-fdc1-4a2a-8f87-7dcf7497dddb'"}],staticClass:"table"},[a("recharge-table",{attrs:{tableData:e.rechargeList}})],1)])]):a("recharge-sub-page",{attrs:{subPageInfo:e.routeQuery}})},staticRenderFns:[]};var _=a("VU/8")(y,T,!1,function(e){a("Cc0N")},"data-v-67313180",null);t.default=_.exports},sVA9:function(e,t){}});
//# sourceMappingURL=12.ccfd008a73d1ed742b45.js.map