webpackJsonp([15],{AiL4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("MICi"),n=a.n(s),i={props:{tableData:{type:Array,default:function(){return[]}}},computed:{datas:function(){var t=this,e=this.tableData.concat();return e.forEach(function(e,a){e.time=t.moment(e.startTime).format("YYYY-MM-DD HH:mm:ss")+"至"+t.moment(e.endTime).format("YYYY-MM-DD HH:mm:ss"),e.status=1==e.status?"进行中":2==e.status?"未到期":3==e.status?"已过期":4==e.status?"已终止":""}),e}},methods:{checkoutHistory:function(t){this.$router.push({path:"/storePart/historyBulletin?storeId="+t.storeId+"&storeName="+t.storeName})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.datas}},[a("el-table-column",{attrs:{label:"门店ID",prop:"storeId"}}),t._v(" "),a("el-table-column",{attrs:{label:"门店名称",prop:"storeName"}}),t._v(" "),a("el-table-column",{attrs:{label:"公告标题",prop:"topic"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"ellipsis"},[t._v(t._s(e.row.topic))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"公告内容",prop:"topicContent"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"ellipsis"},[t._v(t._s(e.row.topicContent))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发布人",prop:"adminName"}}),t._v(" "),a("el-table-column",{attrs:{label:"有效期",prop:"time",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"status"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"9e93064d-26f4-4038-97b1-f4312653f8d3",expression:"'9e93064d-26f4-4038-97b1-f4312653f8d3'"}],on:{click:function(a){t.checkoutHistory(e.row)}}},[t._v("历史公告")])]}}])})],1)},staticRenderFns:[]};var o=a("VU/8")(i,r,!1,function(t){a("jeiy")},"data-v-00ac5588",null).exports,l=a("GgUn"),c={data:function(){return{currentPage:1,currentSize:10,curTotal:0,isLoading:!1,storeName:"",storeId:"",bulletins:[]}},components:{StoreBulletinTable:o},methods:{handleSizeChange:function(t){this.currentSize=t,this.fetchData()},handleCurrentChange:function(t){this.currentPage=t,this.fetchData()},mapPagination:function(t){this.currentSize=t.pageSize,this.currentPage=t.pageNum<1?1:t.pageNum,this.curTotal=t.total},fetchData:function(){var t=this;this.storeId.trim()&&n()(Number(this.storeId))?this.$notify.error("请输入正常的门店id"):(this.isLoading=!0,Object(l.b)(this.createParams()).then(function(e){t.bulletins=e.data.data.list,t.mapPagination(e.data.data),t.isLoading=!1}).catch(function(){t.isLoading=!1}))},createParams:function(){var t={};return this.storeName&&(t.name=this.storeName),this.storeId.trim()&&(t.storeId=this.storeId.trim()),t.isLatest=1,t.page=this.currentPage,t.size=this.currentSize,t},addBulletin:function(){this.$router.push({path:"/storePart/addBulletin"})}},mounted:function(){var t=this;this.$nextTick(function(){t.fetchData()})},beforeRouteEnter:function(t,e,a){a(function(t){t.$nextTick(function(){t.fetchData()})})}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"protalPage"},[a("div",{staticClass:"storeBulletinPage"},[a("div",{staticClass:"title"},[t._v("\n      门店公告\n    ")]),t._v(" "),a("div",{staticClass:"selecters"},[a("div",{staticClass:"searchBar"},[a("el-input",{attrs:{placeholder:"门店名称"},model:{value:t.storeName,callback:function(e){t.storeName=e},expression:"storeName"}})],1),t._v(" "),a("div",{staticClass:"searchBar"},[a("el-input",{attrs:{placeholder:"门店ID"},model:{value:t.storeId,callback:function(e){t.storeId=e},expression:"storeId"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.fetchData}},[t._v("搜索")]),t._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"0f72e95d-382e-4577-8afb-d375275a7d79",expression:"'0f72e95d-382e-4577-8afb-d375275a7d79'"}],attrs:{type:"primary"},on:{click:t.addBulletin}},[t._v("发布公告")])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"},{name:"permission",rawName:"v-permission",value:"ed1388d5-174a-4b93-8c94-c7fba874dfaf",expression:"'ed1388d5-174a-4b93-8c94-c7fba874dfaf'"}],staticClass:"tableBox"},[a("store-bulletin-table",{attrs:{tableData:t.bulletins}}),t._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.currentSize,layout:"total, sizes, prev, pager, next, jumper",total:t.curTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])])},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("rpm0")},"data-v-67529c1e",null);e.default=d.exports},K4R9:function(t,e,a){a("NA/8"),t.exports=a("FeBl").Number.isNaN},MICi:function(t,e,a){t.exports={default:a("K4R9"),__esModule:!0}},"NA/8":function(t,e,a){var s=a("kM2E");s(s.S,"Number",{isNaN:function(t){return t!=t}})},jeiy:function(t,e){},rpm0:function(t,e){}});
//# sourceMappingURL=15.3ac971c34a4a301f882f.js.map