webpackJsonp([51],{QKRs:function(t,e){},n0b8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),o=a.n(n),u=a("NYxO"),i=a("JaHG"),c=(a("hq7A"),{components:{SubTitle:a("0LZo").a},data:function(){return{couponName:"",couponId:"",currentPage4:1,pageSizes:[10,20,30,40],curPageSize:10,curTotal:0,time:"",deviceStatus:"已绑设备",input:"",totalCoupon:0,options:[{value:"all",label:"全部"},{value:2,label:"待使用"},{value:3,label:"已使用"},{value:6,label:"已过期"}],value:"all"}},watch:{value:function(){this.fetchData()}},computed:o()({},Object(u.e)({couponList:function(t){return t.coupon.couponList},isFetchingData:function(t){return t.coupon.isFetchingData},pageSize:function(t){return t.coupon.pageSize},pageNum:function(t){return t.coupon.pageNum},total:function(t){return t.coupon.total}}),{datas:function(){var t=this,e=Object(i.b)(this.couponList);return e.forEach(function(e,a){e.time=moment(e.useTimeStart).format("YYYY-MM-DD HH:mm:ss")+"至"+moment(e.useTimeEnd).format("YYYY-MM-DD HH:mm:ss"),e.username=e.userInfo.nickname,e.couponStatus=t.mapCouponStatus(e.couponStatus),e.useTime=moment(e.createTime).format("YYYY-MM-DD HH:mm:ss")}),e}}),methods:o()({},Object(u.b)(["getCouponList"]),{checkoutDetail:function(t){this.$router.push({path:"/operation/couponDetail?id="+t.id+"&couponName="+t.couponTag+"&type="+t.couponType+"&hour="+t.couponHour})},handleSizeChange:function(t){this.curPageSize=t,this.fetchData()},handleCurrentChange:function(t){this.currentPage4=t,this.fetchData()},createParams:function(){var t={};return t.page=this.currentPage4,t.size=this.curPageSize,this.couponName&&(t.couponTitle=this.couponName),this.couponId&&(t.id=this.couponId),"all"!==this.value&&(t.couponStatus=this.value),t},mapPagination:function(){this.currentPage4=this.pageNum,this.curTotal=this.total,this.curPageSize=this.pageSize},mapCouponStatus:function(t){return 1==t?"未领取":2==t?"待使用":3==t?"已使用":4==t?"已删除":5==t?"冻结":6==t?"已过期":void 0},fetchData:function(){var t=this;this.getCouponList(this.createParams()).then(function(){t.mapPagination()})}}),beforeRouteEnter:function(t,e,a){a(function(t){t.$nextTick(function(){})})},mounted:function(){this.$nextTick(function(){})}}),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"protalPage"},[a("div",{staticClass:"couponPage"},[a("sub-title",{attrs:{title:"优惠券列表"}}),t._v(" "),a("div",{staticClass:"selects"},[a("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"搜索优惠券名称"},model:{value:t.couponName,callback:function(e){t.couponName=e},expression:"couponName"}}),t._v(" "),a("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"搜索优惠券ID"},model:{value:t.couponId,callback:function(e){t.couponId=e},expression:"couponId"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.fetchData}},[t._v("搜索")])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isFetchingData,expression:"isFetchingData"},{name:"permission",rawName:"v-permission",value:"997fe68c-35b3-4478-96c1-8fb67c014174",expression:"'997fe68c-35b3-4478-96c1-8fb67c014174'"}],staticClass:"couponList"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:[]}},[a("el-table-column",{attrs:{label:"券ID",prop:"id"}}),t._v(" "),a("el-table-column",{attrs:{label:"优惠券名称",prop:"couponTag"}}),t._v(" "),a("el-table-column",{attrs:{label:"优惠券类型",prop:"couponType"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(1==e.row.couponType?"现金优惠券":2==e.row.couponType?"折扣优惠券":3==e.row.couponType?"次抵用优惠券":4==e.row.couponType?"小时抵用优惠券":"")+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"消费类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            预约消费\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"使用门槛",prop:"couponTag"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            无门槛\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"券有效期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            15天\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"f3ea508a-e002-486d-9b3c-f572901acca1",expression:"'f3ea508a-e002-486d-9b3c-f572901acca1'"}],attrs:{type:"primary",plain:""},on:{click:function(a){t.checkoutDetail(e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":t.currentPage4,"page-sizes":t.pageSizes,"page-size":t.curPageSize,layout:"total, sizes, prev, pager, next, jumper",total:0},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(c,s,!1,function(t){a("QKRs")},"data-v-76b621ed",null);e.default=r.exports}});
//# sourceMappingURL=51.95a76a2ae27ab784848a.js.map