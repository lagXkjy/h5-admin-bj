webpackJsonp([61],{UlWK:function(e,t){},fDHi:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("RyKi");var n={data:function(){return{curImg:"",dialogVisible:!1,currentPage:1,currentSize:10,pageSizes:[10,20,30,40],curTotal:0,faceSign:3,nickname:"",userId:"",usermobile:"",faceSignOptions:[{id:3,label:"全部"},{id:1,label:"已采集"},{id:2,label:"未采集"}],datas:[],isFetchingFaceList:!1}},components:{DropDownImage:a("b5K4").a},watch:{faceSign:function(){this.fetchData()}},beforeRouteEnter:function(e,t,a){a(function(e){e.$nextTick(function(){e.fetchData()})})},computed:{isExactSearch:function(){return this.userId||this.usermobile||this.nickname}},methods:{showImg:function(e){this.curImg=e||"",this.dialogVisible=!0},remove:function(e){var t,a=this;confirm("确认删除吗?")&&(t={userId:e.userId},i.a.post("admin/Operate/delFaceImg",t)).then(function(e){if(200==e.data.code)return a.$notify.success("删除人脸成功"),void a.fetchData();a.$notify.error("删除人脸失败")}).catch(function(){a.$notify.error("删除人脸失败")})},createParams:function(){var e={};return this.isExactSearch?(this.nickname&&(e.nickname=this.nickname),this.usermobile&&(e.mobile=this.usermobile),this.userId&&(e.userId=this.userId),e.page=1,e.size=10):(e.page=this.currentPage,e.size=this.currentSize,e.faceSign=this.faceSign),e},fetchData:function(){var e,t=this;this.isFetchingFaceList=!0,(e=this.createParams(),i.a.post("admin/Operate/getFaceList",e)).then(function(e){e.data.data.list.forEach(function(e,a){e.createTime=t.moment(e.createTime).format("YYYY-MM-DD HH:mm:ss")}),t.datas=e.data.data.list,t.mapPagination(e.data.data),t.isFetchingFaceList=!1}).catch(function(){t.isFetchingFaceList=!1})},mapPagination:function(e){this.currentPage=e.pageNum<1?1:e.pageNum,this.curPageSize=e.pageSize,this.curTotal=e.total},handleSizeChange:function(e){this.currentSize=e,this.fetchData()},handleCurrentChange:function(e){this.currentPage=e,this.fetchData()}},mounted:function(){var e=this;this.$nextTick(function(){e.fetchData()})}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userFacePage"},[a("div",{staticClass:"title"},[e._v("\n    用户人脸采集\n  ")]),e._v(" "),a("div",{staticClass:"selectors"},[a("div",{staticClass:"facesign"},[a("div",{staticClass:"subTitle"},[e._v("用户人脸")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.faceSign,callback:function(t){e.faceSign=t},expression:"faceSign"}},e._l(e.faceSignOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}))],1),e._v(" "),a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"搜索用户昵称"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}}),e._v(" "),a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"搜索用户手机号"},model:{value:e.usermobile,callback:function(t){e.usermobile=t},expression:"usermobile"}}),e._v(" "),a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"搜索用户ID"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.fetchData}},[e._v("搜索")])],1),e._v(" "),a("el-dialog",{attrs:{title:"图片",center:"",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{src:e.curImg,alt:""}})]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isFetchingFaceList,expression:"isFetchingFaceList"},{name:"permission",rawName:"v-permission",value:"e1806150-a740-4f6e-8531-8082a17cfdd8",expression:"'e1806150-a740-4f6e-8531-8082a17cfdd8'"}],staticStyle:{width:"100%"},attrs:{data:e.datas}},[a("el-table-column",{attrs:{label:"采集时间",prop:"createTime",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户ID",prop:"userId"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户昵称",prop:"nickname"}}),e._v(" "),a("el-table-column",{attrs:{label:"手机号",prop:"mobile"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户人脸图片",prop:"faceImg"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.faceImg?a("img",{staticStyle:{"max-width":"100px"},attrs:{src:t.row.faceImg,alt:""},on:{click:function(a){e.showImg(t.row.faceImg)}}}):a("span",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"e561930b-ce8f-4a8b-88c8-ae62d1ec0b43",expression:"'e561930b-ce8f-4a8b-88c8-ae62d1ec0b43'"}],attrs:{type:"remove"},on:{click:function(a){e.remove(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"permission",rawName:"v-permission",value:"e1806150-a740-4f6e-8531-8082a17cfdd8",expression:"'e1806150-a740-4f6e-8531-8082a17cfdd8'"}],attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.currentSize,layout:"total, sizes, prev, pager, next, jumper",total:e.curTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var c=a("VU/8")(n,s,!1,function(e){a("UlWK")},"data-v-240820bc",null);t.default=c.exports}});
//# sourceMappingURL=61.8025afccd05db5995d48.js.map