{"version":3,"sources":["webpack:///./src/api/configuration/homePhrase.js","webpack:///src/pages/configuration/homePhrase/Page.vue","webpack:///./src/pages/configuration/homePhrase/Page.vue?49ff","webpack:///./src/pages/configuration/homePhrase/Page.vue"],"names":["getHomePhraseList","params","axiosClient","post","addHomePhrase","updateHomePhrase","Page","SubTitle","_this","this","id","then","res","fetchData","catch","encourageContent","row","_this2","defaultId","editingDefaultPhraseContent","fetchDefaultData","_this3","newPhrase","otherId","moment","startTime","format","endTime","size","page","done","pageNum","pageSize","total","showtime","length","Date","selectedDate","getTime","_this4","defaultPhrase","data","list","_this5","currentPage","curPageSize","status","item","_this6","homePhrase_Page","render","_vm","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","attrs","title","staticStyle","width","border","prop","label","scopedSlots","_u","key","fn","scope","type","on","click","$event","editDefaultPhraseContent","center","visible","defaultVisible","before-close","defaultHandleClose","update:visible","placeholder","maxlength","model","callback","$$v","slot","editDefault","isCreate","otherVisible","otherHandleClose","range-separator","start-placeholder","end-placeholder","value-format","default-time","confirmCreate","createPhrase","phrases","_s","plain","editOther","_e","remove","current-page","page-sizes","pageSizes","page-size","layout","curTotal","size-change","handleSizeChange","current-change","handleCurrentChange","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/54.ad7a47c224e0e7116934.js","sourcesContent":["import { axiosClient } from 'common/axiosClient';\n\n// 获取激励语\nexport function getHomePhraseList(params) {\n  return axiosClient.post('admin/store/getListByParamEncourage', params)\n}\n\n// 添加激励语\nexport function addHomePhrase(params) {\n  return axiosClient.post('admin/store/addEncourage', params);\n}\n\n// 修改首页激励语\nexport function updateHomePhrase(params) {\n  return axiosClient.post('admin/store/updateEncourage', params)\n}\n\n// 删除激励语\nexport function removePhrase(params) {\n  return axiosClient.post('admin/store/delEncourage', params)\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/configuration/homePhrase.js","<template>\n  <div class=\"homePhrasePage\">\n    <div class=\"title\">首页激励语</div>\n\n    <div class=\"defaultPhrase\" v-permission=\"'349efd60-f240-4b6e-8677-a440e34a1304'\">\n      <sub-title title=\"默认显示\"></sub-title>\n      <div class=\"tableBox\">\n        <el-table :data=\"defaultPhrase\" style=\"width: 100%\" :border=\"true\" v-permission=\"'86555937-2552-424b-a483-a67c96bd9860'\">\n          <el-table-column prop=\"encourageContent\" label=\"激励语\">\n          </el-table-column>\n          <el-table-column label=\"操作\">\n            <template slot-scope=\"scope\">\n              <el-button type=\"primary\" @click=\"editDefaultPhraseContent(scope.row)\" v-permission=\"'46b843dc-e785-4935-8992-8d372a5ae5c9'\">编辑</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n    </div>\n    <!-- 默认弹框 -->\n    <el-dialog title=\"编辑\" center :visible.sync=\"defaultVisible\" width=\"50%\" :before-close=\"defaultHandleClose\">\n      <el-input type=\"textarea\" placeholder=\"输入激励语(30字以内)\" v-model=\"editingDefaultPhraseContent\" maxlength=\"30\"></el-input>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"defaultVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"editDefault\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 指定弹框 -->\n    <el-dialog :title=\"isCreate ? '新建' : '编辑'\" center :visible.sync=\"otherVisible\" width=\"40%\" :before-close=\"otherHandleClose\">\n      <div class=\"dateTimePicker\">\n        <div class=\"subTitle\">显示时间</div>\n        <el-date-picker v-model=\"showtime\" type=\"daterange\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" value-format=\"yyyy-MM-dd HH:mm:ss\" :default-time=\"['00:00:00', '23:59:59']\">\n        </el-date-picker>\n      </div>\n      <div class=\"phraseInput\">\n        <div class=\"subTitle\">激励语</div>\n        <el-input type=\"textarea\" placeholder=\"输入激励语(30字以内)\" v-model=\"newPhrase\" style=\"width: 400px\" maxlength=\"30\"></el-input>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"otherVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"confirmCreate\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <div class=\"otherPhrases\" v-permission=\"'80f77b44-9dc4-47a5-a6da-542878f91ad2'\">\n      <div class=\"other_header\">\n        <sub-title title=\"指定显示\"></sub-title>\n        <el-button type=\"primary\" @click=\"createPhrase\" v-permission=\"'f9d1e4a0-2804-4ef2-82bf-93f26de06a5d'\">新建</el-button>\n      </div>\n\n      <div class=\"tableBox\" v-loading=\"isLoading\" v-permission=\"'722d8ac5-4d61-4a4c-b29b-dc0da9179cc8'\">\n        <el-table :data=\"phrases\" style=\"width: 100%\" :border=\"true\">\n          <el-table-column prop=\"createTime\" label=\"创建日期\">\n          </el-table-column>\n          <el-table-column prop=\"time\" label=\"显示有效期\">\n            <template slot-scope=\"scope\">\n              {{moment(scope.row.startTime).format('YYYY-MM-DD HH:mm:ss') + '至' + moment(scope.row.endTime).format('YYYY-MM-DD HH:mm:ss')}}\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"encourageContent\" label=\"激励语\">\n          </el-table-column>\n          <el-table-column prop=\"status\" label=\"状态\">\n          </el-table-column>\n          <el-table-column label=\"操作\">\n            <template slot-scope=\"scope\">\n              <el-button type=\"primary\" plain v-if=\"scope.row.status === '未到期' || scope.row.status === '进行中'\" @click=\"editOther(scope.row)\" v-permission=\"'1c02794f-28b3-4d64-bb87-cecf1013ed95'\">编辑</el-button>\n              <el-button type=\"danger\" plain v-if=\"scope.row.status === '未到期'\" @click=\"remove(scope.row)\" v-permission=\"'80226a04-6d74-4cd5-ba5d-8f927afc72cf'\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n\n      <div class=\"paginationBox\" v-permission=\"'722d8ac5-4d61-4a4c-b29b-dc0da9179cc8'\">\n        <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"currentPage\" :page-sizes=\"pageSizes\" :page-size=\"curPageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"curTotal\">\n        </el-pagination>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport SubTitle from 'components/SubTitle';\n\nimport {\n  getHomePhraseList,\n  addHomePhrase,\n  updateHomePhrase,\n  removePhrase\n} from 'api/configuration/homePhrase';\n\nexport default {\n  data() {\n    return {\n      currentPage: 1,\n      curPageSize: 10,\n      curTotal: 0,\n      otherId: '',\n      pageSizes: [10, 20, 30, 40],\n      defaultPhrase: [],\n      showtime: [],\n      newPhrase: '',\n      defaultVisible: false,\n      otherVisible: false,\n      phrases: [],\n      isCreate: false,\n      isLoading: false,\n      editingDefaultPhraseContent: ''\n    };\n  },\n  computed: {\n    defaultId() {\n      return this.defaultPhrase[0].id ? this.defaultPhrase[0].id : null;\n    },\n    selectedDate() {\n      return this.showtime[0].split(' ')[0];\n    }\n  },\n  components: {\n    SubTitle\n  },\n  methods: {\n    remove(row) {\n      if (confirm('确定要删除吗?')) {\n        removePhrase({ id: row.id })\n          .then(res => {\n            if (res.data.code == 200) {\n              this.$notify.success('删除成功');\n              this.fetchData();\n            } else {\n              this.$notify.error('删除失败, 请重试');\n            }\n          })\n          .catch(() => {\n            this.$notify.error('删除失败, 请重试');\n          });\n      }\n    },\n    editDefaultPhraseContent(row) {\n      this.editingDefaultPhraseContent = row.encourageContent\n        ? row.encourageContent\n        : '';\n      this.defaultVisible = true;\n    },\n    editDefault() {\n      if (this.defaultId) {\n        updateHomePhrase({\n          id: this.defaultId,\n          encourageContent: this.editingDefaultPhraseContent,\n          isDefault: 1,\n          adminId: this.$store.state.auth.userInformation.id\n        })\n          .then(res => {\n            if (res.data.code == 200) {\n              this.$notify.success('编辑激励语成功');\n              this.fetchDefaultData();\n              this.defaultVisible = false;\n              return;\n            }\n            this.$notify.error('编辑激励语失败');\n            this.defaultVisible = false;\n            return;\n          })\n          .catch(() => {\n            this.$notify.error('编辑激励语失败');\n            this.defaultVisible = false;\n            return;\n          });\n      } else {\n        addHomePhrase({\n          encourageContent: this.editingDefaultPhraseContent,\n          isDefault: 1,\n          adminId: this.$store.state.auth.userInformation.id\n        })\n          .then(res => {\n            if (res.data.code == 200) {\n              this.$notify.success('编辑激励语成功');\n              this.fetchDefaultData();\n              this.defaultVisible = false;\n              return;\n            }\n            this.$notify.error('编辑激励语失败');\n            this.defaultVisible = false;\n            return;\n          })\n          .catch(() => {\n            this.$notify.error('编辑激励语失败');\n            this.defaultVisible = false;\n            return;\n          });\n      }\n    },\n    confirmCreate() {\n      if (this.verify()) {\n        if (this.isCreate) {\n          addHomePhrase({\n            startTime: this.showtime[0],\n            endTime: this.showtime[1],\n            encourageContent: this.newPhrase,\n            isDefault: 0,\n            adminId: this.$store.state.auth.userInformation.id\n          })\n            .then(res => {\n              if (res.data.code == 200) {\n                this.$notify.success('新建激励语成功');\n                this.fetchData();\n                this.otherVisible = false;\n                return;\n              }\n              this.$notify.error('新建激励语失败');\n              this.otherVisible = false;\n              return;\n            })\n            .catch(() => {\n              this.$notify.error('新建激励语失败');\n              this.otherVisible = false;\n              return;\n            });\n        } else {\n          updateHomePhrase({\n            id: this.otherId,\n            startTime: this.showtime[0],\n            endTime: this.showtime[1],\n            encourageContent: this.newPhrase,\n            isDefault: 0,\n            adminId: this.$store.state.auth.userInformation.id\n          })\n            .then(res => {\n              if (res.data.code == 200) {\n                this.$notify.success('编辑激励语成功');\n                this.fetchData();\n                this.otherVisible = false;\n                return;\n              }\n              this.$notify.error('编辑激励语失败');\n              this.otherVisible = false;\n              return;\n            })\n            .catch(() => {\n              this.$notify.error('编辑激励语失败');\n              this.otherVisible = false;\n              return;\n            });\n        }\n      }\n    },\n    createPhrase() {\n      this.otherVisible = true;\n      this.showtime = [];\n      this.newPhrase = '';\n      this.isCreate = true;\n    },\n    editOther(row) {\n      this.otherId = row.id;\n      this.newPhrase = row.encourageContent;\n      this.showtime = [\n        moment(row.startTime).format('YYYY-MM-DD HH:mm:ss'),\n        moment(row.endTime).format('YYYY-MM-DD HH:mm:ss')\n      ];\n\n      // console.log(this.showtime);\n      this.isCreate = false;\n      this.otherVisible = true;\n    },\n    handleSizeChange(size) {\n      this.curPageSize = size;\n      this.fetchData();\n    },\n    handleCurrentChange(page) {\n      this.currentPage = page;\n      this.fetchData();\n    },\n    defaultHandleClose(done) {\n      done();\n    },\n    otherHandleClose(done) {\n      done();\n    },\n    mapPagination(res) {\n      this.currentPage = res.pageNum < 1 ? 1 : res.pageNum;\n      this.curPageSize = res.pageSize;\n      this.curTotal = res.total;\n    },\n    verify() {\n      if (\n        this.showtime.length < 1 ||\n        new Date(this.selectedDate).getTime() <\n          new Date(this.moment().format('YYYY-MM-DD')).getTime()\n      ) {\n        this.$notify.error('请选择当前日期(或以后)为起始的日期区间');\n        return false;\n      }\n      if (!this.newPhrase.trim()) {\n        this.$notify.error('请输入激励语');\n        return false;\n      }\n      return true;\n    },\n    // 获取默认\n    fetchDefaultData() {\n      getHomePhraseList({\n        isDefault: 1\n      }).then(res => {\n        this.defaultPhrase =\n          res.data.data.list.length > 0 ? res.data.data.list : [{}];\n      });\n    },\n    // 获取全部\n    fetchData() {\n      this.isLoading = true;\n      getHomePhraseList({\n        page: this.currentPage,\n        size: this.curPageSize,\n        isDefault: 0\n      })\n        .then(res => {\n          res.data.data.list.forEach((item, index) => {\n            item.createTime = this.moment(item.createTime).format(\n              'YYYY-MM-DD HH:mm:ss'\n            );\n            // item.time =\n            //   this.moment(item.startTime).format('YYYY-MM-DD HH:mm:ss') +\n            //   '至' +\n            //   this.moment(item.endTime).format('YYYY-MM-DD HH:mm:ss');\n            item.status =\n              item.status == 1\n                ? '进行中'\n                : item.status == 2\n                  ? '未到期'\n                  : item.status == 3\n                    ? '已过期'\n                    : item.status == 4 ? '已暂停' : '';\n          });\n          this.phrases = res.data.data.list;\n          this.mapPagination(res.data.data);\n          this.isLoading = false;\n        })\n        .catch(() => {\n          this.isLoading = false;\n        });\n    }\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.fetchData();\n      this.fetchDefaultData();\n    });\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~assets/style/utils';\n\n.homePhrasePage {\n  background: white;\n  width: 100%;\n  min-height: 100%;\n  box-sizing: border-box;\n  padding: 20px;\n  .title {\n    font-size: 30px;\n    height: 50px;\n    line-height: 50px;\n    border: {\n      bottom: 1px solid #999999;\n    }\n  }\n}\n\n.defaultPhrase {\n  box-sizing: border-box;\n  padding: 20px;\n}\n\n.otherPhrases {\n  box-sizing: border-box;\n  padding: 20px;\n  .other_header {\n    @include flexbox;\n    @include justify-content(space-between);\n  }\n}\n\n.dateTimePicker {\n  @include flexbox;\n  @include align-items(center);\n  margin: {\n    bottom: 20px;\n  }\n  .subTitle {\n    width: 100px;\n  }\n}\n.phraseInput {\n  @include flexbox;\n  @include align-items(center);\n  .subTitle {\n    width: 100px;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/configuration/homePhrase/Page.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"homePhrasePage\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"首页激励语\")]),_vm._v(\" \"),_c('div',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('349efd60-f240-4b6e-8677-a440e34a1304'),expression:\"'349efd60-f240-4b6e-8677-a440e34a1304'\"}],staticClass:\"defaultPhrase\"},[_c('sub-title',{attrs:{\"title\":\"默认显示\"}}),_vm._v(\" \"),_c('div',{staticClass:\"tableBox\"},[_c('el-table',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('86555937-2552-424b-a483-a67c96bd9860'),expression:\"'86555937-2552-424b-a483-a67c96bd9860'\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.defaultPhrase,\"border\":true}},[_c('el-table-column',{attrs:{\"prop\":\"encourageContent\",\"label\":\"激励语\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('46b843dc-e785-4935-8992-8d372a5ae5c9'),expression:\"'46b843dc-e785-4935-8992-8d372a5ae5c9'\"}],attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.editDefaultPhraseContent(scope.row)}}},[_vm._v(\"编辑\")])]}}])})],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"编辑\",\"center\":\"\",\"visible\":_vm.defaultVisible,\"width\":\"50%\",\"before-close\":_vm.defaultHandleClose},on:{\"update:visible\":function($event){_vm.defaultVisible=$event}}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"输入激励语(30字以内)\",\"maxlength\":\"30\"},model:{value:(_vm.editingDefaultPhraseContent),callback:function ($$v) {_vm.editingDefaultPhraseContent=$$v},expression:\"editingDefaultPhraseContent\"}}),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.defaultVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editDefault}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.isCreate ? '新建' : '编辑',\"center\":\"\",\"visible\":_vm.otherVisible,\"width\":\"40%\",\"before-close\":_vm.otherHandleClose},on:{\"update:visible\":function($event){_vm.otherVisible=$event}}},[_c('div',{staticClass:\"dateTimePicker\"},[_c('div',{staticClass:\"subTitle\"},[_vm._v(\"显示时间\")]),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"default-time\":['00:00:00', '23:59:59']},model:{value:(_vm.showtime),callback:function ($$v) {_vm.showtime=$$v},expression:\"showtime\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"phraseInput\"},[_c('div',{staticClass:\"subTitle\"},[_vm._v(\"激励语\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"400px\"},attrs:{\"type\":\"textarea\",\"placeholder\":\"输入激励语(30字以内)\",\"maxlength\":\"30\"},model:{value:(_vm.newPhrase),callback:function ($$v) {_vm.newPhrase=$$v},expression:\"newPhrase\"}})],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.otherVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmCreate}},[_vm._v(\"确 定\")])],1)]),_vm._v(\" \"),_c('div',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('80f77b44-9dc4-47a5-a6da-542878f91ad2'),expression:\"'80f77b44-9dc4-47a5-a6da-542878f91ad2'\"}],staticClass:\"otherPhrases\"},[_c('div',{staticClass:\"other_header\"},[_c('sub-title',{attrs:{\"title\":\"指定显示\"}}),_vm._v(\" \"),_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('f9d1e4a0-2804-4ef2-82bf-93f26de06a5d'),expression:\"'f9d1e4a0-2804-4ef2-82bf-93f26de06a5d'\"}],attrs:{\"type\":\"primary\"},on:{\"click\":_vm.createPhrase}},[_vm._v(\"新建\")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"},{name:\"permission\",rawName:\"v-permission\",value:('722d8ac5-4d61-4a4c-b29b-dc0da9179cc8'),expression:\"'722d8ac5-4d61-4a4c-b29b-dc0da9179cc8'\"}],staticClass:\"tableBox\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.phrases,\"border\":true}},[_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"创建日期\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"time\",\"label\":\"显示有效期\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n            \"+_vm._s(_vm.moment(scope.row.startTime).format('YYYY-MM-DD HH:mm:ss') + '至' + _vm.moment(scope.row.endTime).format('YYYY-MM-DD HH:mm:ss'))+\"\\n          \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"encourageContent\",\"label\":\"激励语\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.status === '未到期' || scope.row.status === '进行中')?_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('1c02794f-28b3-4d64-bb87-cecf1013ed95'),expression:\"'1c02794f-28b3-4d64-bb87-cecf1013ed95'\"}],attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.editOther(scope.row)}}},[_vm._v(\"编辑\")]):_vm._e(),_vm._v(\" \"),(scope.row.status === '未到期')?_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('80226a04-6d74-4cd5-ba5d-8f927afc72cf'),expression:\"'80226a04-6d74-4cd5-ba5d-8f927afc72cf'\"}],attrs:{\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":function($event){_vm.remove(scope.row)}}},[_vm._v(\"删除\")]):_vm._e()]}}])})],1)],1),_vm._v(\" \"),_c('div',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('722d8ac5-4d61-4a4c-b29b-dc0da9179cc8'),expression:\"'722d8ac5-4d61-4a4c-b29b-dc0da9179cc8'\"}],staticClass:\"paginationBox\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":_vm.pageSizes,\"page-size\":_vm.curPageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.curTotal},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-66241248\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/configuration/homePhrase/Page.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-66241248\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Page.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Page.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Page.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-66241248\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Page.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-66241248\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/configuration/homePhrase/Page.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}