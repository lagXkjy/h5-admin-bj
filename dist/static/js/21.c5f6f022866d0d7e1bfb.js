webpackJsonp([21],{"A+eH":function(e,t){},AZsl:function(e,t){},D5Mk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Pfph"),r={data:function(){return{currentPage:1,currentSize:10,curTotal:10,currentMessage:[]}},watch:{currentMessage:{handler:function(e,t){0==e.length?this.$emit("setRead",0):this.$emit("setRead",e[0].needReadNum)}}},methods:{handleSizeChange:function(e){this.currentSize=e,this.fetchData()},handleCurrentChange:function(e){this.currentPage=e,this.fetchData()},mapPagination:function(e){this.currentPage=e.pageNum<1?1:e.pageNum,this.currentSize=e.pageSize,this.curTotal=e.total},jumpToErrorDetail:function(e,t){var a=this;Object(n.f)({id:e}).then(function(){a.fetchData()}),this.$router.push({path:"/operation/error?errorDetail="+t})},fetchData:function(){var e=this;Object(n.a)({userId:this.$store.state.auth.userInformation.id,noticeType:3,page:this.currentPage,size:this.currentSize}).then(function(t){e.currentMessage=t.data.data.list,e.mapPagination(t.data.data)})}},mounted:function(){var e=this;this.$nextTick(function(){e.fetchData()})}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"currentMessage"},[e._l(e.currentMessage,function(t,n){return a("div",{key:n,staticClass:"messageItem"},[a("div",{staticClass:"messageHead"},[a("div",{class:2==t.iconSign?1==t.readStatus?["title","fire"]:["fire"]:1==t.readStatus?["title"]:[""],style:2==t.readStatus?"color: #999999":""},[e._v("设备异常")]),e._v(" "),a("div",{staticClass:"createTime",staticStyle:{"font-size":"14px",color:"#999999"}},[e._v(e._s(e.moment(t.createTime).format("YYYY-MM-DD HH:mm:ss")))])]),e._v(" "),a("div",{staticClass:"messageContent",style:2==t.readStatus?"color: #999999":"",on:{click:function(a){e.jumpToErrorDetail(t.id,t.backStageAbnormal.abnormalId)}}},[e._v("\n       ["+e._s(t.backStageAbnormal.facilityName?t.backStageAbnormal.facilityName:"无")+"](错误码:"+e._s(t.backStageAbnormal.abnormalCode?t.backStageAbnormal.abnormalCode:"无")+"): "+e._s(t.backStageAbnormal.abnormalDesc)+"\n     ")]),e._v(" "),a("div",{staticClass:"storeName",staticStyle:{color:"#999999"}},[e._v("\n       "+e._s(t.backStageAbnormal.storeName)+"\n     ")])])}),e._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.currentSize,layout:"total, sizes, prev, pager, next, jumper",total:e.curTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2)},staticRenderFns:[]};var i={data:function(){return{currentPage:1,currentSize:10,curTotal:10,currentMessage:[]}},watch:{currentMessage:{handler:function(e,t){0==e.length?this.$emit("setRead",0):this.$emit("setRead",e[0].needReadNum)}}},methods:{handleSizeChange:function(e){this.currentSize=e,this.fetchData()},handleCurrentChange:function(e){this.currentPage=e,this.fetchData()},mapPagination:function(e){this.currentPage=e.pageNum<1?1:e.pageNum,this.currentSize=e.pageSize,this.curTotal=e.total},jumpToErrorDetail:function(e,t){var a=this;e&&(Object(n.f)({id:e}).then(function(){a.fetchData()}),this.$router.push({path:"/service/abnormalOrder?orderDetail="+t}))},fetchData:function(){var e=this;Object(n.a)({userId:this.$store.state.auth.userInformation.id,noticeType:2,page:this.currentPage,size:this.currentSize}).then(function(t){e.currentMessage=t.data.data.list,e.mapPagination(t.data.data)})}},mounted:function(){var e=this;this.$nextTick(function(){e.fetchData()})}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"currentMessage"},[e._l(e.currentMessage,function(t,n){return a("div",{key:n,staticClass:"messageItem"},[a("div",{staticClass:"messageHead"},[a("div",{class:2==t.iconSign?1==t.readStatus?["title","fire"]:["fire"]:1==t.readStatus?["title"]:[""],style:2==t.readStatus?"color: #999999":""},[e._v("异常订单")]),e._v(" "),a("div",{staticClass:"createTime",staticStyle:{"font-size":"14px",color:"#999999"}},[e._v(e._s(t.orderInfo?e.moment(t.createTime).format("YYYY-MM-DD HH:mm:ss"):"无"))])]),e._v(" "),a("div",{staticClass:"messageContent",style:2==t.readStatus?"color: #999999":"",on:{click:function(a){e.jumpToErrorDetail(t.id,t.orderInfo.id)}}},[e._v("\n       单号:"+e._s(t.orderInfo?t.orderInfo.orderSn:"无")+",超时:"+e._s(t.orderInfo?t.orderInfo.exceedMinute:"0")+"分钟\n     ")]),e._v(" "),a("div",{staticClass:"storeName",staticStyle:{color:"#999999"}},[e._v("\n       "+e._s(t.orderInfo?t.orderInfo.storeName:"无")+"\n     ")])])}),e._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.currentSize,layout:"total, sizes, prev, pager, next, jumper",total:e.curTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2)},staticRenderFns:[]};var o={data:function(){return{currentPage:1,currentSize:10,curTotal:10,currentMessage:[]}},watch:{currentMessage:{handler:function(e,t){0==e.length?this.$emit("setRead",0):this.$emit("setRead",e[0].needReadNum)}}},methods:{handleSizeChange:function(e){this.currentSize=e,this.fetchData()},handleCurrentChange:function(e){this.currentPage=e,this.fetchData()},mapPagination:function(e){this.currentPage=e.pageNum<1?1:e.pageNum,this.currentSize=e.pageSize,this.curTotal=e.total},jumpToErrorDetail:function(e,t){var a=this;Object(n.f)({id:e}).then(function(){a.fetchData()}),this.$router.push({path:"/monitor/securezoom?ZoomDetail="+t})},fetchData:function(){var e=this;Object(n.a)({userId:this.$store.state.auth.userInformation.id,noticeType:1,page:this.currentPage,size:this.currentSize}).then(function(t){e.currentMessage=t.data.data.list,e.mapPagination(t.data.data)})}},mounted:function(){var e=this;this.$nextTick(function(){e.fetchData()})}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"currentMessage"},[e._l(e.currentMessage,function(t,n){return a("div",{key:n,staticClass:"messageItem"},[a("div",{staticClass:"messageHead"},[a("div",{class:2==t.iconSign?1==t.readStatus?["title","fire"]:["fire"]:1==t.readStatus?["title"]:[""],style:2==t.readStatus?"color: #999999":""},[e._v("应急通知")]),e._v(" "),a("div",{staticClass:"createTime",staticStyle:{"font-size":"14px",color:"#999999"}},[e._v(e._s(e.moment(t.createTime).format("YYYY-MM-DD HH:mm:ss")))])]),e._v(" "),a("div",{staticClass:"messageContent",style:2==t.readStatus?"color: #999999":"",on:{click:function(a){e.jumpToErrorDetail(t.id,t.backStageAbnormal.abnormalId)}}},[e._v("\n      "+e._s(t.backStageAbnormal.abnormalDesc)+"\n     ")]),e._v(" "),a("div",{staticClass:"storeName",staticStyle:{color:"#999999"}},[e._v("\n       "+e._s(t.backStageAbnormal.storeName)+"\n     ")])])}),e._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.currentSize,layout:"total, sizes, prev, pager, next, jumper",total:e.curTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2)},staticRenderFns:[]};var l={name:"historyMessage",data:function(){return{activeType:"3",read1:"",read2:"",read3:""}},components:{OperationPage:a("VU/8")(r,s,!1,function(e){a("A+eH")},"data-v-09bac6e8",null).exports,ServicePage:a("VU/8")(i,c,!1,function(e){a("jhaP")},"data-v-4bb080bf",null).exports,NoticePage:a("VU/8")(o,u,!1,function(e){a("AZsl")},"data-v-df5f6b22",null).exports},methods:{handleClick:function(){},setRead1:function(e){this.read1=0==e?"":e},setRead2:function(e){this.read2=0==e?"":e},setRead3:function(e){this.read3=0==e?"":e},mark:function(){var e=this;Object(n.e)({userId:this.$store.state.auth.userInformation.id,noticeType:this.activeType}).then(function(){e.$refs.operationPage.fetchData(),e.$refs.servicePage.fetchData(),e.$refs.noticePage.fetchData()})}},computed:{}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"historyMessagePage"},[a("div",{staticClass:"markAllAsRead",on:{click:e.mark}},[e._v("全部已阅")]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeType,callback:function(t){e.activeType=t},expression:"activeType"}},[a("el-tab-pane",{attrs:{name:"3"}},[a("el-badge",{staticClass:"item",staticStyle:{"margin-top":"10px"},attrs:{slot:"label",value:e.read1,max:99},slot:"label"},[a("span",[e._v("运营")])]),e._v(" "),a("operation-page",{ref:"operationPage",on:{setRead:e.setRead1}})],1),e._v(" "),a("el-tab-pane",{attrs:{name:"2"}},[a("el-badge",{staticClass:"item",staticStyle:{"margin-top":"10px"},attrs:{slot:"label",value:e.read2,max:99},slot:"label"},[a("span",[e._v("客服")])]),e._v(" "),a("service-page",{ref:"servicePage",on:{setRead:e.setRead2}})],1),e._v(" "),a("el-tab-pane",{attrs:{name:"1"}},[a("el-badge",{staticClass:"item",staticStyle:{"margin-top":"10px"},attrs:{slot:"label",value:e.read3,max:99},slot:"label"},[a("span",[e._v("通知")])]),e._v(" "),a("notice-page",{ref:"noticePage",on:{setRead:e.setRead3}})],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(l,d,!1,function(e){a("hGXo")},"data-v-52eb6524",null);t.default=h.exports},hGXo:function(e,t){},jhaP:function(e,t){}});
//# sourceMappingURL=21.c5f6f022866d0d7e1bfb.js.map