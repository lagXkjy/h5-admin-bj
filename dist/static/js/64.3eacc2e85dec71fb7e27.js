webpackJsonp([64],{"3c0Q":function(e,t){},"bX+T":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),s=a("RyKi");var l=a("b5K4"),r=a("0LZo"),o={data:function(){return{isLoadingData:!1,dialogVisible:!1,dialog_reseaon:"",confirm_reseaon:"",currentPage:1,curPageSize:10,pageSizes:[10,20,30,40],curTotal:0,userWallList:[],status:"all",nickname:"",userMobile:"",editingUserInfo:{},statusOptions:[{value:"all",label:"全部"},{value:1,label:"正常"},{value:2,label:"禁用"}]}},components:{DropDownImage:l.a,SubTitle:r.a},computed:{isExact:function(){return this.nickname||this.userMobile},exactSearchKey:function(){var e={};return this.nickname&&(e.nickname=this.nickname),this.userMobile&&(e.mobile=this.userMobile),e.page=1,e.size=this.curPageSize,e},searchKey:function(){if(this.isExact)return this.exactSearchKey;var e={};return"all"!==this.status&&(e.canPush=this.status),e.page=this.currentPage,e.size=this.curPageSize,e}},methods:{jumpToUserDetail:function(){},editUserWall:function(e){this.editingUserInfo=JSON.parse(n()(e)),this.dialogVisible=!0},confirmUpdate:function(){var e,t=this;if(!this.dialog_reseaon)return this.$notify.warning("请输入理由");this.dialogVisible=!1,this.confirm_reseaon=this.dialog_reseaon,(e={id:this.editingUserInfo.id,manageReviewResult:this.editingUserInfo.canPush,manageReviewId:this.$store.state.auth.userInformation.id,manageReviewDesc:this.confirm_reseaon},s.a.post("admin/UserScreenUpload/getUserScreenUploadUpdate",e)).then(function(e){if(200==e.data.code)return t.$notify.success("修改审核成功"),void t.fetchUserWallList();t.$notify.error("修改审核失败")}).catch(function(){t.$notify.error("修改审核失败")})},handleSizeChange:function(e){this.curPageSize=e,this.fetchUserWallList()},handleCurrentChange:function(e){this.currentPage=e,this.fetchUserWallList()},mapPagination:function(e){this.currentPage=e.pageNum<1?1:e.pageNum,this.curPageSize=e.pageSize,this.curTotal=e.total},fetchUserWallList:function(){var e,t=this;this.isLoadingData=!0,(e=this.searchKey,s.a.post("admin/UserScreenUpload/getListByParam",e)).then(function(e){e.data.data.list.forEach(function(e,a){e.createTime=t.moment(e.createTime).format("YYYY-MM-DD HH:mm:ss")}),t.userWallList=e.data.data.list,t.mapPagination(e.data.data),t.isLoadingData=!1}).catch(function(){t.isLoadingData=!1})}},beforeRouteEnter:function(e,t,a){a(function(e){e.$nextTick(function(){e.fetchUserWallList()})})},mounted:function(){var e=this;this.$nextTick(function(){e.fetchUserWallList()})}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userWallPage"},[a("sub-title",{attrs:{title:"用户上墙"}}),e._v(" "),a("div",{staticClass:"selectors",staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{width:"50px"}},[e._v("状态")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-input",{staticStyle:{width:"220px","margin-left":"20px"},attrs:{placeholder:"搜索用户昵称"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}}),e._v(" "),a("el-input",{staticStyle:{width:"220px","margin-left":"10px","margin-right":"20px"},attrs:{placeholder:"搜索用户手机号"},model:{value:e.userMobile,callback:function(t){e.userMobile=t},expression:"userMobile"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.fetchUserWallList}},[e._v("搜索")])],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoadingData,expression:"isLoadingData"},{name:"permission",rawName:"v-permission",value:"aa7b69b4-7280-4a06-b07d-3c3b95a54cc9",expression:"'aa7b69b4-7280-4a06-b07d-3c3b95a54cc9'"}],staticClass:"userWallTable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userWallList}},[a("el-table-column",{attrs:{label:"时间",prop:"createTime",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户",prop:"nickname",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){e.jumpToUserDetail(t.row.userId)}}},[e._v(e._s(t.row.nickname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"手机号",prop:"mobile"}}),e._v(" "),a("el-table-column",{attrs:{label:"上墙门店",prop:"storeName"}}),e._v(" "),a("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{"max-width":"100px"},attrs:{src:e.row.picUrl,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"内容",prop:"uploadDesc"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"canPush"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1==t.row.canPush?"正常":"禁用")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"c3617cda-c19a-46f9-8b43-3cb9bb243aa4",expression:"'c3617cda-c19a-46f9-8b43-3cb9bb243aa4'"}],attrs:{type:"primary",plain:""},on:{click:function(a){e.editUserWall(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"操作",center:"",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticStyle:{"margin-bottom":"15px"}},[a("span",{staticStyle:{display:"inline-block",width:"80px"}},[e._v("上墙时间")]),e._v(e._s(e.editingUserInfo.createTime))]),e._v(" "),a("div",{staticStyle:{"margin-bottom":"15px"}},[a("span",{staticStyle:{display:"inline-block",width:"80px"}},[e._v("上墙用户")]),e._v(e._s(e.editingUserInfo.nickname))]),e._v(" "),a("div",{staticStyle:{"margin-bottom":"15px"}},[a("span",{staticStyle:{display:"inline-block",width:"80px"}},[e._v("手机号码")]),e._v(e._s(e.editingUserInfo.mobile))]),e._v(" "),a("div",[e._v("上墙内容: 如下")]),e._v(" "),a("div",{staticClass:"dialog_userDesc",staticStyle:{border:"1px solid #e5e5e5","margin-bottom":"15px"}},[a("div",{staticClass:"dialog_dropDownImage"},[e.editingUserInfo.picUrl?a("drop-down-image",{attrs:{source:e.editingUserInfo.picUrl,imageStyle:{width:"100px",height:"100px"}}}):e._e()],1),e._v(" "),a("div",{staticStyle:{"padding-left":"20px"}},[e._v(e._s(e.editingUserInfo.uploadDesc))])]),e._v(" "),a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v("上墙时间:"+e._s(e.editingUserInfo.createTime))]),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-radio-group",{model:{value:e.editingUserInfo.canPush,callback:function(t){e.$set(e.editingUserInfo,"canPush",t)},expression:"editingUserInfo.canPush"}},[a("el-radio",{attrs:{label:"1"}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("禁用")])],1)],1),e._v(" "),a("el-input",{attrs:{placeholder:"请输入理由"},model:{value:e.dialog_reseaon,callback:function(t){e.dialog_reseaon=t},expression:"dialog_reseaon"}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmUpdate}},[e._v("确认")])],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.curPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.curTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(o,c,!1,function(e){a("3c0Q")},"data-v-19142263",null);t.default=u.exports}});
//# sourceMappingURL=64.3eacc2e85dec71fb7e27.js.map