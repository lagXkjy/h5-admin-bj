{"version":3,"sources":["webpack:///src/pages/storePart/storeConfig/components/StoreConfigTable.vue","webpack:///./src/pages/storePart/storeConfig/components/StoreConfigTable.vue?89c7","webpack:///./src/pages/storePart/storeConfig/components/StoreConfigTable.vue","webpack:///src/pages/storePart/storeConfig/Page.vue","webpack:///./src/pages/storePart/storeConfig/Page.vue?16f3","webpack:///./src/pages/storePart/storeConfig/Page.vue"],"names":["StoreConfigTable","Array","methods","extends_default","Object","vuex_esm","submit","isLt1M","this","FileReader","file","result","_this","storeConfigUploadImg","img_base64","suffix","then","url","catch","error","row","facilityIconUrl","done","_this2","id","facilityName","uploadImgUrl","facilityType","getStoreConfigPublicDevice","components_StoreConfigTable","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","visible","dialogVisible","width","before-close","handleClose","on","update:visible","$event","_v","staticStyle","placeholder","clearable","model","value","editingPublicDevice","callback","$$v","$set","expression","ref","action","on-preview","handlePreview","on-remove","handleRemove","list-type","auto-upload","http-request","upLoadImg","show-file-list","before-upload","beforeUploadImg","src","slot","click","type","confirm","dialogVisible_remove","confirm2","data","tableData","label","prop","scopedSlots","_u","key","fn","scope","style","directives","name","rawName","size","nativeOn","showDialog","staticRenderFns","Page","__webpack_require__","normalizeComponent","ssrContext","computed","state","storeConfig","storeConfigPublicDevice","isFetchingData","_this3","storeConfig_Page","addPublicDevice","Page_Component","Page_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/33.4050d7229c246f0f607d.js","sourcesContent":["<template>\n  <div class=\"tablePage\">\n\n    <el-dialog title=\"编辑\" :visible.sync=\"dialogVisible\" width=\"30%\" :before-close=\"handleClose\">\n      <div class=\"subTitle\">\n        <div class=\"subsubTitle\">名称:</div>\n        <el-input style=\"width: 200px\" placeholder=\"输入设备ID\" v-model=\"editingPublicDevice.facilityName\" clearable>\n        </el-input>\n      </div>\n      <div class=\"uploadBox\">\n        <el-upload ref=\"upload\" class=\"avatar-uploader\" action=\"http://api-control.test.hxsapp.com/admin/Upload/uploadBase64\" :on-preview=\"handlePreview\" :on-remove=\"handleRemove\" list-type=\"picture-card\" :auto-upload=\"true\" :http-request=\"upLoadImg\" :show-file-list=\"false\" :before-upload=\"beforeUploadImg\">\n          <img v-if=\"uploadImgUrl\" :src=\"uploadImgUrl\" class=\"avatar\">\n          <i v-else class=\"el-icon-plus avatar-uploader-icon imgborder\"></i>\n        </el-upload>\n        <div class=\"uploadTips\">\n          <div>尺寸: 40X40</div>\n          <div>支持JPG/PNG格式</div>\n          <div>大小不超过1M</div>\n        </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"confirm(editingPublicDevice)\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <el-dialog title=\"删除\" :visible.sync=\"dialogVisible_remove\" width=\"30%\" :before-close=\"handleClose\">\n      确认删除后, 用户APP相关展示信息将会同步删除且不可恢复!\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible_remove = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"confirm2(editingPublicDevice)\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <el-table :data=\"tableData\" style=\"width: 100%\">\n      <el-table-column label=\"ID\" prop=\"id\">\n      </el-table-column>\n      <el-table-column label=\"名称\" prop=\"facilityName\">\n      </el-table-column>\n\n      <el-table-column label=\"图片(40X40)\">\n        <template slot-scope=\"scope\">\n          <div class=\"tablePic\" :style=\"`background-image: url(${scope.row.facilityIconUrl}); background-size: 100% 100%`\"></div>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button @click.native=\"showDialog(scope.row)\" size=\"small\" v-permission=\"'c284f6ce-effb-4183-bede-b696153e2792'\">编辑</el-button>\n          <!-- <el-button @click.native=\"showDialog2(scope.row)\" size=\"small\">删除</el-button> -->\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex';\n\nimport { deepCopy } from 'common/utils';\n\nexport default {\n  props: {\n    tableData: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      dialogVisible: false,\n      dialogVisible_remove: false,\n      editingPublicDevice: {},\n      fileList2: [],\n      uploadImgUrl: '',\n      isLoadingImgSuccess: false // 是否加载成功图片\n    };\n  },\n  methods: {\n    ...mapActions([\n      'storeConfigUploadImg',\n      'updateStoreConfigPublicDevice',\n      'getStoreConfigPublicDevice'\n    ]),\n    handleRemove(file, fileList) {\n      // console.log(file, fileList);\n    },\n    submitUpload() {\n      this.$refs.upload.submit();\n    },\n    handlePreview(file) {\n      // console.log(file);\n    },\n    beforeUploadImg(file) {\n      // 检测图片格式及大小\n      // console.log(file.type);\n      const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n      const isLt1M = file.size / 1024 / 1024 < 1;\n      if (!isJPG) {\n        this.$notify.error('上传图片只能是 JPG或PNG 格式!');\n      }\n      if (!isLt1M) {\n        this.$notify.error('上传图片大小不能超过 1MB!');\n      }\n      return isJPG && isLt1M;\n      return true;\n    },\n    upLoadImg(content) {\n      // console.log(content);\n      this.$notify.warning('图片正在上传, 请耐心等待');\n      const _this = this;\n      let img_base64 = '';\n      var reader = new FileReader();\n      reader.readAsDataURL(content.file);\n      reader.onloadend = function() {\n        img_base64 = this.result;\n        let arr = content.file.name.split('.');\n        let suffix = arr[arr.length - 1];\n        _this\n          .storeConfigUploadImg({\n            imageBase64: img_base64,\n            type: suffix\n          })\n          .then(url => {\n            _this.uploadImgUrl = url;\n            _this.isLoadingImgSuccess = true;\n            _this.$notify.success('图片加载成功');\n          })\n          .catch(error => {\n            _this.$notify.error('图片加载失败, 请重试');\n            _this.isLoadingImgSuccess = false;\n          });\n      };\n    },\n    showDialog(row) {\n      // console.log(row);\n      this.editingPublicDevice = deepCopy(row);\n      this.uploadImgUrl = deepCopy(row).facilityIconUrl;\n      this.dialogVisible = true;\n    },\n    showDialog2(row) {\n      // console.log(row);\n      this.editingPublicDevice = deepCopy(row);\n      this.dialogVisible_remove = true;\n    },\n    handleClose(done) {\n      this.editingPublicDevice = {};\n      done();\n    },\n    confirm(item) { // 确认编辑\n      this.updateStoreConfigPublicDevice({\n        id: item.id,\n        name: item.facilityName,\n        imageUrl: this.uploadImgUrl,\n        typeStr: item.facilityType\n      })\n        .then(() => {\n          this.$notify.success(`公共设备[${item.id}]更新成功`);\n          this.dialogVisible = false;\n          this.getStoreConfigPublicDevice();\n        })\n        .catch(() => {\n          this.$notify.error(`公共设备[${item.id}]更新失败, 请重试`);\n          this.dialogVisible = false;\n        });\n    },\n    confirm2(item) {\n      this.$notify.error('无此接口')\n      this.dialogVisible_remove = false;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~assets/style/utils';\n\n.tablePage {\n  width: 100%;\n}\n.tablePic {\n  width: 40px;\n  height: 40px;\n}\n\n.subTitle {\n  @include flexbox;\n  @include align-items(center);\n  margin: {\n    bottom: 20px;\n  }\n  .subsubTitle {\n    margin: {\n      right: 10px;\n    }\n  }\n}\n\n.uploadBox {\n  width: 100%;\n  @include flexbox;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 100px;\n  height: 100px;\n  line-height: 100px;\n  text-align: center;\n}\n.avatar {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n.uploadTips {\n  box-sizing: border-box;\n  padding: {\n    left: 15px;\n    top: 20px;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/storePart/storeConfig/components/StoreConfigTable.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tablePage\"},[_c('el-dialog',{attrs:{\"title\":\"编辑\",\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"subTitle\"},[_c('div',{staticClass:\"subsubTitle\"},[_vm._v(\"名称:\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"输入设备ID\",\"clearable\":\"\"},model:{value:(_vm.editingPublicDevice.facilityName),callback:function ($$v) {_vm.$set(_vm.editingPublicDevice, \"facilityName\", $$v)},expression:\"editingPublicDevice.facilityName\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"uploadBox\"},[_c('el-upload',{ref:\"upload\",staticClass:\"avatar-uploader\",attrs:{\"action\":\"http://api-control.test.hxsapp.com/admin/Upload/uploadBase64\",\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"list-type\":\"picture-card\",\"auto-upload\":true,\"http-request\":_vm.upLoadImg,\"show-file-list\":false,\"before-upload\":_vm.beforeUploadImg}},[(_vm.uploadImgUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.uploadImgUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon imgborder\"})]),_vm._v(\" \"),_c('div',{staticClass:\"uploadTips\"},[_c('div',[_vm._v(\"尺寸: 40X40\")]),_vm._v(\" \"),_c('div',[_vm._v(\"支持JPG/PNG格式\")]),_vm._v(\" \"),_c('div',[_vm._v(\"大小不超过1M\")])])],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.confirm(_vm.editingPublicDevice)}}},[_vm._v(\"确 定\")])],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"删除\",\"visible\":_vm.dialogVisible_remove,\"width\":\"30%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible_remove=$event}}},[_vm._v(\"\\n    确认删除后, 用户APP相关展示信息将会同步删除且不可恢复!\\n    \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible_remove = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.confirm2(_vm.editingPublicDevice)}}},[_vm._v(\"确 定\")])],1)]),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"label\":\"ID\",\"prop\":\"id\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"名称\",\"prop\":\"facilityName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"图片(40X40)\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"tablePic\",style:((\"background-image: url(\" + (scope.row.facilityIconUrl) + \"); background-size: 100% 100%\"))})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('c284f6ce-effb-4183-bede-b696153e2792'),expression:\"'c284f6ce-effb-4183-bede-b696153e2792'\"}],attrs:{\"size\":\"small\"},nativeOn:{\"click\":function($event){_vm.showDialog(scope.row)}}},[_vm._v(\"编辑\")])]}}])})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-43fa2ed3\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/storePart/storeConfig/components/StoreConfigTable.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-43fa2ed3\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./StoreConfigTable.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StoreConfigTable.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StoreConfigTable.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-43fa2ed3\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./StoreConfigTable.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-43fa2ed3\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/storePart/storeConfig/components/StoreConfigTable.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"protalPage\">\n    <el-dialog title=\"添加\" :visible.sync=\"dialogVisible\" width=\"30%\" :before-close=\"handleClose\">\n      <div class=\"subTitle\">\n        <div class=\"subsubTitle\">名称:</div>\n        <el-input style=\"width: 200px\" placeholder=\"输入名称\" v-model=\"facilityName\" clearable>\n        </el-input>\n      </div>\n      <div class=\"uploadBox\">\n        <el-upload ref=\"upload\" class=\"avatar-uploader\" action=\"http://api-control.test.hxsapp.com/admin/Upload/uploadBase64\" :on-preview=\"handlePreview\" :on-remove=\"handleRemove\" list-type=\"picture-card\" :auto-upload=\"true\" :http-request=\"upLoadImg\" :show-file-list=\"false\" :before-upload=\"beforeUploadImg\">\n          <img v-if=\"uploadImgUrl\" :src=\"uploadImgUrl\" class=\"avatar\">\n          <i v-else class=\"el-icon-plus avatar-uploader-icon imgborder\"></i>\n        </el-upload>\n        <div class=\"uploadTips\">\n          <div>尺寸: 40X40</div>\n          <div>支持JPG/PNG格式</div>\n          <div>大小不超过1M</div>\n        </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"confirm\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <div class=\"storeConfigPage\">\n      <div class=\"title\">门店配置</div>\n      <div class=\"tableTitle\">\n        <div class=\"subTitle\">公共设备标签</div>\n        <el-button type=\"primary\" @click.native=\"addPublicDevice\" v-permission=\"'e1b7ed1e-270a-4b82-8858-976b9f595ce7'\">添加</el-button>\n      </div>\n      <div class=\"tableBox\" v-loading=\"isFetchingData\">\n        <store-config-table :tableData=\"storeConfigPublicDevice\" v-permission=\"'a9647377-9fbc-4024-b350-3060b2e9162c'\"></store-config-table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport StoreConfigTable from './components/StoreConfigTable';\n\nimport { mapState, mapActions } from 'vuex';\n\nexport default {\n  components: {\n    StoreConfigTable\n  },\n  data() {\n    return {\n      dialogVisible: false,\n      facilityName: '',\n      uploadImgUrl: ''\n    };\n  },\n  computed: {\n    ...mapState({\n      storeConfigPublicDevice: state =>\n        state.storeConfig.storeConfigPublicDevice,\n      isFetchingData: state => state.storeConfig.isFetchingData\n    })\n  },\n  methods: {\n    ...mapActions(['getStoreConfigPublicDevice', 'storeConfigUploadImg', 'updateStoreConfigPublicDevice']),\n    handleClose(done) {\n      done();\n    },\n    addPublicDevice() {\n      this.dialogVisible = true;\n    },\n    handlePreview() {},\n    handleRemove() {},\n    submitUpload() {\n      this.$refs.upload.submit();\n    },\n    upLoadImg(content) {\n      this.$notify.warning('图片正在上传, 请耐心等待');\n      const _this = this;\n      let img_base64 = '';\n      var reader = new FileReader();\n      reader.readAsDataURL(content.file);\n      reader.onloadend = function() {\n        img_base64 = this.result;\n        let arr = content.file.name.split('.');\n        let suffix = arr[arr.length - 1];\n        _this\n          .storeConfigUploadImg({\n            imageBase64: img_base64,\n            type: suffix\n          })\n          .then(url => {\n            _this.uploadImgUrl = url;\n            _this.isLoadingImgSuccess = true;\n            _this.$notify.success('图片加载成功');\n          })\n          .catch(error => {\n            _this.$notify.error('图片加载失败, 请重试');\n            _this.isLoadingImgSuccess = false;\n          });\n      };\n    },\n    beforeUploadImg(file) {\n      // 检测图片格式及大小\n      // console.log(file.type);\n      const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n      const isLt1M = file.size / 1024 / 1024 < 1;\n      if (!isJPG) {\n        this.$notify.error('上传图片只能是 JPG或PNG 格式!');\n      }\n      if (!isLt1M) {\n        this.$notify.error('上传图片大小不能超过 1MB!');\n      }\n      return isJPG && isLt1M;\n      return true;\n    },\n    confirm() {\n      // 添加\n      this.updateStoreConfigPublicDevice({\n        name: this.facilityName,\n        imageUrl: this.uploadImgUrl,\n        typeStr: '0'\n      })\n        .then(() => {\n          this.$notify.success(`公共设备[${this.facilityName}]添加成功`);\n          this.dialogVisible = false;\n          this.getStoreConfigPublicDevice();\n        })\n        .catch(() => {\n          this.$notify.error(`公共设备[${this.facilityName}]添加失败, 请重试`);\n          this.dialogVisible = false;\n        });\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    next( vm => {\n      vm.$nextTick( () => {\n        vm.getStoreConfigPublicDevice();\n      });\n    })\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.getStoreConfigPublicDevice();\n    });\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~assets/style/utils';\n\n.storeConfigPage {\n  width: 100%;\n  min-height: 100%;\n  background-color: #ffffff;\n  box-sizing: border-box;\n  padding: 20px;\n  .title {\n    font-size: 30px;\n    height: 50px;\n    line-height: 50px;\n    border: {\n      bottom: 1px solid #999999;\n    }\n  }\n}\n.tableTitle {\n  @include flexbox;\n  @include justify-content(space-between);\n  box-sizing: border-box;\n  padding: {\n    left: 10px;\n    right: 20px;\n    top: 30px;\n  }\n  .subTitle {\n    font-size: 18px;\n    font-weight: 600;\n  }\n}\n.subTitle {\n  @include flexbox;\n  @include align-items(center);\n  margin: {\n    bottom: 20px;\n  }\n  .subsubTitle {\n    margin: {\n      right: 10px;\n    }\n  }\n}\n\n.uploadBox {\n  width: 100%;\n  @include flexbox;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 100px;\n  height: 100px;\n  line-height: 100px;\n  text-align: center;\n}\n.avatar {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n.uploadTips {\n  box-sizing: border-box;\n  padding: {\n    left: 15px;\n    top: 20px;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/storePart/storeConfig/Page.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"protalPage\"},[_c('el-dialog',{attrs:{\"title\":\"添加\",\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"subTitle\"},[_c('div',{staticClass:\"subsubTitle\"},[_vm._v(\"名称:\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"输入名称\",\"clearable\":\"\"},model:{value:(_vm.facilityName),callback:function ($$v) {_vm.facilityName=$$v},expression:\"facilityName\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"uploadBox\"},[_c('el-upload',{ref:\"upload\",staticClass:\"avatar-uploader\",attrs:{\"action\":\"http://api-control.test.hxsapp.com/admin/Upload/uploadBase64\",\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"list-type\":\"picture-card\",\"auto-upload\":true,\"http-request\":_vm.upLoadImg,\"show-file-list\":false,\"before-upload\":_vm.beforeUploadImg}},[(_vm.uploadImgUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.uploadImgUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon imgborder\"})]),_vm._v(\" \"),_c('div',{staticClass:\"uploadTips\"},[_c('div',[_vm._v(\"尺寸: 40X40\")]),_vm._v(\" \"),_c('div',[_vm._v(\"支持JPG/PNG格式\")]),_vm._v(\" \"),_c('div',[_vm._v(\"大小不超过1M\")])])],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirm}},[_vm._v(\"确 定\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"storeConfigPage\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"门店配置\")]),_vm._v(\" \"),_c('div',{staticClass:\"tableTitle\"},[_c('div',{staticClass:\"subTitle\"},[_vm._v(\"公共设备标签\")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('e1b7ed1e-270a-4b82-8858-976b9f595ce7'),expression:\"'e1b7ed1e-270a-4b82-8858-976b9f595ce7'\"}],attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){_vm.addPublicDevice($event)}}},[_vm._v(\"添加\")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isFetchingData),expression:\"isFetchingData\"}],staticClass:\"tableBox\"},[_c('store-config-table',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('a9647377-9fbc-4024-b350-3060b2e9162c'),expression:\"'a9647377-9fbc-4024-b350-3060b2e9162c'\"}],attrs:{\"tableData\":_vm.storeConfigPublicDevice}})],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5e56efd7\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/storePart/storeConfig/Page.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5e56efd7\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Page.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Page.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Page.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5e56efd7\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Page.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5e56efd7\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/storePart/storeConfig/Page.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}