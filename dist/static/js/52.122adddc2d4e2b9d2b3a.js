webpackJsonp([52],{Ut6g:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("0LZo"),a=i("VTbc"),n=i("F+jZ"),o={data:function(){return{actionApi:n.d,iconUrl:"",isLoading:!1,isUploading:!1,rank:[],editingId:0,isCreate:!1,dialogVisible:!1,strengthLevel:"",fitnessBaseLv:"",rankDesc:""}},components:{SubTitle:s.a},methods:{beforeAvatarUpload:function(t){this.isUploading=!0;var e="image/png"===t.type||"image/jpeg"===t.type,i=t.size/1024/1024<1;return e||(this.$notify.error("上传ICON只能是 JPG/PNG 格式!"),this.isUploading=!1),i||(this.$notify.error("上传ICON大小不能超过 1MB!"),this.isUploading=!1),e&&i},successUpload:function(t,e,i){this.iconUrl=t.data["oss-request-url"],this.isUploading=!1},failedUpload:function(t,e,i){this.$notify.error("文件上传失败, 请重新上传"),this.isUploading=!1},editLevel:function(t){this.isCreate=!1,this.dialogVisible=!0,this.iconUrl=t.iconUrl,this.editingId=t.id,this.strengthLevel=t.strengthLv,this.fitnessBaseLv=t.fitnessBaseLv,this.rankDesc=t.rankDesc},create:function(){this.isCreate=!0,this.iconUrl="",this.editingId=null,this.strengthLevel="",this.fitnessBaseLv="",this.rankDesc="",this.dialogVisible=!0},handleClose:function(t){t()},fetchRank:function(){var t=this;this.isLoading=!0,Object(a.a)().then(function(e){t.rank=e.data.data.list,t.isLoading=!1}).catch(function(){t.isLoading=!1})},confirmUpdate:function(){var t=this;this.dialogVisible=!1,this.isCreate?Object(a.c)({iconUrl:this.iconUrl,rankDesc:this.rankDesc,strengthLv:this.strengthLevel,fitnessBaseLv:this.fitnessBaseLv}).then(function(e){if(200==e.data.code)return t.$notify.success("新增训练难度等级成功"),void t.fetchRank();t.$notify.error("新增训练难度等级失败")}).catch(function(){t.$notify.error("新增训练难度等级失败")}):Object(a.c)({id:this.editingId,iconUrl:this.iconUrl,rankDesc:this.rankDesc,strengthLv:this.strengthLevel,fitnessBaseLv:this.fitnessBaseLv}).then(function(e){if(200==e.data.code)return t.$notify.success("修改训练难度等级成功"),void t.fetchRank();t.$notify.error("修改训练难度等级失败")}).catch(function(){t.$notify.error("修改训练难度等级失败")})},removeLevel:function(t){var e=this;confirm("确认要删除吗")&&Object(a.b)({id:t.id}).then(function(t){return 200==t.data.code?(e.$notify.success("删除等级成功"),void e.fetchRank()):void e.$notify.error("删除等级失败")}).catch(function(){e.$notify.error("删除等级失败")})}},mounted:function(){var t=this;this.$nextTick(function(){t.fetchRank()})}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"trainingLevelPage"},[i("div",{staticClass:"trainingLevel_header"},[i("sub-title",{attrs:{title:"训练难度等级设置"}}),t._v(" "),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"4aeb955b-4580-4d4a-ac6f-293d673f8d3a",expression:"'4aeb955b-4580-4d4a-ac6f-293d673f8d3a'"}],attrs:{type:"primary"},on:{click:t.create}},[t._v("新增")])],1),t._v(" "),i("el-dialog",{attrs:{title:t.isCreate?"新增训练难度等级":"编辑训练难度等级",visible:t.dialogVisible,width:"50%",center:"","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"dialog_trainingType"},[i("div",{staticClass:"dialog_item"},[i("div",{staticClass:"dialog_subtitle"},[t._v("强度等级")]),t._v(" "),i("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"强度等级"},model:{value:t.strengthLevel,callback:function(e){t.strengthLevel=e},expression:"strengthLevel"}})],1),t._v(" "),i("div",{staticClass:"dialog_item"},[i("div",{staticClass:"dialog_subtitle"},[t._v("对应训练等级")]),t._v(" "),i("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"对应训练等级"},model:{value:t.fitnessBaseLv,callback:function(e){t.fitnessBaseLv=e},expression:"fitnessBaseLv"}})],1),t._v(" "),i("div",{staticClass:"dialog_item"},[i("div",{staticClass:"dialog_subtitle"},[t._v("提示文案")]),t._v(" "),i("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"提示文案(30字内)",type:"textarea",maxlength:"30"},model:{value:t.rankDesc,callback:function(e){t.rankDesc=e},expression:"rankDesc"}})],1),t._v(" "),i("div",{staticClass:"dialog_item"},[i("div",{staticClass:"dialog_subtitle"},[t._v("ICON")]),t._v(" "),i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.isUploading,expression:"isUploading"}],staticClass:"upload-demo",attrs:{drag:"",action:t.actionApi,"show-file-list":!1,"on-success":t.successUpload,"on-error":t.failedUpload,"before-upload":t.beforeAvatarUpload}},[t.iconUrl?i("img",{staticClass:"avatar",attrs:{src:t.iconUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.confirmUpdate}},[t._v("确 定")])],1)]),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"},{name:"permission",rawName:"v-permission",value:"d4b6e4a7-8a1b-40be-96f0-6e7085cd6eb6",expression:"'d4b6e4a7-8a1b-40be-96f0-6e7085cd6eb6'"}],staticClass:"trainingLevel_table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.rank}},[i("el-table-column",{attrs:{label:"ID",prop:"id"}}),t._v(" "),i("el-table-column",{attrs:{label:"训练强度等级",prop:"fitnessBaseLv"}}),t._v(" "),i("el-table-column",{attrs:{label:"对应训练等级",prop:"strengthLv"}}),t._v(" "),i("el-table-column",{attrs:{label:"ICON",prop:"iconUrl"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{staticStyle:{"max-width":"100px"},attrs:{src:t.row.iconUrl,alt:""}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"提示文案",prop:"rankDesc"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",prop:"time",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"0f38c832-6f2c-4f6a-89c2-349394f55bf4",expression:"'0f38c832-6f2c-4f6a-89c2-349394f55bf4'"}],attrs:{type:"primary",plain:""},on:{click:function(i){t.editLevel(e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"c3d41bb7-8320-48e4-8a53-9377c6c62b6f",expression:"'c3d41bb7-8320-48e4-8a53-9377c6c62b6f'"}],attrs:{type:"danger",plain:""},on:{click:function(i){t.removeLevel(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(t){i("a75o")},"data-v-75edce9a",null);e.default=r.exports},a75o:function(t,e){}});
//# sourceMappingURL=52.122adddc2d4e2b9d2b3a.js.map