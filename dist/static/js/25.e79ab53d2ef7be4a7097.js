webpackJsonp([25],{"0eJu":function(t,e){},"C+RV":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),i=a("JaHG"),l={props:{tableData:{type:Array,default:function(){return[]}}},watch:{$route:function(t,e){}},data:function(){return{time:""}},methods:{jumpTo:function(t){1==t.consumeType&&this.$router.push({path:"/order/sportOrder?orderSn="+t.orderSn}),2==t.consumeType&&this.$router.push({path:"/order/shopsOrder?orderSn="+t.orderSn})}},computed:{datas:function(){var t=this,e=Object(i.b)(this.tableData);return e.forEach(function(e,a){e.balanceInitial=(e.balanceInitial/100).toFixed(2)+"元",e.currentRecharge=(e.currentRecharge/100).toFixed(2)+"元",e.currentConsume="-"+(e.currentConsume/100).toFixed(2)+"元",e.currentRefund=(e.currentRefund/100).toFixed(2)+"元",e.balanceFinal=(e.balanceFinal/100).toFixed(2)+"元",e.createTime=t.moment(e.createTime).format("YYYY-MM-DD HH:mm:ss")}),e}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.datas}},[a("el-table-column",{attrs:{prop:"createTime",label:"时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"balanceInitial",label:"期初余额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"currentRecharge",label:"本次充值"}}),t._v(" "),a("el-table-column",{attrs:{prop:"currentConsume",label:"本次消费"}}),t._v(" "),a("el-table-column",{attrs:{prop:"currentRefund",label:"本次退款"}}),t._v(" "),a("el-table-column",{attrs:{prop:"balanceFinal",label:"期末余额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userInfo.nickname",label:"交易用户"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderSn",label:"交易单号"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.consumeType||2==e.row.consumeType?a("a",{staticClass:"hyperlink",attrs:{href:"javascript:;"},on:{click:function(a){t.jumpTo(e.row)}}},[t._v("\n          "+t._s(e.row.orderSn)+"\n        ")]):a("span",[t._v(t._s(e.row.orderSn))])]}}])})],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,o,!1,function(t){a("ejuk")},"data-v-e65b249e",null).exports,s={methods:{},props:{tableData:{type:Array,default:function(){return[]}}},watch:{$route:function(t,e){}},computed:{datas:function(){var t=Object(i.b)(this.tableData);return t.forEach(function(t,e){t.balanceInitialTotal=(t.balanceInitialTotal/100).toFixed(2)+"元",t.currentRechargeTotal=(t.currentRechargeTotal/100).toFixed(2)+"元",t.currentConsumeTotal=(t.currentConsumeTotal/100).toFixed(2)+"元",t.currentRefundTotal=(t.currentRefundTotal/100).toFixed(2)+"元",t.balanceFinalTotal=(t.balanceFinalTotal/100).toFixed(2)+"元",t.userTotal=t.userTotal+"个"}),t}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-table",{staticStyle:{width:"100%"},attrs:{data:this.datas}},[e("el-table-column",{attrs:{prop:"balanceInitialTotal",label:"期初余额"}}),this._v(" "),e("el-table-column",{attrs:{prop:"currentRechargeTotal",label:"累加充值"}}),this._v(" "),e("el-table-column",{attrs:{prop:"currentConsumeTotal",label:"累加消费"}}),this._v(" "),e("el-table-column",{attrs:{prop:"currentRefundTotal",label:"累加退款"}}),this._v(" "),e("el-table-column",{attrs:{prop:"balanceFinalTotal",label:"期末余额"}}),this._v(" "),e("el-table-column",{attrs:{prop:"userTotal",label:"交易用户总数"}}),this._v(" "),e("el-table-column",{attrs:{prop:"statsNum",label:"交易单总量"}})],1)},staticRenderFns:[]};var p=a("VU/8")(s,u,!1,function(t){a("NfqN")},"data-v-fd4e2c10",null).exports,d=a("NYxO"),m={data:function(){return{pickerOptions2:{shortcuts:[{text:"本周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"本月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"本年",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-31536e6),t.$emit("pick",[a,e])}}]},time:[],username:"",pageSizes:[10,20,30,40],curPageSize:10,currentPage:1,curTotal:0}},watch:{time:function(){this.fetchData()}},components:{journalTab:c,journalCollect:p},beforeRouteEnter:function(t,e,a){a(function(t){t.$nextTick(function(){t.fetchData(),t.getCollectList()})})},methods:r()({},Object(d.b)(["getJournalList","getCollectList"]),{handleSizeChange:function(t){this.curPageSize=t,this.fetchData()},handleCurrentChange:function(t){this.currentPage=t,this.fetchData()},setDefaultDate:function(){var t=moment().format("YYYY-MM-DD"),e=moment(t).add(-30,"days").format("YYYY-MM-DD");this.time=[e,t]},createParams:function(){var t={};return this.username?(t.page=1,t.userName=this.username):t.page=this.currentPage,t.size=this.curPageSize,t.beginTime=this.time[0]+" 00:00:00",t.endTime=this.time[1]+" 23:59:59",t},mapPagination:function(){this.currentPage=this.pageNum,this.curTotal=this.total,this.curPageSize=this.pageSize},fetchData:function(){var t=this;this.getJournalList(this.createParams()).then(function(){t.mapPagination()})}}),computed:r()({},Object(d.e)({journalList:function(t){return t.journal.journalList},CollectList:function(t){return t.journal.CollectList},pageSize:function(t){return t.journal.pageSize},pageNum:function(t){return t.journal.pageNum},total:function(t){return t.journal.total},isFetchingJournalData:function(t){return t.journal.isFetchingJournalData}})),mounted:function(){var t=this;this.$nextTick(function(){t.setDefaultDate(),t.fetchData(),t.getCollectList()})}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"protalPage"},[a("div",{staticClass:"wraper"},[a("div",{staticClass:"title"},[t._v("\n      平台流水\n    ")]),t._v(" "),a("div",{staticClass:"sportOrderTop"},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions2,"value-format":"yyyy-MM-dd"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),a("el-input",{staticStyle:{width:"180px","margin-right":"20px","margin-left":"20px"},attrs:{placeholder:"搜索用户昵称","suffix-icon":"el-icon-search"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.fetchData}},[t._v("搜索")])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isFetchingJournalData,expression:"isFetchingJournalData"},{name:"permission",rawName:"v-permission",value:"172a887f-de65-48a3-aa6f-90b36dac1636",expression:"'172a887f-de65-48a3-aa6f-90b36dac1636'"}],staticClass:"sportOrderBotom"},[a("div",{staticStyle:{width:"100%"}},[a("journal-tab",{attrs:{tableData:t.journalList}})],1),t._v(" "),a("div",{staticClass:"paging"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.curPageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.curTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),a("div",[a("journal-collect",{attrs:{tableData:t.CollectList}})],1)])])])},staticRenderFns:[]};var f=a("VU/8")(m,h,!1,function(t){a("0eJu")},"data-v-b3ad3e42",null);e.default=f.exports},NfqN:function(t,e){},ejuk:function(t,e){}});
//# sourceMappingURL=25.e79ab53d2ef7be4a7097.js.map