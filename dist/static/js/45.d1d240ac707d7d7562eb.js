webpackJsonp([45],{LR7u:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("LUXk"),a={data:function(){return{pickerOptions2:{shortcuts:[{text:"本周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"本月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"本年",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-31536e6),t.$emit("pick",[n,e])}}]},time:[],couponList:[],couponTotal:[],nickname:"",orderSn:""}},computed:{storeId:function(){return this.$route.query.storeId}},watch:{time:function(){this.fetchPresentList(),this.fetchPresentTotal()}},methods:{jumpTo:function(t){this.$router.push({path:"/order/sportOrder?orderSn="+t.orderSn})},setDefaultDate:function(){var t=this.moment().format("YYYY-MM-DD"),e=this.moment(t).add(-30,"days").format("YYYY-MM-DD");this.time=[e,t]},yieldParams:function(){var t={};return t.beginTime=this.time[0],t.endTime=this.time[1],t.storeId=this.storeId,this.nickname&&(t.userName=this.nickname),this.orderSn&&(t.orderSn=this.orderSn),t},fetchPresentList:function(){var t=this;Object(o.b)(this.yieldParams()).then(function(e){t.couponList=e.data.data.list})},fetchPresentTotal:function(){var t=this;Object(o.d)({beginTime:this.time[0],endTime:this.time[1],storeId:this.storeId}).then(function(e){t.couponTotal=[e.data.data]})}},mounted:function(){var t=this;this.$nextTick(function(){t.setDefaultDate(),t.fetchPresentList(),t.fetchPresentTotal()})}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"presentDetail"},[n("div",{staticClass:"date_time_picker"},[n("div",{staticStyle:{"padding-right":"10px"}},[t._v("日期")]),t._v(" "),n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions2,"value-format":"yyyy-MM-dd"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),t._v(" "),n("el-input",{staticStyle:{width:"150px","margin-right":"20px","margin-left":"20px"},attrs:{placeholder:"搜索用户昵称"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),t._v(" "),n("el-input",{staticStyle:{width:"180px","margin-right":"20px"},attrs:{placeholder:"搜索订单号"},model:{value:t.orderSn,callback:function(e){t.orderSn=e},expression:"orderSn"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.fetchPresentList}},[t._v("搜索")])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.couponList}},[n("el-table-column",{attrs:{label:"时间",prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.moment(e.row.createTime).format("YYYY-MM-DD HH:mm:ss"))+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"storeName",label:"门店"}}),t._v(" "),n("el-table-column",{attrs:{prop:"orderSn",label:"订单号"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{staticClass:"hyperlink",attrs:{href:"javascript:;"},on:{click:function(n){t.jumpTo(e.row)}}},[t._v("\n          "+t._s(e.row.orderSn)+"\n        ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"userInfo.nickname",label:"用户"}}),t._v(" "),n("el-table-column",{attrs:{prop:"consumeType",label:"消费类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1==e.row.consumeType?"运动消费":"")+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"couponType",label:"优惠券类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1==e.row.couponType?"现金优惠券":2==e.row.couponType?"折扣优惠券":3==e.row.couponType?"次抵用优惠券":4==e.row.couponType?"小时抵用优惠券":"")+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"优惠券",prop:"couponTitle"}}),t._v(" "),n("el-table-column",{attrs:{label:"抵用金额",prop:"deductionMoney"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s((e.row.deductionMoney/100).toFixed(2))+"\n      ")]}}])})],1),t._v(" "),n("div",{staticClass:"total",staticStyle:{"margin-top":"30px"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.couponTotal}},[n("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.time[0]+"至"+t.time[1])+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"storeNum",label:"门店数量"}}),t._v(" "),n("el-table-column",{attrs:{prop:"orderNum",label:"累计订单量"}}),t._v(" "),n("el-table-column",{attrs:{prop:"userNum",label:"累计用户量"}}),t._v(" "),n("el-table-column",{attrs:{prop:"consumeTypeNum",label:"累计消费类型"}}),t._v(" "),n("el-table-column",{attrs:{prop:"couponTypeNum",label:"累计优惠券类型"}}),t._v(" "),n("el-table-column",{attrs:{label:"累计优惠券",prop:"couponNum"}}),t._v(" "),n("el-table-column",{attrs:{label:"累计抵用金额",prop:"discountMoneyTotal"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s((e.row.discountMoneyTotal/100).toFixed(2))+"\n        ")]}}])})],1)],1)],1)},staticRenderFns:[]};var i=n("VU/8")(a,r,!1,function(t){n("O7zL")},"data-v-1475b508",null);e.default=i.exports},LUXk:function(t,e,n){"use strict";e.a=function(t){return o.a.post("admin/store/getCouponUseList",t)},e.c=function(t){return o.a.post("admin/Store/getCouponTotal",t)},e.b=function(t){return o.a.post("admin/store/getStoreCouponUseList",t)},e.d=function(t){return o.a.post("admin/store/getStoreCouponTotal",t)};var o=n("RyKi")},O7zL:function(t,e){}});
//# sourceMappingURL=45.d1d240ac707d7d7562eb.js.map