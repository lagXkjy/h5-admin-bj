webpackJsonp([37],{RgLA:function(e,t){},a4qU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),i=a.n(r),n=a("JaHG"),o=a("NYxO"),s={props:{tableData:{type:Array,default:function(){return[]}}},computed:i()({},Object(o.e)({userInformation:function(e){return e.auth.userInformation}}),{datas:function(){var e="",t=Object(n.b)(this.tableData);return t.forEach(function(t,a){e=(t.endTime-t.startTime)/60/1e3+"分钟",t.duration=e,t.payStatus=1==t.payStatus?"待支付":2==t.payStatus?"已支付":3==t.payStatus?"已取消":"",t.appealSign=1==t.appealSign?"申诉":2==t.appealSign?"未申诉":"",t.overtimeStatus=1==t.overtimeStatus?"正常预约":2==t.overtimeStatus&&t.exceedMinute>15?"超时预约":"正常预约",t.createTime=moment(t.createTime).format("YYYY-MM-DD HH:mm:ss"),t.motionDuration=(t.endTime-t.startTime)/60/1e3+"分钟",t.orderMoney=(t.orderMoney/100).toFixed(2)+"元",t.startTime=moment(t.startTime).format("YYYY-MM-DD HH:mm:ss"),t.endTime=moment(t.endTime).format("YYYY-MM-DD HH:mm:ss"),t.leaveStore=t.leaveStore?moment(t.leaveStore).format("YYYY-MM-DD HH:mm:ss"):"",t.intoStore=t.intoStore?moment(t.intoStore).format("YYYY-MM-DD HH:mm:ss"):"",t.exceedMinute=t.exceedMinute+"分钟",t.exceedMoney=(t.exceedMoney/100).toFixed(2)+"元",t.deductionMoney=(t.deductionMoney/100).toFixed(2)+"元",t.payMoney=(t.payMoney/100).toFixed(2)+"元",t.orderStatus=1==t.orderStatus?"待使用":2==t.orderStatus?"使用中":3==t.orderStatus?"已完成":4==t.orderStatus?"已取消":""}),t}}),data:function(){return{centerDialogVisible:!1,currentDetail:{}}},methods:i()({},Object(o.b)(["getSportOrderDetail","cancelOrder"]),{checkDetail:function(e){this.centerDialogVisible=!0,this.currentDetail=e,this.$router.push({path:"/order/sportOrderDetail?orderDetail="+e.id}),this.getSportOrderDetail({orderId:e.id})},_cancelOrder:function(){var e=this;this.centerDialogVisible=!1,this._cancelOrder({orderId:this.currentDetail.id,adminId:this.userInformation.id}).then(function(){e.$notify.success("取消订单成功")}).catch(function(){e.$notify.error("取消订单失败")})}})},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.datas}},[a("el-table-column",{attrs:{prop:"createTime",label:"下单时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderSn",label:"订单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userInfo.nickname",label:"用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"运动门店"}}),e._v(" "),a("el-table-column",{attrs:{prop:"duration",label:"预约时长"}}),e._v(" "),a("el-table-column",{attrs:{prop:"overtimeStatus",label:"摘要"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"c1cdc723-242b-4531-9095-fae113f72665",expression:"'c1cdc723-242b-4531-9095-fae113f72665'"}],on:{click:function(a){e.checkDetail(t.row)}}},[e._v("查看详情")])]}}])})],1)],1)},staticRenderFns:[]};var l={watch:{time:function(){this.fetchData1()},store:function(){this.fetchData1()},$route:function(e){e.query.orderSn&&(this.orderSn=e.query.orderSn)},orderSn:function(){this.fetchData1()}},components:{all:a("VU/8")(s,c,!1,function(e){a("RgLA")},"data-v-10a4d894",null).exports},methods:i()({},Object(o.b)(["getSportOrderList","getErrorDropDownStoreList"]),{handleClick:function(e,t){this.fetchData1()},fetchData1:function(){var e=this;this.getSportOrderList(this.createParams()).then(function(){e.mapPagination()})},createParams:function(){var e={};return this.orderSn&&(e.orderSn=this.orderSn),this.time.length>0&&(e.beginTime=this.time[0]+" 00:00:00",e.endTime=this.time[1]+" 23:59:59"),"all"!==this.store&&(e.storeId=this.store),"-1"!==this.activeName2&&(e.orderStatus=this.activeName2),e.page=this.currentPage,e.size=this.curPageSize,e},handleSizeChange:function(e){this.curPageSize=e,this.fetchData1()},handleCurrentChange:function(e){this.currentPage=e,this.fetchData1()},mapPagination:function(){this.currentPage=this.pageNum,this.curTotal=this.total,this.curPageSize=this.pageSize}}),data:function(){return{activeName2:"-1",pickerOptions2:{shortcuts:[{text:"本周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"本月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"本年",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31536e6),e.$emit("pick",[a,t])}}]},time:[],value1:"",orderSn:"",currentPage:1,pageSizes:[10,20,30,40],curPageSize:10,curTotal:0,store:"all"}},beforeRouteEnter:function(e,t,a){a(function(e){e.$nextTick(function(){e.fetchData1()})})},computed:i()({},Object(o.e)({sportOrderList:function(e){return e.sportOrder.sportOrderList},storeNameList:function(e){return e.sportOrder.storeNameList},pageSize:function(e){return e.sportOrder.pageSize},pageNum:function(e){return e.sportOrder.pageNum},total:function(e){return e.sportOrder.total},isFetchingUserWalletData:function(e){return e.userWallet.isFetchingUserWalletData},errorDropdownStoreList:function(e){return e.sportOrder.errorDropdownStoreList}}),{storeList:function(){var e=Object(n.b)(this.errorDropdownStoreList);return e.unshift({storeName:"全部门店",id:"all"}),e}}),mounted:function(){var e=this;this.getErrorDropDownStoreList(),this.$nextTick(function(){e.fetchData1()})}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"protalPage"},[a("div",{staticClass:"wraper"},[a("div",{staticClass:"title"},[e._v("运动订单")]),e._v(" "),a("div",{staticClass:"sportOrderTop"},[a("div",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.store,callback:function(t){e.store=t},expression:"store"}},e._l(e.storeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.storeName,value:e.id}})}))],1),e._v(" "),a("div",{staticStyle:{"margin-left":"20px","margin-right":"20px"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2,"value-format":"yyyy-MM-dd"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),e._v(" "),a("div",{staticClass:"searchBar"},[a("el-input",{attrs:{placeholder:"请输入完整订单号",autofocus:!0},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.fetchData1(t)}},model:{value:e.orderSn,callback:function(t){e.orderSn=t},expression:"orderSn"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1)]),e._v(" "),a("div",{directives:[{name:"permission",rawName:"v-permission",value:"626c9a54-2bd5-4129-9acf-1d9227caae00",expression:"'626c9a54-2bd5-4129-9acf-1d9227caae00'"}],staticClass:"sportOrderBottom"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isFetchingUserWalletData,expression:"isFetchingUserWalletData"}],staticStyle:{width:"100%"}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{attrs:{label:"全部",name:"-1"}},[a("all",{attrs:{tableData:e.sportOrderList}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"待使用",name:"1"}},[a("all",{attrs:{tableData:e.sportOrderList}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"使用中",name:"2"}},[a("all",{attrs:{tableData:e.sportOrderList}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"已完成",name:"3"}},[a("all",{attrs:{tableData:e.sportOrderList}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"已取消",name:"4"}},[a("all",{attrs:{tableData:e.sportOrderList}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"permission",rawName:"v-permission",value:"626c9a54-2bd5-4129-9acf-1d9227caae00",expression:"'626c9a54-2bd5-4129-9acf-1d9227caae00'"}],staticClass:"paging"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.curPageSize,"page-sizes":e.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:e.curTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])])},staticRenderFns:[]};var d=a("VU/8")(l,u,!1,function(e){a("giJJ")},"data-v-8d6c1eb4",null);t.default=d.exports},giJJ:function(e,t){}});
//# sourceMappingURL=37.130404caffc41c0e15ca.js.map