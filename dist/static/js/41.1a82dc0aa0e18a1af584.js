webpackJsonp([41],{"39LJ":function(e,t){},sgC3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("0LZo"),i=n("uGdK"),s={components:{SubTitle:a.a},data:function(){return{currentPage:1,currentSize:10,curTotal:0,userAccount:"",role:"all",personnelList:[],roles:[],isFetchingRoles:!1,isFetchingPersonnel:!1}},watch:{role:function(){this.fetchPersonnel()}},methods:{handleSizeChange:function(e){this.currentSize=e,this.fetchPersonnel()},handleCurrentChange:function(e){this.currentPage=e,this.fetchPersonnel()},mapPagination:function(e){this.currentPage=e.pageNum<1?1:e.pageNum,this.currentSize=e.pageSize,this.curTotal=e.total},switchChange:function(e){var t=this;Object(i.e)({id:e.id,status:e.status}).then(function(e){200==e.data.code?(t.$notify.success("修改状态成功"),t.fetchPersonnel()):(t.$notify.error(e.data.message||"修改状态成功失败"),t.fetchPersonnel())}).catch(function(){t.$notify.error("修改状态成功失败"),t.fetchPersonnel()})},addPersonnel:function(){this.$router.push({path:"/system/personnelConfig"})},edit:function(e){this.$router.push({path:"/system/personnelConfig?id="+e.id})},fetchRoles:function(){var e=this;this.isFetchingRoles=!0,Object(i.d)({page:1,size:1e3}).then(function(t){t.data.data.list.unshift({id:"all",roleName:"全部"}),e.roles=t.data.data.list,e.isFetchingRoles=!1}).catch(function(){e.isFetchingRoles=!1})},yieldParams:function(){var e={};return this.userAccount||"all"!=this.role?(e.username=this.userAccount,e.page=1):e.page=this.currentPage,"all"!=this.role&&(e.roleId=this.role),e.size=this.currentSize,e},fetchPersonnel:function(){var e=this;this.isFetchingPersonnel=!0,Object(i.c)(this.yieldParams()).then(function(t){e.personnelList=t.data.data.list,e.mapPagination(t.data.data),e.isFetchingPersonnel=!1}).catch(function(){e.isFetchingPersonnel=!0})}},beforeRouteEnter:function(e,t,n){n(function(e){e.fetchPersonnel(),e.fetchRoles()})},mounted:function(){var e=this;this.$nextTick(function(){e.fetchRoles(),e.fetchPersonnel()})}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"personnelPage"},[n("sub-title",{attrs:{title:"人员管理"}}),e._v(" "),n("div",{staticClass:"sportOrderTop"},[n("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"搜索用户账号"},model:{value:e.userAccount,callback:function(t){e.userAccount=t},expression:"userAccount"}}),e._v(" "),n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.fetchPersonnel}},[e._v("搜索")]),e._v(" "),n("div",{staticStyle:{"margin-right":"10px"}},[e._v("角色")]),e._v(" "),n("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.isFetchingRoles,expression:"isFetchingRoles"}],staticStyle:{"margin-right":"20px"},attrs:{placeholder:"请选择","element-loading-spinner":"el-icon-loading"},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},e._l(e.roles,function(e){return n("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})),e._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"932b9acc-fbda-4c88-93b4-ce263e389ee6",expression:"'932b9acc-fbda-4c88-93b4-ce263e389ee6'"}],attrs:{type:"primary"},on:{click:e.addPersonnel}},[e._v("新增")])],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isFetchingPersonnel,expression:"isFetchingPersonnel"},{name:"permission",rawName:"v-permission",value:"9c9c9979-2500-469d-86af-b4ffad364cfc",expression:"'9c9c9979-2500-469d-86af-b4ffad364cfc'"}],staticStyle:{width:"100%"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.personnelList}},[n("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),n("el-table-column",{attrs:{prop:"username",label:"账号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"realName",label:"真实姓名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),e._v(" "),n("el-table-column",{attrs:{prop:"roleName",label:"角色"}}),e._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.$store.state.auth.userInformation.isAdmin?n("el-switch",{directives:[{name:"permission",rawName:"v-permission",value:"e5c19f40-a544-4273-873a-a6f4319ab2b8",expression:"'e5c19f40-a544-4273-873a-a6f4319ab2b8'"}],attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){e.switchChange(t.row)}},model:{value:t.row.status,callback:function(n){e.$set(t.row,"status",n)},expression:"scope.row.status"}}):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$store.state.auth.userInformation.isAdmin&&1==e.$store.state.auth.userInformation.isAdmin?n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"9a45107e-22a2-4a5f-adf9-96f8a42b6c40",expression:"'9a45107e-22a2-4a5f-adf9-96f8a42b6c40'"}],on:{click:function(n){e.edit(t.row)}}},[e._v("编辑")]):e._e()]}}])})],1)],1),e._v(" "),n("div",{directives:[{name:"permission",rawName:"v-permission",value:"9c9c9979-2500-469d-86af-b4ffad364cfc",expression:"'9c9c9979-2500-469d-86af-b4ffad364cfc'"}],staticClass:"paging"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.currentSize,layout:"total, sizes, prev, pager, next, jumper",total:e.curTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var o=n("VU/8")(s,r,!1,function(e){n("39LJ")},"data-v-5b72dd29",null);t.default=o.exports},uGdK:function(e,t,n){"use strict";t.c=function(e){return a.a.post("admin/Jurisdiction/getListByParamUser",e)},t.d=function(e){return a.a.post("admin/Jurisdiction/getListByParamRole",e)},t.b=function(e){return a.a.post("admin/User/managerDetail",e)},t.e=function(e){return a.a.post("admin/User/managerUpdate",e)},t.a=function(e){return a.a.post("admin/User/register",e)};var a=n("RyKi")}});
//# sourceMappingURL=41.1a82dc0aa0e18a1af584.js.map