webpackJsonp([24],{"/i4m":function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTI3NjcxNzI3MzY0IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjQ0NjIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNTEyIDEwMjRDMjI5LjIzMiAxMDI0IDAgNzk0Ljc2OCAwIDUxMiAwIDIyOS4yMzIgMjI5LjIzMiAwIDUxMiAwIDc5NC43NjggMCAxMDI0IDIyOS4yMzIgMTAyNCA1MTIgMTAyNCA3OTQuNzY4IDc5NC43NjggMTAyNCA1MTIgMTAyNFpNNTYwIDI0MEM1NjAgMjEzLjQ4OCA1MzguNTEyIDE5MiA1MTIgMTkyIDQ4NS40ODggMTkyIDQ2NCAyMTMuNDg4IDQ2NCAyNDBMNDY0IDU5MkM0NjQgNjE4LjUxMiA0ODUuNDg4IDY0MCA1MTIgNjQwIDUzOC41MTIgNjQwIDU2MCA2MTguNTEyIDU2MCA1OTJMNTYwIDI0MFpNNTEyIDczNkM0ODUuNDg4IDczNiA0NjQgNzU3LjQ4OCA0NjQgNzg0IDQ2NCA4MTAuNTEyIDQ4NS40ODggODMyIDUxMiA4MzIgNTM4LjUxMiA4MzIgNTYwIDgxMC41MTIgNTYwIDc4NCA1NjAgNzU3LjQ4OCA1MzguNTEyIDczNiA1MTIgNzM2WiIgcC1pZD0iNDQ2MyIgZmlsbD0iI2Q4MWUwNiI+PC9wYXRoPjwvc3ZnPg=="},"6n2J":function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTI3NjcxNTY4MTQxIiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjM5NzMiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMCA1MTJDMCAyMjkuMjM0NzU5IDIyOS4yMzQ3NTkgMCA1MTIgMHM1MTIgMjI5LjIzNDc1OSA1MTIgNTEyLTIyOS4yMzQ3NTkgNTEyLTUxMiA1MTJTMCA3OTQuNzY1MjQxIDAgNTEyeiBtNDE5LjMxMDM0NSAxOTQuNjMwNjIxYTM1LjMxMDM0NSAzNS4zMTAzNDUgMCAwIDAgNDkuMzk5MTcyIDEuMjcxMTcybDMzNS41MTg4OTctMzExLjkzMTU4NmEzNS4zMTAzNDUgMzUuMzEwMzQ1IDAgMCAwLTQ4LjA3NTAzNS01MS43Mjk2NTVsLTMwOS4xMjQ0MTMgMjg5LjU0NDgyNy0xNDUuMTI1NTE4LTE0OS42NDUyNDFhMzUuMzEwMzQ1IDM1LjMxMDM0NSAwIDEgMC01MC42ODggNDkuMTY5NjU1bDE2OC4xMTI1NTIgMTczLjMyMDgyOHoiIHAtaWQ9IjM5NzQiIGZpbGw9IiMxYWZhMjkiPjwvcGF0aD48L3N2Zz4="},p9Ye:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Dd8w"),a=i.n(s),r=i("NYxO"),o=(i("SkOf"),i("6n2J")),n=i.n(o),l=i("/i4m"),d=i.n(l),v={name:"sportOrderDetail",data:function(){return{id:"",dialogVisible:!1,cancelRemark:"",logs:[],appealSign:2,content:"",orderId:null,createTime:"",username:"",userId:"",orderTime:"",storeName:"",appealCode:"",appealId:null,orderSn:"",intervalLabel:"",startTime:"",endTime:"",overTime:0,overMoney:0,orderMoney:0,orderStatus:0,payStatus:0,overtimeStatus:1,overtimePayStatus:1,payMoney:0,deductionMoney:0,userPhone:"",appealInfo:{},reservationPrice:0,markStyle:{width:"40px",height:"40px",backgroundImage:"url("+n.a+")",backgroundSize:"100% 100%"},imarkStyle:{width:"40px",height:"40px",backgroundImage:"url("+d.a+")",backgroundSize:"100% 100%"}}},computed:a()({},Object(r.e)({userInformation:function(t){return t.auth.userInformation}}),{realPayMoney:function(){return 2==this.overtimePayStatus?1==this.appealSign&&1==this.appealResult?this.payMoney:this.payMoney+this.overMoney:this.payMoney},logDatas:function(){var t=this,e=[];return this.logs.forEach(function(i,s){var a={};a.operatType=1==i.operatType?"用户":2==i.operatType?"管理员":3==i.operatType?"系统":"",a.createTime=t.moment(i.createTime).format("YYYY-MM-DD HH:mm:ss"),a.orderStatus=1==i.orderStatus?"待使用":2==i.orderStatus?"使用中":3==i.orderStatus?"已完成":4==i.orderStatus?"已取消":"",a.payStatus=1==i.payStatus?"待支付":2==i.payStatus?"已支付":3==i.payStatus?"已退款":"",a.operatMemo=i.operatMemo,e.push(a)}),e}}),watch:{$route:function(t){this.orderId=t.query.orderId},orderId:function(){var t=this;this.getSportOrderDetail({orderId:this.orderId}).then(function(e){t.mapOrderInfo(e)})}},methods:a()({},Object(r.b)(["getSportOrderDetail","getOrderOperationLog","cancelOrder"]),{jumpToUserDetail:function(){this.$router.push({path:"/user/userList?userDetail="+this.userId})},jumpToOrderDetail:function(t){1==t&&this.$router.push({path:"/service/abnormalOrder?orderDetail="+this.id})},handleClose:function(t){t()},cancel:function(){this.dialogVisible=!0},confirm:function(){var t=this;if(!this.cancelRemark)return this.$notify.error("取消备注不能为空");this.dialogVisible=!1,this.cancelOrder({orderId:this.orderId,adminId:this.userInformation.id,remark:this.cancelRemark}).then(function(){t.$notify.success("取消订单成功"),t.getSportOrderDetail({orderId:t.orderId}).then(function(e){t.mapOrderInfo(e)})}).catch(function(e){t.$notify.error(e||"取消订单失败")})},mapOrderInfo:function(t){this.id=t.id,this.createTime=this.moment(t.createTime).format("YYYY-MM-DD HH:mm:ss"),this.payStatus=1==t.payStatus?"待支付":2==t.payStatus?"已支付":3==t.payStatus?"已取消":"",this.userId=t.userId,this.username=t.userInfo.nickname,this.storeName=t.storeName,this.orderSn=t.orderSn,this.intervalLabel=this.moment(t.startTime).format("YYYY-MM-DD HH:mm:ss")+"-"+this.moment(t.endTime).format("YYYY-MM-DD HH:mm:ss"),this.startTime=t.intoStore?this.moment(t.intoStore).format("YYYY-MM-DD HH:mm:ss"):"",this.endTime=t.leaveStore?this.moment(t.leaveStore).format("YYYY-MM-DD HH:mm:ss"):"",this.orderTime=(t.endTime-t.startTime)/1e3/60,this.overTime=t.exceedMinute,this.orderMoney=t.orderMoney,this.overMoney=t.exceedMoney,this.payMoney=t.payMoney,this.overtimeStatus=t.overtimeStatus,this.overtimePayStatus=t.overtimePayStatus,this.reservationPrice=t.reservationPrice,this.deductionMoney=t.deductionMoney,this.userPhone=t.userInfo.mobile,this.appealSign=t.appealSign,this.appealInfo=t.appealInfo[0]?t.appealInfo[0]:{},this.appealCode=t.appealInfo[0]?t.appealInfo[0].dealCode:0,this.appealId=t.id,this.orderStatus=1==t.orderStatus?"待使用":2==t.orderStatus?"使用中":3==t.orderStatus?"已完成":4==t.orderStatus?"已取消":""}}),mounted:function(){var t=this;this.$nextTick(function(){t.orderId=t.$route.query.orderDetail,t.getSportOrderDetail({orderId:t.orderId}).then(function(e){t.mapOrderInfo(e),t.getOrderOperationLog({orderSn:t.orderSn,page:1,size:100}).then(function(e){t.logs=e.list}).catch(function(t){})})})}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"orderDetail"},[i("div",{staticClass:"handleStatus"},[i("span",[t._v("订单状态: "+t._s(t.orderStatus)+"    支付状态: "+t._s("已取消"==t.orderStatus?"已退款":t.payStatus)+" ")]),"使用中"===t.orderStatus||"待使用"===t.orderStatus?i("el-button",{attrs:{type:"primary"},on:{click:t.cancel}},[t._v("取消订单")]):t._e()],1),t._v(" "),i("el-dialog",{attrs:{title:"取消订单",center:"",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",[t._v("取消备注(必填)")]),t._v(" "),i("el-input",{attrs:{type:"textarea"},model:{value:t.cancelRemark,callback:function(e){t.cancelRemark=e},expression:"cancelRemark"}}),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确认")])],1)],1),t._v(" "),i("div",{staticClass:"orderInfo"},[i("div",{staticClass:"subTitle"},[t._v("\n      基本信息\n    ")]),t._v(" "),i("div",{staticClass:"info_left"},[i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("订单号")]),t._v(" "+t._s(t.orderSn))]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("用户昵称")]),t._v(" "),i("a",{attrs:{href:"javascript:;"},on:{click:t.jumpToUserDetail}},[t._v(t._s(t.username))])]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("联系电话")]),t._v(" "+t._s(t.userPhone))]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("预约门店")]),t._v(t._s(t.storeName))]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("下单时间")]),t._v(" "+t._s(t.createTime))]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("预约时段")]),t._v(" "+t._s(t.intervalLabel))]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("进店时间")]),t._v(" "+t._s(t.startTime))]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("预约价格")]),t._v(t._s((t.reservationPrice/100).toFixed(2))+"/分钟")]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("离店时间")]),t._v(" "+t._s(t.endTime))]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("预约时长")]),t._v(" "+t._s(t.orderTime)+"分钟")]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("超时时长")]),t._v(" "+t._s(t.overTime)+"分钟")]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("申诉状态")]),t._v(" "),i("a",{style:2==t.appealSign?"text-decoration: none; color: black":"",attrs:{href:"javascript:;"},on:{click:function(e){t.jumpToOrderDetail(t.appealSign)}}},[t._v(t._s(1==t.appealSign?"已申诉":"未申诉"))])])])]),t._v(" "),i("div",{staticClass:"orderMoney"},[i("div",{staticClass:"subTitle"},[t._v("\n      费用信息\n    ")]),t._v(" "),i("div",{staticClass:"moneyInfo"},[i("div",{staticClass:"normalMoney"},[i("div",{staticClass:"normalMoneyTitle money_title"},[t._v("正常预约费用")]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("商品单价")]),t._v(t._s((t.reservationPrice/100).toFixed(2))+"/分钟")]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("预约时长")]),t._v(t._s(t.orderTime)+"分钟")]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("订单总价")]),t._v(t._s((t.orderMoney/100).toFixed(2)))]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("订单优惠")]),t._v("-"+t._s((t.deductionMoney/100).toFixed(2)))]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("应付金额")]),t._v(t._s(((t.orderMoney-t.deductionMoney)/100).toFixed(2)))]),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"pay_status"},[i("div",{style:t.markStyle}),t._v(" "),i("div",[t._v("已支付")])])]),t._v(" "),2==t.overtimeStatus&&t.overTime>15?i("div",{staticClass:"overtimeMoney",style:1==t.overtimePayStatus?"border: 1px solid red":"border: 1px solid #e5e5e5"},[i("div",{staticClass:"overtimeMoneyTitle money_title"},[t._v("超时预约费用")]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("商品单价")]),t._v(t._s((t.reservationPrice/100).toFixed(2))+"/分钟")]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("超时时长")]),t._v(t._s(t.overTime)+"分钟")]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("订单总价")]),t._v(t._s((t.overMoney/100).toFixed(2)))]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("订单优惠")]),t._v("-"+t._s(1==t.appealSign&&1==t.appealResult?(t.overMoney/100).toFixed(2):"0.00"))]),t._v(" "),i("div",{staticClass:"info_item",staticStyle:{color:"red"}},[i("div",{staticClass:"item_subTitle"},[t._v("应付金额")]),t._v(t._s(1==t.appealSign&&1==t.appealResult?0:(t.overMoney/100).toFixed(2)))]),t._v(" "),i("div",{staticClass:"info_item"},[i("div",{staticClass:"item_subTitle"},[t._v("支付方式")]),t._v(t._s(1==t.overtimePayStatus?"-":"余额"))]),t._v(" "),i("div",{staticClass:"pay_status"},[i("div",{style:2==t.overtimePayStatus?t.markStyle:t.imarkStyle}),t._v(" "),i("div",[t._v(t._s(2==t.overtimePayStatus?"已支付":"未支付"))])])]):t._e()]),t._v(" "),i("div",{staticClass:"realPayMoney"},[t._v("订单实收: "+t._s((t.realPayMoney/100).toFixed(2)))])]),t._v(" "),i("div",{staticClass:"operationInfo"},[i("div",{staticClass:"subTitle"},[t._v("\n      操作信息\n    ")]),t._v(" "),i("div",{staticClass:"operationTable"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.logDatas}},[i("el-table-column",{attrs:{prop:"operatType",label:"操作者"}}),t._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"操作时间"}}),t._v(" "),i("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态"}}),t._v(" "),i("el-table-column",{attrs:{prop:"payStatus",label:"付款状态"}}),t._v(" "),i("el-table-column",{attrs:{prop:"operatMemo",label:"备注"}})],1)],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info_item"},[e("div",{staticClass:"item_subTitle"},[this._v("订单类型")]),this._v("运动预约")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info_item"},[e("div",{staticClass:"item_subTitle"},[this._v("支付方式")]),this._v("余额")])}]};var m=i("VU/8")(v,c,!1,function(t){i("sdna")},"data-v-d06b5852",null);e.default=m.exports},sdna:function(t,e){}});
//# sourceMappingURL=24.2a577703ab4b831ba6ad.js.map