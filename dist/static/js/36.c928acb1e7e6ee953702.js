webpackJsonp([36],{HzLW:function(e,t){},Ic8g:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),s=a("NYxO"),l=a("JaHG"),r={props:{tableData:{type:Array,default:function(){return[]}}},data:function(){return{multipleSelection:[]}},watch:{},computed:{datas:function(){var e=[];return Object(l.b)(this.tableData).forEach(function(t,a){var i={};i.id=t.id,i.nickname=t?t.nickname:"",i.sex=t?"1"==t.sex?"男":"女":"",i.record=0==t.reportStatus?"无":"有",i.credit=t.creditScore,i.phone=t?t.mobile:"",i.userId=t.userId,i.deposit=0==t.depositStatus?"未交":1==t.depositStatus?"已交":2==t.depositStatus?"免交":3==t.depositStatus?"已冻结":"",i.createTime=t.createTime,e.push(i)}),e}},methods:{toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},checkout:function(e){this.$router.push({path:"/user/userDetail?id="+e.userId})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.datas,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"用户ID",prop:"userId"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"用户昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deposit",label:"押金"}}),e._v(" "),a("el-table-column",{attrs:{prop:"record",label:"身体报告"}}),e._v(" "),a("el-table-column",{attrs:{prop:"credit",label:"信用分"}}),e._v(" "),a("el-table-column",{attrs:{label:"注册时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n      "+e._s(e.moment(t.row.createTime).format("YYYY-MM-DD HH:mm:ss"))+"\n    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"a6ddf41e-08e4-4e96-9663-c6bfb490e8b9",expression:"'a6ddf41e-08e4-4e96-9663-c6bfb490e8b9'"}],nativeOn:{click:function(a){e.checkout(t.row)}}},[e._v("查看")])]}}])})],1)},staticRenderFns:[]};var o={components:{UserTable:a("VU/8")(r,c,!1,function(e){a("pNxp")},"data-v-adc602be",null).exports},computed:n()({},Object(s.e)({users:function(e){return e.users.users},isFetchingData:function(e){return e.users.isFetchingData},pageSize:function(e){return e.users.pageSize},pageNum:function(e){return e.users.pageNum},total:function(e){return e.users.total}})),data:function(){return{userMobile:"",nickname:"",userId:"",currentPage4:1,pageSizes:[10,20,30,40],curPageSize:10,curTotal:0,userStatus:"全部",sexvalue:"",depositvalue:"all",reportvalue:"all",creditvalue:"all",input:"",sexOptions:[{value:"all",label:"全部"},{value:"1",label:"男"},{value:"0",label:"女"}],reportOptions:[{value:"all",label:"全部"},{value:0,label:"无"},{value:1,label:"有"}],depositOptions:[{value:"all",label:"全部"},{value:0,label:"未交"},{value:1,label:"已交"}],percentMin:"",percentMax:"",percentLabel:"全部",customPercent:{isCustom:!0,max:"",min:""},creditOptions:[{command:{max:1e3,min:0},label:"全部"},{command:{max:100,min:0},label:"100分以下"},{command:{max:80,min:0},label:"80分以下"},{command:{max:60,min:0},label:"60分以下"},{command:{max:40,min:0},label:"40分以下"},{command:{max:20,min:0},label:"20分以下"}]}},watch:{percentMin:function(){this.fetchData()},percentMax:function(){this.fetchData()},depositvalue:function(){this.fetchData()},reportvalue:function(){this.fetchData()}},methods:n()({},Object(s.b)(["getUsers"]),{handleClick:function(e,t){e&&(this.percentLabel=e.label,this.percentMin=e.command.min,this.percentMax=e.command.max,this.customPercent.min="",this.customPercent.max="")},custom:function(){if(this.customPercent.min&&this.customPercent.max&&!isNaN(Number(this.customPercent.min))&&!isNaN(Number(this.customPercent.max))){if(this.customPercent.min>=this.customPercent.max)return this.$notify.error("起始百分比应小于结束百分比"),this.customPercent.min="",void(this.customPercent.max="");if(Number(this.customPercent.min)<0||Number(this.customPercent.max)>999)return this.$notify.error("起始百分比不能小于0,结束百分比不能大于999"),this.customPercent.min="",void(this.customPercent.max="");this.percentLabel=parseInt(this.customPercent.min)+"分-"+parseInt(this.customPercent.max)+"分",this.percentMin=parseInt(this.customPercent.min),this.percentMax=parseInt(this.customPercent.max)}else this.$notify.error("区间不能为空,且为整数")},searchByMobile:function(){var e=this;if(this.depositvalue="all",this.reportvalue="all",this.creditvalue="all",this.userMobile&&!this.isPhoneAvailable(this.userMobile))return this.$notify.error("请输入有效的手机号");this.getUsers({nickname:this.nickname,userId:this.userId,mobile:this.userMobile}).then(function(){e.mapPagination()})},isPhoneAvailable:function(e){return!!/^[1][3,4,5,7,8,6,9][0-9]{9}$/.test(e)},handleSizeChange:function(e){this.curPageSize=e,this.fetchData()},handleCurrentChange:function(e){this.currentPage4=e,this.fetchData()},mapPagination:function(){this.currentPage4=this.pageNum,this.curTotal=this.total,this.curPageSize=this.pageSize},fetchData:function(){var e=this;this.userMobile="",this.getUsers(this.computeParams()).then(function(){e.mapPagination()})},computeParams:function(){var e={};return"all"!==this.depositvalue&&(e.depositStatus=this.depositvalue),"all"!==this.reportvalue&&(e.reportStatus=this.reportvalue),e.startScore=this.percentMin,e.endScore=this.percentMax,e.page=this.currentPage4,e.size=this.curPageSize,e}}),beforeRouteEnter:function(e,t,a){a(function(e){e.$nextTick(function(){e.fetchData()})})},mounted:function(){var e=this;this.$nextTick(function(){e.fetchData()})}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"protalPage"},[a("div",{staticClass:"usersPage"},[a("div",{staticClass:"title"},[e._v("\n      用户管理\n    ")]),e._v(" "),a("div",{staticClass:"filter_search"},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入手机号"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchByMobile(t)}},model:{value:e.userMobile,callback:function(t){e.userMobile=t},expression:"userMobile"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入用户昵称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchByMobile(t)}},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入用户ID"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchByMobile(t)}},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.searchByMobile}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"userSelectors"},[a("div",{staticClass:"usersSubTitle"},[e._v("押金")]),e._v(" "),a("el-select",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{placeholder:"请选择"},model:{value:e.depositvalue,callback:function(t){e.depositvalue=t},expression:"depositvalue"}},e._l(e.depositOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("div",{staticClass:"usersSubTitle"},[e._v("身体报告")]),e._v(" "),a("el-select",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{placeholder:"请选择"},model:{value:e.reportvalue,callback:function(t){e.reportvalue=t},expression:"reportvalue"}},e._l(e.reportOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("div",{staticClass:"usersSubTitle"},[e._v("信用分")]),e._v(" "),a("div",{staticClass:"selector_item",staticStyle:{"margin-right":"20px"}},[a("el-dropdown",{attrs:{"split-button":"",trigger:"click","hide-on-click":!1},on:{command:e.handleClick}},[e._v("\n        "+e._s(e.percentLabel)+"\n        "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e._l(e.creditOptions,function(t,i){return a("el-dropdown-item",{key:i,attrs:{command:t}},[e._v(e._s(t.label))])}),e._v(" "),a("el-dropdown-item",{attrs:{command:!1}},[a("div",[e._v("自定义")]),e._v(" "),a("el-input",{staticStyle:{width:"110px"},model:{value:e.customPercent.min,callback:function(t){e.$set(e.customPercent,"min",t)},expression:"customPercent.min"}},[a("template",{slot:"append"},[e._v("分")])],2),e._v("\n            至\n            "),a("el-input",{staticStyle:{width:"110px"},model:{value:e.customPercent.max,callback:function(t){e.$set(e.customPercent,"max",t)},expression:"customPercent.max"}},[a("template",{slot:"append"},[e._v("分")])],2),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){t.stopPropagation(),e.custom(t)}}},[e._v("确认")])],1)],2)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isFetchingData,expression:"isFetchingData"},{name:"permission",rawName:"v-permission",value:"2963b5cf-7c04-4820-88f9-1d00608c01fa",expression:"'2963b5cf-7c04-4820-88f9-1d00608c01fa'"}],staticClass:"deviceTableBox pageTable"},[a("user-table",{attrs:{tableData:e.users}}),e._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":e.pageSizes,"page-size":e.curPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.curTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])])},staticRenderFns:[]};var p=a("VU/8")(o,u,!1,function(e){a("HzLW")},"data-v-1cb050f0",null);t.default=p.exports},pNxp:function(e,t){}});
//# sourceMappingURL=36.c928acb1e7e6ee953702.js.map