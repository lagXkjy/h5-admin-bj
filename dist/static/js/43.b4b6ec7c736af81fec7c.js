webpackJsonp([43],{"/XhD":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("//Fk"),i=a.n(n),s=a("mvHQ"),r=a.n(s),o=a("EfP4"),c=a("ICCG"),u={data:function(){return{currentPage:1,curPageSize:10,curTotal:0,checkAll:!0,bodies:[],selectedBodies:[],isIndeterminate:!1,courseName:"",courseId:"",courses:[],isLoadingCourse:!1,isCreate:0,planCourseId:0}},watch:{selectedBodies:function(){this.fetchCourses()}},computed:{},beforeRouteEnter:function(e,t,a){a(function(e){e.$nextTick(function(){e.fetchTrainingParts().then(function(){e.fetchCourses()})})})},methods:{handleSizeChange:function(e){this.curPageSize=e,this.fetchCourses()},handleCurrentChange:function(e){this.currentPage=e,this.fetchCourses()},mapPagination:function(e){this.currentPage=e.pageNum<1?1:e.pageNum,this.curPageSize=e.pageSize,this.curTotal=e.total},removeCourse:function(e){var t=this;confirm("确定要删除吗?")&&Object(c.d)({id:e.planCourseId}).then(function(e){if(200==e.data.code)return t.$notify.success("删除成功"),void t.fetchCourses();t.$notify.error("删除失败")}).catch(function(){t.$notify.error("删除失败")})},editCourse:function(e){this.isCreate=0,this.planCourseId=e.planCourseId,this.$router.push({path:"/training/courseBase?isCreate="+this.isCreate+"&planCourseId="+this.planCourseId})},createCourse:function(){this.isCreate=1,this.$router.push({path:"/training/courseBase?isCreate="+this.isCreate})},handleCheckAllChange:function(e){this.selectedBodies=e?this.bodies.map(function(e){return e.id}):[],this.isIndeterminate=!1},handleCheckedBodiesChange:function(e){var t=e.length;this.checkAll=t===this.bodies.length,this.isIndeterminate=t>0&&t<this.bodies.length},createParams:function(){var e={};return e.page=this.currentPage,e.size=this.curPageSize,this.courseName&&(e.courseName=this.courseName),this.courseId&&(e.courseId=this.courseId),e.planBodyIds=r()(this.selectedBodies),e},fetchTrainingParts:function(){var e=this;return new i.a(function(t,a){Object(o.a)({page:1,size:100}).then(function(a){e.bodies=a.data.data.list,e.selectedBodies=e.bodies.map(function(e){return e.id}),t()}).catch(function(){a()})})},fetchCourses:function(){var e=this;this.isLoadingCourse=!0,Object(c.b)(this.createParams()).then(function(t){t.data.data.list.forEach(function(t,a){t.createTime=e.moment(t.createTime).format("YYYY-MM-DD HH:mm:ss"),t.bodyNames=t.bodies.map(function(e){return e.planBodyName}).join(";")}),e.courses=t.data.data.list,e.mapPagination(t.data.data),e.isLoadingCourse=!1}).catch(function(){e.isLoadingCourse=!1})}},mounted:function(){var e=this;this.$nextTick(function(){e.fetchTrainingParts().then(function(){e.fetchCourses()})})}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"coursesPage"},[a("div",{staticClass:"checkboxs"},[a("div",[e._v("训练部位:")]),e._v(" "),a("el-checkbox",{staticStyle:{"margin-right":"10px"},attrs:{indeterminate:e.isIndeterminate,border:""},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedBodiesChange},model:{value:e.selectedBodies,callback:function(t){e.selectedBodies=t},expression:"selectedBodies"}},e._l(e.bodies,function(t,n){return a("el-checkbox",{key:n,attrs:{label:t.id,border:""}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("div",{staticClass:"selectors"},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"课程名称"},model:{value:e.courseName,callback:function(t){e.courseName=t},expression:"courseName"}}),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"课程ID"},model:{value:e.courseId,callback:function(t){e.courseId=t},expression:"courseId"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.fetchCourses}},[e._v("搜索")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"c663d037-6d16-4c2e-9fb1-d0357e08da58",expression:"'c663d037-6d16-4c2e-9fb1-d0357e08da58'"}],attrs:{type:"primary"},on:{click:e.createCourse}},[e._v("新增课程")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoadingCourse,expression:"isLoadingCourse"}],staticStyle:{width:"100%"},attrs:{data:e.courses}},[a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),e._v(" "),a("el-table-column",{attrs:{label:"ID",prop:"planCourseId",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{label:"课程名称",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"训练基础值",prop:"displayStatus",width:"400px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.courseSportVoList,function(t,n){return a("div",{key:n},[e._v("\n          "+e._s(n+1)+"."+e._s(3==t.sportType?"拉伸运动":1==t.sportType?"无氧运动":2==t.sportType?"有氧运动":"")+":\n          "),t.stretchExercise?a("span",[e._v(e._s(t.stretchExercise.name))]):e._e(),e._v(" "),t.facilityTypeUnitVoList?a("span",e._l(t.facilityTypeUnitVoList,function(t,n){return a("span",{key:n},[e._v("\n              #"+e._s(t.facilityName)+"#\n              "),a("span",{staticStyle:{color:"blue"}},[e._v("(\n                "),e._l(t.unitInfoVoList,function(t,n){return a("span",{key:n},[e._v("\n                  "+e._s(t.unitValue)+e._s(t.unitSymbol)+";\n                ")])}),e._v(" )")],2)])})):e._e()])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"训练部位",prop:"bodyNames"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",prop:"time"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"c4e24745-f68a-43fc-aae7-071ae4ddfd64",expression:"'c4e24745-f68a-43fc-aae7-071ae4ddfd64'"}],attrs:{type:"primary",plain:""},on:{click:function(a){e.editCourse(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"9a113608-0ab3-4133-a24e-9393f445373f",expression:"'9a113608-0ab3-4133-a24e-9393f445373f'"}],attrs:{type:"danger",plain:""},on:{click:function(a){e.removeCourse(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{directives:[{name:"permission",rawName:"v-permission",value:"dc9d5918-19ea-48ea-b594-fb700b9ab5dd",expression:"'dc9d5918-19ea-48ea-b594-fb700b9ab5dd'"}],staticClass:"paginationBox",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.curPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.curTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(u,l,!1,function(e){a("Ti8p")},"data-v-02e6cbbb",null);t.default=d.exports},ICCG:function(e,t,a){"use strict";t.b=function(e){return n.a.post("admin/Plan/getPlanCourseByParam",e)},t.a=function(e){return n.a.post("admin/Plan/getCourseDetail",e)},t.c=function(e){return n.a.post("admin/Plan/planStretchExerciseList",e)},t.g=function(e){return n.a.post("admin/Plan/planStretchExerciseSave",e)},t.e=function(e){return n.a.post("admin/Plan/planStretchExerciseDelete",e)},t.f=function(e){return n.a.post("admin/Plan/uploadPlanCourse",e)},t.d=function(e){return n.a.post("admin/Plan/deletePlanCourse",e)};var n=a("RyKi")},Ti8p:function(e,t){}});
//# sourceMappingURL=43.b4b6ec7c736af81fec7c.js.map