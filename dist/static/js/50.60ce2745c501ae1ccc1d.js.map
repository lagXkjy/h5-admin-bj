{"version":3,"sources":["webpack:///src/pages/operation/users/userSportDetail.vue","webpack:///./src/pages/operation/users/userSportDetail.vue?fe28","webpack:///./src/pages/operation/users/userSportDetail.vue"],"names":["userSportDetail","userId","storeName","statisticDate","orderSn","_iteratorNormalCompletion","unit","_step","value","obj","_this","this","facilityTypeName","sportLength","sportCalorie","id","then","res","sportDataVoList","getUnitKeys","_this2","voList","orderInfo","total","list","_this3","fetchData","users_userSportDetail","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","font-size","font-weight","margin-bottom","_v","_s","color","startTime","moment","format","endTime","attrs","title","dialog_facilityName","visible","dialogVisible","width","center","on","update:visible","$event","scopedSlots","_u","key","fn","scope","dialog_sportLength","dialog_sportCalorie","isLoading","_e","data","sportData","type","label","_l","item","index","prop","config","find","configitem","field","row","tableData","plain","click","checkoutDetail","totalData","totalsportLength","toFixed","totalsportCalorie","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/50.60ce2745c501ae1ccc1d.js","sourcesContent":["<template>\n  <div class=\"userSportDetailPage\">\n    <div style=\"font-size: 22px;font-weight: 600;margin-bottom: 10px;\">门店: {{storeName}}</div>\n    <div style=\"font-size: 10px;color: #999999\">预约时间:{{orderInfo.startTime ? moment(orderInfo.startTime).format('YYYY-MM-DD HH:mm:ss') : '-'}}至{{orderInfo.endTime ? moment(orderInfo.endTime).format('YYYY-MM-DD HH:mm:ss') : '-'}} 订单号: {{orderSn}}</div>\n\n    <el-dialog :title=\"dialog_facilityName\" :visible.sync=\"dialogVisible\" width=\"60%\" center>\n      <template slot-scope=\"scope\">\n        <div class=\"dialog_header\">\n          <span>器械:{{dialog_facilityName}}</span>\n          <span>时长:{{dialog_sportLength}}</span>\n          <span>消耗:{{dialog_sportCalorie}}</span>\n        </div>\n        <el-table :data=\"sportData\" style=\"width: 100%\" v-if=\"!isLoading\">\n          <el-table-column type=\"index\" label=\"序号\">\n          </el-table-column>\n          <el-table-column v-for=\"(item, index) in unitKeys\" :key=\"index\"  :prop=\"item\" :label=\"config.find(configitem => configitem.field == item).label\">\n            <template slot-scope=\"scope\">\n              {{scope.row[item] ? scope.row[item]+ config.find(configitem => configitem.field == item).unit : 'N/A'}}\n            </template>\n          </el-table-column>\n        </el-table>\n      </template>\n    </el-dialog>\n    <div class=\"tableBox\">\n      <el-table :data=\"tableData\" style=\"width: 100%\">\n          <el-table-column prop=\"facilityTypeName\" label=\"项目\">\n          </el-table-column>\n          <el-table-column prop=\"sportLength\" label=\"时长\">\n          </el-table-column>\n          <el-table-column prop=\"sportUnity\" label=\"距离/次数\">\n          </el-table-column>\n          <el-table-column prop=\"sportCalorie\" label=\"消耗卡路里\">\n          </el-table-column>\n           <el-table-column label=\"操作\">\n             <template slot-scope=\"scope\">\n               <el-button type=\"primary\" plain @click=\"checkoutDetail(scope.row)\">详细数据</el-button>\n             </template>\n          </el-table-column>\n        </el-table>\n    </div>\n    <div style=\"font-size: 18px; font-weight: 600\"> \n      <span>运动总时长: {{totalData.totalsportLength ? (totalData.totalsportLength/60).toFixed(2) : 0}}分钟</span>\n      <span>消耗总卡路里: {{totalData.totalsportCalorie ? (totalData.totalsportCalorie/1000).toFixed(3) : 0}}kcal</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getUserSportDetailByDate, getSportFacilityDetail  } from 'api/operation/users';\n\nexport default {\n  name: 'userSportDetail',\n  data() {\n    return {\n      dialog_facilityName: '',\n      dialog_sportLength: '',\n      dialog_sportCalorie: '',\n      dialog_sportDataVoList: [],\n      sportData: [],\n      dialogVisible: false,\n      id: '',\n      tableData: [],\n      totalData: {},\n      orderInfo: {},\n      unitKeys: [],\n      isLoading: false,\n      config: [\n        {\n          label: '放松时间',\n          field: 'cooldown',\n          unit: '秒'\n        },\n        {\n          label: '重量',\n          field: 'heavy',\n          unit: 'kg'\n        },\n        {\n          label: '平局坡度',\n          field: 'incline',\n          unit: '%',\n        },\n        {\n          label: '平均速度', \n          field: 'speed',\n          unit: 'km/h',\n        },\n        {\n          label: '耗时',\n          field: 'time',\n          unit: '秒'\n        },\n        {\n          label: '瓦特',\n          field: 'watt',\n          unit: 'w'\n        },\n        {\n          label: '次数',\n          field: 'times',\n          unit: '次'\n        }\n      ]\n    }\n  },\n  computed: {\n    userId() {\n      return this.$route.query.userId;\n    },\n    storeName() {\n      return this.$route.query.storeName;\n    },\n    statisticDate() {\n      return this.$route.query.statisticDate\n    },\n    orderSn() {\n      return this.$route.query.orderSn\n    },\n    // unitKeys() {\n    //   if (this.sportData.length == 0) {\n    //     return []\n    //   } else {\n    //     let obj = this.sportData[0];\n    //     for (let unit of Object.keys(obj)) {\n    //       if (!obj[unit]) {\n    //         delete obj[unit]\n    //       }\n    //     }\n    //     console.log(Object.keys(obj))\n    //     return Object.keys(obj)\n    //   }\n    // },\n    // totalsportLength() {\n    //   let total = 0;\n    //   this.tableData.forEach( (item, index) => {\n    //     total += item.sportLength\n    //   })\n    //   total = (total/60).toFixed(2);\n    //   return total;\n    //  },\n    // totalsportCalorie() {\n    //   let total = 0;\n    //   this.tableData.forEach( (item, index) => {\n    //     total += item.sportCalorie;\n    //   })\n    //   total = (total/1000).toFixed(3);\n    //   return total;\n    // }\n  },\n  methods: {\n    getUnitKeys() {\n      if (this.sportData.length == 0) {\n        this.unitKeys = []\n      } else {\n        let obj = this.sportData[0];\n        for (let unit of Object.keys(obj)) {\n          if (!obj[unit]) {\n            delete obj[unit]\n          }\n        }\n        this.unitKeys =  Object.keys(obj)\n      }\n    },\n    checkoutDetail(row) {\n      this.isLoading = true;\n      this.dialogVisible = true;\n      this.dialog_facilityName = row.facilityTypeName;\n      this.dialog_sportLength = row.sportLength;\n      this.dialog_sportCalorie = row.sportCalorie;\n      getSportFacilityDetail({\n        id: row.id\n      }).then( (res) => {\n          this.sportData = res.data.data.sportDataVoList;\n          this.getUnitKeys();\n          this.isLoading = false;\n      }).catch( () => {\n        this.isLoading = false;\n      })\n      // this.dialog_sportCalorie = row.sportCalorie ? (row.sportCalorie/1000).toFixed(3) : '';\n      // this.dialog_sportLength = row.sportLength ? (row.sportLength / 60).toFixed(2) : '';\n      // this.sportData = row.sportData ? JSON.parse(row.sportData) : [];\n    },\n    fetchData() {\n       getUserSportDetailByDate({\n        userId: this.userId,\n        statisticDate: this.statisticDate,\n        orderSn: this.orderSn\n      }).then( (res) => {\n          // this.tableData = res.data.data; \n          this.isFetchingData = false;\n          if (res.data.code == 200) {\n            let list = res.data.data.list.voList;\n            this.orderInfo = res.data.data.list.orderInfo;\n            this.totalData = res.data.data.total;\n            list.forEach( (item, index) => {\n              item.sportUnity = item.sportTimes == 0 ? (item.sportDistance + '米') : (item.sportTimes + '次');\n              item.sportCalorie = (item.sportCalorie / 1000) + 'kcal'\n              item.sportLength = (item.sportLength / 60).toFixed(2) + '分钟'\n            })\n            this.tableData = list;\n          }\n      }).catch( () => {\n        // this.isFetchingData = false;\n      })\n    }\n  },\n  mounted() {\n    this.$nextTick( () => {\n      this.fetchData();\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~assets/style/utils';\n\n.userSportDetailPage {\n  width: 100%;\n  box-sizing: border-box;\n  padding: 20px;\n}\n\n.dialog_header {\n  background-color: #e5e5e5;\n  box-sizing: border-box;\n  padding: 10px;\n  @include flexbox;\n  @include justify-content(space-around);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/operation/users/userSportDetail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"userSportDetailPage\"},[_c('div',{staticStyle:{\"font-size\":\"22px\",\"font-weight\":\"600\",\"margin-bottom\":\"10px\"}},[_vm._v(\"门店: \"+_vm._s(_vm.storeName))]),_vm._v(\" \"),_c('div',{staticStyle:{\"font-size\":\"10px\",\"color\":\"#999999\"}},[_vm._v(\"预约时间:\"+_vm._s(_vm.orderInfo.startTime ? _vm.moment(_vm.orderInfo.startTime).format('YYYY-MM-DD HH:mm:ss') : '-')+\"至\"+_vm._s(_vm.orderInfo.endTime ? _vm.moment(_vm.orderInfo.endTime).format('YYYY-MM-DD HH:mm:ss') : '-')+\" 订单号: \"+_vm._s(_vm.orderSn))]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.dialog_facilityName,\"visible\":_vm.dialogVisible,\"width\":\"60%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"dialog_header\"},[_c('span',[_vm._v(\"器械:\"+_vm._s(_vm.dialog_facilityName))]),_vm._v(\" \"),_c('span',[_vm._v(\"时长:\"+_vm._s(_vm.dialog_sportLength))]),_vm._v(\" \"),_c('span',[_vm._v(\"消耗:\"+_vm._s(_vm.dialog_sportCalorie))])]),_vm._v(\" \"),(!_vm.isLoading)?_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.sportData}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\"}}),_vm._v(\" \"),_vm._l((_vm.unitKeys),function(item,index){return _c('el-table-column',{key:index,attrs:{\"prop\":item,\"label\":_vm.config.find(function (configitem) { return configitem.field == item; }).label},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n            \"+_vm._s(scope.row[item] ? scope.row[item]+ _vm.config.find(function (configitem) { return configitem.field == item; }).unit : 'N/A')+\"\\n          \")]}}])})})],2):_vm._e()]}}])}),_vm._v(\" \"),_c('div',{staticClass:\"tableBox\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"facilityTypeName\",\"label\":\"项目\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"sportLength\",\"label\":\"时长\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"sportUnity\",\"label\":\"距离/次数\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"sportCalorie\",\"label\":\"消耗卡路里\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.checkoutDetail(scope.row)}}},[_vm._v(\"详细数据\")])]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"font-size\":\"18px\",\"font-weight\":\"600\"}},[_c('span',[_vm._v(\"运动总时长: \"+_vm._s(_vm.totalData.totalsportLength ? (_vm.totalData.totalsportLength/60).toFixed(2) : 0)+\"分钟\")]),_vm._v(\" \"),_c('span',[_vm._v(\"消耗总卡路里: \"+_vm._s(_vm.totalData.totalsportCalorie ? (_vm.totalData.totalsportCalorie/1000).toFixed(3) : 0)+\"kcal\")])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-77682578\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/operation/users/userSportDetail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-77682578\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./userSportDetail.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./userSportDetail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./userSportDetail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-77682578\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./userSportDetail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-77682578\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/operation/users/userSportDetail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}