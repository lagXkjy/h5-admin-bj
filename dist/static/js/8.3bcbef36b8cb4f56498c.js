webpackJsonp([8],{"5zde":function(e,t,i){i("zQR9"),i("qyJz"),e.exports=i("FeBl").Array.from},GdfG:function(e,t){},Gu7T:function(e,t,i){"use strict";t.__esModule=!0;var n,s=i("c/Tr"),r=(n=s)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return(0,r.default)(e)}},SpJ9:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Gu7T"),s=i.n(n),r=i("mvHQ"),o=i.n(r),a=i("0LZo"),c=i("l5Y/"),u={name:"roleConfig",data:function(){return{role_name:"",list:[],permissionIds:[],strictly:!1,isSetting:!1,isFetchingPermission:!1,defaultProps:{children:"menuList",label:"menuName"}}},components:{SubTitle:a.a},computed:{isCreate:function(){return!this.roleId},roleId:function(){return this.$route.query.id}},methods:{handleClick:function(e,t,i){},verifyIds:function(){var e=this.$refs.tree.getCheckedKeys();return e.find(function(e){return 1==e})||e.unshift(1),o()(e)},_addRole:function(){var e=this;confirm("确认添加此角色吗?")&&(this.isSetting=!0,Object(c.a)({ids:this.verifyIds(),roleName:this.role_name,adminId:this.$store.state.auth.userInformation.id}).then(function(t){200==t.data.code?(e.isSetting=!1,e.$notify.success("添加角色成功"),e.$router.push({path:"/system/role"})):e.$notify.error(t.date.message||"添加角色失败")}).catch(function(){e.isSetting=!1,e.$notify.error("添加角色失败")}))},changePermission:function(){var e=this;confirm("确认修改角色权限吗?")&&(this.isSetting=!0,Object(c.f)({id:this.roleId,ids:this.verifyIds(),roleName:this.role_name,adminId:this.$store.state.auth.userInformation.id,type:1}).then(function(t){200==t.data.code?setTimeout(function(){e.$notify.success("修改角色权限成功"),e.isSetting=!1,e.$router.push({path:"/system/role"})},2e3):e.$notify.error(t.data.message||"修改角色权限失败")}).catch(function(){e.isSetting=!1,e.$notify.error("修改角色权限失败")}))},setCheckedKeys:function(e){this.$refs.tree.setCheckedKeys(e)},steamroller:function(e){for(;e.some(function(e){return Array.isArray(e.menuList)});){var t;e=(t=[]).concat.apply(t,s()(e))}return e},getPermissionIds:function(e){var t=this;e.forEach(function(e){1==e.isPermission&&(t.permissionIds.push(e.id),e.menuList&&t.getPermissionIds(e.menuList))})},fetchPermission:function(){var e=this;this.isFetchingPermission=!0,Object(c.c)({roleId:this.roleId}).then(function(t){var i=t.data.data?t.data.data:[];i.forEach(function(e){1!==e.id||(e.disabled=!0)}),e.list=i,e.strictly=!0,e.$nextTick(function(){e.getPermissionIds(i),e.strictly=!0,e.setCheckedKeys(e.permissionIds,!0),e.isFetchingPermission=!1}),e.strictly=!1}).catch(function(){e.isFetchingPermission=!1})},fetchAllPermission:function(){var e=this;this.isFetchingPermission=!0,Object(c.b)().then(function(t){e.list=t.data.data,e.setCheckedKeys([1]),e.list.forEach(function(e){1!==e.id||(e.disabled=!0)}),e.isFetchingPermission=!1}).catch(function(){e.isFetchingPermission=!1})}},mounted:function(){var e=this;this.$nextTick(function(){e.isCreate?e.fetchAllPermission():(e.role_name=e.$route.query.roleName,e.fetchPermission())})}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"permissionConfigPage"},[i("sub-title",{attrs:{title:"角色配置"}}),e._v(" "),i("div",{staticClass:"config_role_name"},[i("div",[i("span",[e._v("角色名")]),e._v(" "),i("el-input",{staticStyle:{width:"300px"},model:{value:e.role_name,callback:function(t){e.role_name=t},expression:"role_name"}}),e._v(" "),e.isCreate?i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.isSetting,expression:"isSetting"}],attrs:{type:"primary","element-loading-spinner":"el-icon-loading"},on:{click:e._addRole}},[e._v("新增角色")]):i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.isSetting,expression:"isSetting"}],attrs:{type:"primary","element-loading-spinner":"el-icon-loading"},on:{click:e.changePermission}},[e._v("修改配置")])],1)]),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isFetchingPermission,expression:"isFetchingPermission"}],staticClass:"permission_tree",attrs:{"element-loading-text":"正在生成权限树","element-loading-spinner":"el-icon-loading"}},[i("el-tree",{ref:"tree",attrs:{data:e.list,"show-checkbox":"","check-strictly":!0,"node-key":"id",props:e.defaultProps,accordion:"","render-after-expand":!1},on:{"node-click":e.handleClick}})],1)],1)},staticRenderFns:[]};var l=i("VU/8")(u,d,!1,function(e){i("GdfG")},"data-v-5740390e",null);t.default=l.exports},"c/Tr":function(e,t,i){e.exports={default:i("5zde"),__esModule:!0}},fBQ2:function(e,t,i){"use strict";var n=i("evD5"),s=i("X8DO");e.exports=function(e,t,i){t in e?n.f(e,t,s(0,i)):e[t]=i}},"l5Y/":function(e,t,i){"use strict";t.d=function(e){return n.a.post("admin/Jurisdiction/getListByParamRole",e)},t.a=function(e){return n.a.post("admin/Jurisdiction/addRole",e)},t.f=function(e){return n.a.post("admin/Jurisdiction/updateRole",e)},t.e=function(e){return n.a.post("admin/Jurisdiction/delRole",e)},t.c=function(e){return n.a.post("admin/Jurisdiction/getRolePermissionMenuList",e)},t.b=function(){return n.a.post("admin/Jurisdiction/getMenuList",{isAllMenu:1})};var n=i("RyKi")},qyJz:function(e,t,i){"use strict";var n=i("+ZMJ"),s=i("kM2E"),r=i("sB3e"),o=i("msXi"),a=i("Mhyx"),c=i("QRG4"),u=i("fBQ2"),d=i("3fs2");s(s.S+s.F*!i("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,i,s,l,f=r(e),m="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,v=void 0!==g,p=0,y=d(f);if(v&&(g=n(g,h>2?arguments[2]:void 0,2)),void 0==y||m==Array&&a(y))for(i=new m(t=c(f.length));t>p;p++)u(i,p,v?g(f[p],p):f[p]);else for(l=y.call(f),i=new m;!(s=l.next()).done;p++)u(i,p,v?o(l,g,[s.value,p],!0):s.value);return i.length=p,i}})}});
//# sourceMappingURL=8.3bcbef36b8cb4f56498c.js.map