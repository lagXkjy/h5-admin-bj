{"version":3,"sources":["webpack:///src/pages/user/userFace/Page.vue","webpack:///./src/api/user/userFace.js","webpack:///./src/pages/user/userFace/Page.vue?42eb","webpack:///./src/pages/user/userFace/Page.vue"],"names":["Page","DropDownImage","fetchData","nickname","params","_this","this","userId","axiosClient","post","then","res","catch","usermobile","currentPage","currentSize","faceSign","_this2","createParams","format","list","data","pageNum","pageSize","total","size","page","_this3","userFace_Page","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","placeholder","model","value","callback","$$v","expression","_l","item","key","id","label","staticStyle","width","margin-right","type","on","click","title","center","visible","dialogVisible","update:visible","$event","src","curImg","alt","directives","name","rawName","datas","prop","scopedSlots","_u","fn","scope","row","max-width","faceImg","showImg","remove","current-page","page-sizes","pageSizes","page-size","layout","curTotal","size-change","handleSizeChange","current-change","handleCurrentChange","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/61.8025afccd05db5995d48.js","sourcesContent":["<template>\n  <div class=\"userFacePage\">\n    <div class=\"title\">\n      用户人脸采集\n    </div>\n\n    <div class=\"selectors\">\n      <div class=\"facesign\">\n        <div class=\"subTitle\">用户人脸</div>\n        <el-select v-model=\"faceSign\" placeholder=\"请选择\">\n          <el-option v-for=\"item in faceSignOptions\" :key=\"item.id\" :label=\"item.label\" :value=\"item.id\">\n          </el-option>\n        </el-select>\n      </div>\n\n      <el-input placeholder=\"搜索用户昵称\" style=\"width: 200px; margin-right: 10px\" v-model=\"nickname\"></el-input>\n      <el-input placeholder=\"搜索用户手机号\" style=\"width: 200px; margin-right: 10px\" v-model=\"usermobile\"></el-input>\n      <el-input placeholder=\"搜索用户ID\" style=\"width: 200px; margin-right: 10px\" v-model=\"userId\"></el-input>\n\n      <el-button type=\"primary\" @click=\"fetchData\">搜索</el-button>\n    </div>\n\n    <el-dialog title=\"图片\" center :visible.sync=\"dialogVisible\" width=\"60%\">\n      <img :src=\"curImg\" alt=\"\">\n    </el-dialog>\n\n    <el-table :data=\"datas\" style=\"width: 100%\" v-loading=\"isFetchingFaceList\" v-permission=\"'e1806150-a740-4f6e-8531-8082a17cfdd8'\">\n      <el-table-column label=\"采集时间\" prop=\"createTime\" width=\"100\">\n      </el-table-column>\n      <el-table-column label=\"用户ID\" prop=\"userId\">\n      </el-table-column>\n      <el-table-column label=\"用户昵称\" prop=\"nickname\">\n      </el-table-column>\n      <el-table-column label=\"手机号\" prop=\"mobile\">\n      </el-table-column>\n      <el-table-column label=\"用户人脸图片\" prop=\"faceImg\">\n        <template slot-scope=\"scope\">\n          <!-- <drop-down-image :source=\"scope.row.faceImg\" v-if=\"scope.row.faceImg\"></drop-down-image> -->\n          <img v-if=\"scope.row.faceImg\" :src=\"scope.row.faceImg\" alt=\"\" style=\"max-width: 100px\" @click=\"showImg(scope.row.faceImg)\">\n          <span v-else>-</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"remove\" @click=\"remove(scope.row)\" v-permission=\"'e561930b-ce8f-4a8b-88c8-ae62d1ec0b43'\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"currentPage\" :page-sizes=\"pageSizes\" :page-size=\"currentSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"curTotal\" v-permission=\"'e1806150-a740-4f6e-8531-8082a17cfdd8'\">\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport { getUserFaceList, removeUserFace } from 'api/user/userFace';\n\nimport DropDownImage from 'components/DropDownImage';\n\nexport default {\n  data() {\n    return {\n      curImg: '',\n      dialogVisible: false,\n      currentPage: 1,\n      currentSize: 10,\n      pageSizes: [10, 20, 30, 40],\n      curTotal: 0,\n      faceSign: 3,\n      nickname: '',\n      userId: '',\n      usermobile: '',\n      faceSignOptions: [\n        {\n          id: 3,\n          label: '全部'\n        },\n        {\n          id: 1,\n          label: '已采集'\n        },\n        {\n          id: 2,\n          label: '未采集'\n        }\n      ],\n      datas: [],\n      isFetchingFaceList: false\n    };\n  },\n  components: {\n    DropDownImage\n  },\n  watch: {\n    faceSign() {\n      this.fetchData();\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    next(vm => {\n      vm.$nextTick(() => {\n        vm.fetchData();\n      });\n    });\n  },\n  computed: {\n    isExactSearch() {\n      return this.userId || this.usermobile || this.nickname;\n    }\n  },\n  methods: {\n    showImg(img) {\n      this.curImg = img ? img : '';\n      this.dialogVisible = true;\n    },\n    remove(row) {\n      if (confirm('确认删除吗?')) {\n        removeUserFace({ userId: row.userId })\n          .then(res => {\n            if (res.data.code == 200) {\n              this.$notify.success('删除人脸成功');\n              this.fetchData();\n              return;\n            } else {\n              this.$notify.error('删除人脸失败');\n            }\n          })\n          .catch(() => {\n            this.$notify.error('删除人脸失败');\n          });\n      }\n    },\n    createParams() {\n      let params = {};\n      if (this.isExactSearch) {\n        // 精确搜索\n        if (this.nickname) {\n          params.nickname = this.nickname;\n        }\n        if (this.usermobile) {\n          params.mobile = this.usermobile;\n        }\n        if (this.userId) {\n          params.userId = this.userId;\n        }\n        params.page = 1;\n        params.size = 10;\n      } else {\n        // 列表筛选\n        params.page = this.currentPage;\n        params.size = this.currentSize;\n        params.faceSign = this.faceSign;\n      }\n      return params;\n    },\n    fetchData() {\n      this.isFetchingFaceList = true;\n      getUserFaceList(this.createParams())\n        .then(res => {\n          res.data.data.list.forEach((item, index) => {\n            item.createTime = this.moment(item.createTime).format(\n              'YYYY-MM-DD HH:mm:ss'\n            );\n          });\n          this.datas = res.data.data.list;\n          this.mapPagination(res.data.data);\n          this.isFetchingFaceList = false;\n        })\n        .catch(() => {\n          this.isFetchingFaceList = false;\n        });\n    },\n    mapPagination(data) {\n      this.currentPage = data.pageNum < 1 ? 1 : data.pageNum;\n      this.curPageSize = data.pageSize;\n      this.curTotal = data.total;\n    },\n    handleSizeChange(size) {\n      this.currentSize = size;\n      this.fetchData();\n    },\n    handleCurrentChange(page) {\n      this.currentPage = page;\n      this.fetchData();\n    }\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.fetchData();\n    });\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~assets/style/utils';\n.userFacePage {\n  background-color: #ffffff;\n  width: 100%;\n  min-height: 100%;\n  box-sizing: border-box;\n  padding: 20px;\n  .title {\n    font-size: 30px;\n    height: 50px;\n    line-height: 50px;\n    border: {\n      bottom: 1px solid #999999;\n    }\n  }\n}\n\n.selectors {\n  padding: {\n    top: 20px;\n  }\n  @include flexbox;\n  @include align-items(center);\n  .facesign {\n    margin: {\n      right: 20px;\n    }\n    @include flexbox;\n    @include align-items(center);\n    .subTitle {\n      width: 80px;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/user/userFace/Page.vue","import {\n  axiosClient\n} from 'common/axiosClient';\n\n// 获取用户人脸采集列表\nexport function getUserFaceList(params) {\n  return axiosClient.post('admin/Operate/getFaceList', params)\n}\n\n// 删除人脸采集\nexport function removeUserFace(params) {\n  return axiosClient.post('admin/Operate/delFaceImg', params)\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/user/userFace.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"userFacePage\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n    用户人脸采集\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"selectors\"},[_c('div',{staticClass:\"facesign\"},[_c('div',{staticClass:\"subTitle\"},[_vm._v(\"用户人脸\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.faceSign),callback:function ($$v) {_vm.faceSign=$$v},expression:\"faceSign\"}},_vm._l((_vm.faceSignOptions),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.label,\"value\":item.id}})}))],1),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"200px\",\"margin-right\":\"10px\"},attrs:{\"placeholder\":\"搜索用户昵称\"},model:{value:(_vm.nickname),callback:function ($$v) {_vm.nickname=$$v},expression:\"nickname\"}}),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"200px\",\"margin-right\":\"10px\"},attrs:{\"placeholder\":\"搜索用户手机号\"},model:{value:(_vm.usermobile),callback:function ($$v) {_vm.usermobile=$$v},expression:\"usermobile\"}}),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"200px\",\"margin-right\":\"10px\"},attrs:{\"placeholder\":\"搜索用户ID\"},model:{value:(_vm.userId),callback:function ($$v) {_vm.userId=$$v},expression:\"userId\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.fetchData}},[_vm._v(\"搜索\")])],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"图片\",\"center\":\"\",\"visible\":_vm.dialogVisible,\"width\":\"60%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"src\":_vm.curImg,\"alt\":\"\"}})]),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isFetchingFaceList),expression:\"isFetchingFaceList\"},{name:\"permission\",rawName:\"v-permission\",value:('e1806150-a740-4f6e-8531-8082a17cfdd8'),expression:\"'e1806150-a740-4f6e-8531-8082a17cfdd8'\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.datas}},[_c('el-table-column',{attrs:{\"label\":\"采集时间\",\"prop\":\"createTime\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"用户ID\",\"prop\":\"userId\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"用户昵称\",\"prop\":\"nickname\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"手机号\",\"prop\":\"mobile\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"用户人脸图片\",\"prop\":\"faceImg\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.faceImg)?_c('img',{staticStyle:{\"max-width\":\"100px\"},attrs:{\"src\":scope.row.faceImg,\"alt\":\"\"},on:{\"click\":function($event){_vm.showImg(scope.row.faceImg)}}}):_c('span',[_vm._v(\"-\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('e561930b-ce8f-4a8b-88c8-ae62d1ec0b43'),expression:\"'e561930b-ce8f-4a8b-88c8-ae62d1ec0b43'\"}],attrs:{\"type\":\"remove\"},on:{\"click\":function($event){_vm.remove(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('el-pagination',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('e1806150-a740-4f6e-8531-8082a17cfdd8'),expression:\"'e1806150-a740-4f6e-8531-8082a17cfdd8'\"}],attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":_vm.pageSizes,\"page-size\":_vm.currentSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.curTotal},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-240820bc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/user/userFace/Page.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-240820bc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Page.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Page.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Page.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-240820bc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Page.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-240820bc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/user/userFace/Page.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}