webpackJsonp([30],{"2V1l":function(e,t){},BQgP:function(e,t){},"Z0i/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),n=a.n(r),i=a("JaHG"),l=a("8lca"),o={props:{tableData:{type:Array,default:function(){return[]}}},data:function(){return{centerDialogVisible:!1,currentDetail:{},options:[{value:1,label:"设备异常"},{value:2,label:"门店应急"},{value:3,label:"安防报警"}],eventType:1,input:""}},methods:{checkDetail:function(e){this.centerDialogVisible=!0,this.currentDetail=e},editErrorCode:function(){var e=this;this.centerDialogVisible=!1,Object(l.c)({id:this.currentDetail.id,abnormalType:"设备异常"==this.currentDetail.abnormalType?1:"门店应急"==this.currentDetail.abnormalType?2:"安防报警"==this.currentDetail.abnormalType?3:"",handlePlan:this.input,eventType:this.eventType,eventName:"设备异常"}).then(function(t){return 200==t.data.code?(e.$emit("refreshData"),e.$notify.success("编辑成功")):e.$notify.error("编辑失败")}).catch(function(){return e.$notify.success("编辑失败")})}},mounted:function(){this.$nextTick(function(){})},computed:{datas:function(){var e=Object(i.b)(this.tableData);return e.forEach(function(e,t){e.abnormalType=1==e.abnormalType?"设备异常":2==e.abnormalType?"门店应急":"安防报警",e.exceptionSource=0==e.exceptionSource?"无异常":1==e.exceptionSource?"触键异常":2==e.exceptionSource?"主板设备异常":"接口异常",e.createTime=moment(e.createTime).format("YYYY-MM-DD HH:mm:ss")}),e}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.datas}},[a("el-table-column",{attrs:{prop:"createTime",label:"创建日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"exceptionType",label:"代码类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abnormalCode",label:"异常代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"exceptionSource",label:"异常来源"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abnormalType",label:"异常类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"eventType",label:"事件定义"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abnormalDescribe",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"handlePlan",label:"建议处理"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"4d0c8657-7e67-4e90-aea9-06dc5d8300bd",expression:"'4d0c8657-7e67-4e90-aea9-06dc5d8300bd'"}],attrs:{type:"text"},on:{click:function(a){e.checkDetail(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"详情",visible:e.centerDialogVisible,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"添加日期"}},[a("span",[e._v(e._s(e.currentDetail.createTime))])]),e._v(" "),a("el-form-item",{attrs:{label:"异常来源"}},[a("span",[e._v(e._s(e.currentDetail.exceptionSource))])]),e._v(" "),a("el-form-item",{attrs:{label:"异常代码"}},[a("span",[e._v(e._s(e.currentDetail.abnormalCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"异常描述"}},[a("span",[e._v(e._s(e.currentDetail.abnormalDescribe))])]),e._v(" "),a("el-form-item",{attrs:{label:"事件定义"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.eventType,callback:function(t){e.eventType=t},expression:"eventType"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"处理建议"}},[a("el-input",{attrs:{placeholder:"请输入内容",type:"textarea"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.editErrorCode}},[e._v("确认")]),e._v(" "),a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取消")])],1)]}}])})],1)},staticRenderFns:[]};var c=a("VU/8")(o,s,!1,function(e){a("2V1l")},"data-v-8d920d3c",null).exports,u={props:{tableData:{type:Array,default:function(){return[]}}},computed:{datas:function(){var e=Object(i.b)(this.tableData);return e.forEach(function(e,t){e.abnormalType=1==e.abnormalType?"设备异常":2==e.abnormalType?"门店应急":"安防报警",e.exceptionSource=0==e.exceptionSource?"无异常":1==e.exceptionSource?"触键异常":2==e.exceptionSource?"主板设备异常":"接口异常",e.createTime=moment(e.createTime).format("YYYY-MM-DD HH:mm:ss")}),e}},data:function(){return{}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.datas}},[a("el-table-column",{attrs:{prop:"createTime",label:"创建日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"exceptionType",label:"代码类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abnormalCode",label:"异常代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"exceptionSource",label:"异常来源"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abnormalType",label:"异常类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"eventType",label:"事件定义"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abnormalDescribe",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"handlePlan",label:"建议处理"}}),e._v(" "),a("el-table-column",{directives:[{name:"permission",rawName:"v-permission",value:"751176b2-d7f3-4ad8-800e-2544a92435e7",expression:"'751176b2-d7f3-4ad8-800e-2544a92435e7'"}],attrs:{label:"编辑"}})],1)},staticRenderFns:[]},d=a("VU/8")(u,p,!1,null,null,null).exports,b=a("NYxO"),m={computed:n()({},Object(b.e)({errorCodeList:function(e){return e.errorCode.errorCodeList},unclassifiedErrorCodeList:function(e){return e.errorCode.unclassifiedErrorCodeList},pageSize:function(e){return e.errorCode.pageSize},pageNum:function(e){return e.errorCode.pageNum},total:function(e){return e.errorCode.total},isFetchingErrorCodeData:function(e){return e.errorCode.isFetchingErrorCodeData}})),components:{classifyTab:c,notClassTab:d},data:function(){return{activeType:"2",pageSizes:[10,20,30,40],curPageSize:10,currentPage:1,curTotal:0,classifySign:2}},watch:{activeType:function(e){this.fetchData()}},methods:n()({},Object(b.b)(["getErrorCodeList","getExceptionSync"]),{exceptionSync:function(){var e=this;this.getExceptionSync().then(function(){e.fetchData(),e.$notify.success("一键同步成功")}).catch(function(){e.$notify.error("一键同步失败")})},handleClick:function(e,t){},handleSizeChange:function(e){this.curPageSize=e,this.fetchData()},handleCurrentChange:function(e){this.currentPage=e,this.fetchData()},mapPagination:function(){this.currentPage=this.pageNum,this.curTotal=this.total,this.curPageSize=this.pageSize},computeParams:function(){var e={};return e.page=this.currentPage4,e.size=this.curPageSize,e},createParams:function(){var e={};return e.classifySign=this.activeType,e.page=this.currentPage,e.size=this.curPageSize,e},fetchData:function(){var e=this;this.getErrorCodeList(this.createParams()).then(function(){e.mapPagination()})}}),mounted:function(){var e=this;this.$nextTick(function(){e.fetchData()})}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"protalPage"},[a("div",{staticClass:"wraper"},[a("div",{staticClass:"title"},[e._v("异常代码管理")]),e._v(" "),a("div",{staticClass:"Btn"},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"742f2779-af2f-4e92-b748-da5f1255076e",expression:"'742f2779-af2f-4e92-b748-da5f1255076e'"}],attrs:{type:"primary"},on:{click:e.exceptionSync}},[e._v("一键同步")])],1),e._v(" "),a("div",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeType,callback:function(t){e.activeType=t},expression:"activeType"}},[a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.isFetchingErrorCodeData,expression:"isFetchingErrorCodeData"},{name:"permission",rawName:"v-permission",value:"7f9d169b-a028-4886-bb21-e7b2c4bd0fd9",expression:"'7f9d169b-a028-4886-bb21-e7b2c4bd0fd9'"}],attrs:{label:"已分类异常",name:"2"}},[a("classify-tab",{directives:[{name:"permission",rawName:"v-permission",value:"88315bda-a9d4-4b22-9bb9-7ba7a26d46c2",expression:"'88315bda-a9d4-4b22-9bb9-7ba7a26d46c2'"}],attrs:{tableData:e.errorCodeList},on:{refreshData:e.fetchData}})],1),e._v(" "),a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.isFetchingErrorCodeData,expression:"isFetchingErrorCodeData"},{name:"permission",rawName:"v-permission",value:"cedde8db-6e4b-4bd0-a030-0108849c1717",expression:"'cedde8db-6e4b-4bd0-a030-0108849c1717'"}],attrs:{label:"待分类异常",name:"1"}},[a("not-class-tab",{directives:[{name:"permission",rawName:"v-permission",value:"2a72a1d8-9505-4da7-876d-fda7c87f99da",expression:"'2a72a1d8-9505-4da7-876d-fda7c87f99da'"}],attrs:{tableData:e.unclassifiedErrorCodeList}})],1)],1)],1),e._v(" "),2==e.activeType?a("div",{staticClass:"paging"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:e.curTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()])])},staticRenderFns:[]};var v=a("VU/8")(m,f,!1,function(e){a("BQgP")},"data-v-d37d609a",null);t.default=v.exports}});
//# sourceMappingURL=30.65642620d972bb785fb0.js.map